<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 8 ggplot2 | Introducción a la Ciencia de Datos</title>
  <meta name="description" content="Este libro presenta conceptos y destrezas que les ayudarán abordar los retos de situaciones actuales del análisis de datos. Cubre conceptos de probabilidad, inferencia estadística, regresión lineal y machine learning. Además, les permitirá desarrollar destrezas como la programación R, el wrangling de datos con dplyr, la visualización de datos con ggplot2, la organización de archivos con Shell de UNIX / Linux, el control de versiones con GitHub y la preparación de documentos reproducibles con R markdown." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 8 ggplot2 | Introducción a la Ciencia de Datos" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro presenta conceptos y destrezas que les ayudarán abordar los retos de situaciones actuales del análisis de datos. Cubre conceptos de probabilidad, inferencia estadística, regresión lineal y machine learning. Además, les permitirá desarrollar destrezas como la programación R, el wrangling de datos con dplyr, la visualización de datos con ggplot2, la organización de archivos con Shell de UNIX / Linux, el control de versiones con GitHub y la preparación de documentos reproducibles con R markdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 8 ggplot2 | Introducción a la Ciencia de Datos" />
  
  <meta name="twitter:description" content="Este libro presenta conceptos y destrezas que les ayudarán abordar los retos de situaciones actuales del análisis de datos. Cubre conceptos de probabilidad, inferencia estadística, regresión lineal y machine learning. Además, les permitirá desarrollar destrezas como la programación R, el wrangling de datos con dplyr, la visualización de datos con ggplot2, la organización de archivos con Shell de UNIX / Linux, el control de versiones con GitHub y la preparación de documentos reproducibles con R markdown." />
  

<meta name="author" content="Rafael A. Irizarry" />


<meta name="date" content="2020-04-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduccion-a-la-visualizacion-de-datos.html">
<link rel="next" href="distributions.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introducción a la Ciencia de Datos</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a></li>
<li class="chapter" data-level="" data-path="agradecimientos.html"><a href="agradecimientos.html"><i class="fa fa-check"></i>Agradecimientos</a></li>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html"><i class="fa fa-check"></i>Introducción</a><ul>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html#los-casos-de-estudio"><i class="fa fa-check"></i>Los casos de estudio</a></li>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html#quien-encontrara-util-este-libro"><i class="fa fa-check"></i>¿Quién encontrará útil este libro?</a></li>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html#que-cubre-este-libro"><i class="fa fa-check"></i>¿Que cubre este libro?</a></li>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html#que-no-cubre-este-libro"><i class="fa fa-check"></i>¿Qué no cubre este libro?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Comenzando con R y RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#por-que-r"><i class="fa fa-check"></i><b>1.1</b> ¿Por qué R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#la-consola-r"><i class="fa fa-check"></i><b>1.2</b> La consola R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#scripts"><i class="fa fa-check"></i><b>1.3</b> <em>scripts</em></a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>1.4</b> RStudio</a><ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#paneles"><i class="fa fa-check"></i><b>1.4.1</b> Paneles</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#key-bindings"><i class="fa fa-check"></i><b>1.4.2</b> <em>Key bindings</em></a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#como-ejecutar-comandos-mientras-edita-scripts"><i class="fa fa-check"></i><b>1.4.3</b> Cómo ejecutar comandos mientras edita <em>scripts</em></a></li>
<li class="chapter" data-level="1.4.4" data-path="getting-started.html"><a href="getting-started.html#como-cambiar-las-opciones-globales"><i class="fa fa-check"></i><b>1.4.4</b> Cómo cambiar las opciones globales</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#instalacion-de-paquetes-de-r"><i class="fa fa-check"></i><b>1.5</b> Instalación de paquetes de R</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="2" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2</b> Lo básico de R</a><ul>
<li class="chapter" data-level="2.1" data-path="r-basics.html"><a href="r-basics.html#caso-de-estudio-los-asesinatos-con-armas-en-ee.-uu."><i class="fa fa-check"></i><b>2.1</b> Caso de estudio: los asesinatos con armas en EE. UU.</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics.html"><a href="r-basics.html#lo-basico"><i class="fa fa-check"></i><b>2.2</b> Lo básico</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r-basics.html"><a href="r-basics.html#objetos"><i class="fa fa-check"></i><b>2.2.1</b> Objetos</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-basics.html"><a href="r-basics.html#el-espacio-de-trabajo"><i class="fa fa-check"></i><b>2.2.2</b> El espacio de trabajo</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-basics.html"><a href="r-basics.html#funciones"><i class="fa fa-check"></i><b>2.2.3</b> Funciones</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-basics.html"><a href="r-basics.html#otros-objetos-predefinidos"><i class="fa fa-check"></i><b>2.2.4</b> Otros objetos predefinidos</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-basics.html"><a href="r-basics.html#nombres-de-variables"><i class="fa fa-check"></i><b>2.2.5</b> Nombres de variables</a></li>
<li class="chapter" data-level="2.2.6" data-path="r-basics.html"><a href="r-basics.html#como-guardar-su-espacio-de-trabajo"><i class="fa fa-check"></i><b>2.2.6</b> Cómo guardar su espacio de trabajo</a></li>
<li class="chapter" data-level="2.2.7" data-path="r-basics.html"><a href="r-basics.html#scripts-motivantes"><i class="fa fa-check"></i><b>2.2.7</b> <em>Scripts</em> motivantes</a></li>
<li class="chapter" data-level="2.2.8" data-path="r-basics.html"><a href="r-basics.html#como-comentar-su-codigo"><i class="fa fa-check"></i><b>2.2.8</b> Cómo comentar su código</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html#ejercicios"><i class="fa fa-check"></i><b>2.3</b> Ejercicios</a></li>
<li class="chapter" data-level="2.4" data-path="r-basics.html"><a href="r-basics.html#tipos-de-datos"><i class="fa fa-check"></i><b>2.4</b> Tipos de datos</a><ul>
<li class="chapter" data-level="2.4.1" data-path="r-basics.html"><a href="r-basics.html#data-frames"><i class="fa fa-check"></i><b>2.4.1</b> <em>data frames</em></a></li>
<li class="chapter" data-level="2.4.2" data-path="r-basics.html"><a href="r-basics.html#como-examinar-un-objeto"><i class="fa fa-check"></i><b>2.4.2</b> Cómo examinar un objeto</a></li>
<li class="chapter" data-level="2.4.3" data-path="r-basics.html"><a href="r-basics.html#el-operador-de-acceso"><i class="fa fa-check"></i><b>2.4.3</b> El operador de acceso: <code>$</code></a></li>
<li class="chapter" data-level="2.4.4" data-path="r-basics.html"><a href="r-basics.html#vectores-numericos-de-caracteres-y-logicos"><i class="fa fa-check"></i><b>2.4.4</b> Vectores: numéricos, de caracteres y lógicos</a></li>
<li class="chapter" data-level="2.4.5" data-path="r-basics.html"><a href="r-basics.html#factors"><i class="fa fa-check"></i><b>2.4.5</b> Factores</a></li>
<li class="chapter" data-level="2.4.6" data-path="r-basics.html"><a href="r-basics.html#listas"><i class="fa fa-check"></i><b>2.4.6</b> Listas</a></li>
<li class="chapter" data-level="2.4.7" data-path="r-basics.html"><a href="r-basics.html#matrices"><i class="fa fa-check"></i><b>2.4.7</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r-basics.html"><a href="r-basics.html#ejercicios-1"><i class="fa fa-check"></i><b>2.5</b> Ejercicios</a></li>
<li class="chapter" data-level="2.6" data-path="r-basics.html"><a href="r-basics.html#vectores"><i class="fa fa-check"></i><b>2.6</b> Vectores</a><ul>
<li class="chapter" data-level="2.6.1" data-path="r-basics.html"><a href="r-basics.html#como-crear-vectores"><i class="fa fa-check"></i><b>2.6.1</b> Cómo crear vectores</a></li>
<li class="chapter" data-level="2.6.2" data-path="r-basics.html"><a href="r-basics.html#nombres"><i class="fa fa-check"></i><b>2.6.2</b> Nombres</a></li>
<li class="chapter" data-level="2.6.3" data-path="r-basics.html"><a href="r-basics.html#secuencias"><i class="fa fa-check"></i><b>2.6.3</b> Secuencias</a></li>
<li class="chapter" data-level="2.6.4" data-path="r-basics.html"><a href="r-basics.html#como-crear-un-subconjunto"><i class="fa fa-check"></i><b>2.6.4</b> Cómo crear un subconjunto</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r-basics.html"><a href="r-basics.html#la-conversion-forzada"><i class="fa fa-check"></i><b>2.7</b> La conversión forzada</a><ul>
<li class="chapter" data-level="2.7.1" data-path="r-basics.html"><a href="r-basics.html#not-available-na"><i class="fa fa-check"></i><b>2.7.1</b> <em>Not available</em> (NA)</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="r-basics.html"><a href="r-basics.html#ejercicios-2"><i class="fa fa-check"></i><b>2.8</b> Ejercicios</a></li>
<li class="chapter" data-level="2.9" data-path="r-basics.html"><a href="r-basics.html#sorting"><i class="fa fa-check"></i><b>2.9</b> <em>Sorting</em></a><ul>
<li class="chapter" data-level="2.9.1" data-path="r-basics.html"><a href="r-basics.html#sort"><i class="fa fa-check"></i><b>2.9.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="2.9.2" data-path="r-basics.html"><a href="r-basics.html#order"><i class="fa fa-check"></i><b>2.9.2</b> <code>order</code></a></li>
<li class="chapter" data-level="2.9.3" data-path="r-basics.html"><a href="r-basics.html#max-y-which.max"><i class="fa fa-check"></i><b>2.9.3</b> <code>max</code> y <code>which.max</code></a></li>
<li class="chapter" data-level="2.9.4" data-path="r-basics.html"><a href="r-basics.html#rank"><i class="fa fa-check"></i><b>2.9.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="2.9.5" data-path="r-basics.html"><a href="r-basics.html#cuidado-con-el-reciclaje"><i class="fa fa-check"></i><b>2.9.5</b> Cuidado con el reciclaje</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="r-basics.html"><a href="r-basics.html#ejercicios-3"><i class="fa fa-check"></i><b>2.10</b> Ejercicios</a></li>
<li class="chapter" data-level="2.11" data-path="r-basics.html"><a href="r-basics.html#aritmetica-de-vectores"><i class="fa fa-check"></i><b>2.11</b> Aritmética de vectores</a><ul>
<li class="chapter" data-level="2.11.1" data-path="r-basics.html"><a href="r-basics.html#rescaling-un-vector"><i class="fa fa-check"></i><b>2.11.1</b> <em>Rescaling</em> un vector</a></li>
<li class="chapter" data-level="2.11.2" data-path="r-basics.html"><a href="r-basics.html#dos-vectores"><i class="fa fa-check"></i><b>2.11.2</b> Dos vectores</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="r-basics.html"><a href="r-basics.html#ejercicios-4"><i class="fa fa-check"></i><b>2.12</b> Ejercicios</a></li>
<li class="chapter" data-level="2.13" data-path="r-basics.html"><a href="r-basics.html#indexacion"><i class="fa fa-check"></i><b>2.13</b> Indexación</a><ul>
<li class="chapter" data-level="2.13.1" data-path="r-basics.html"><a href="r-basics.html#crear-subconjuntos-con-logicos"><i class="fa fa-check"></i><b>2.13.1</b> Crear subconjuntos con lógicos</a></li>
<li class="chapter" data-level="2.13.2" data-path="r-basics.html"><a href="r-basics.html#operadores-logicos"><i class="fa fa-check"></i><b>2.13.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="2.13.3" data-path="r-basics.html"><a href="r-basics.html#which"><i class="fa fa-check"></i><b>2.13.3</b> <code>which</code></a></li>
<li class="chapter" data-level="2.13.4" data-path="r-basics.html"><a href="r-basics.html#match"><i class="fa fa-check"></i><b>2.13.4</b> <code>match</code></a></li>
<li class="chapter" data-level="2.13.5" data-path="r-basics.html"><a href="r-basics.html#in"><i class="fa fa-check"></i><b>2.13.5</b> <code>%in%</code></a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="r-basics.html"><a href="r-basics.html#ejercicios-5"><i class="fa fa-check"></i><b>2.14</b> Ejercicios</a></li>
<li class="chapter" data-level="2.15" data-path="r-basics.html"><a href="r-basics.html#graficos-basicos"><i class="fa fa-check"></i><b>2.15</b> Gráficos básicos</a><ul>
<li class="chapter" data-level="2.15.1" data-path="r-basics.html"><a href="r-basics.html#plot"><i class="fa fa-check"></i><b>2.15.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="2.15.2" data-path="r-basics.html"><a href="r-basics.html#hist"><i class="fa fa-check"></i><b>2.15.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="2.15.3" data-path="r-basics.html"><a href="r-basics.html#boxplot"><i class="fa fa-check"></i><b>2.15.3</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="2.15.4" data-path="r-basics.html"><a href="r-basics.html#image"><i class="fa fa-check"></i><b>2.15.4</b> <code>image</code></a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="r-basics.html"><a href="r-basics.html#ejercicios-6"><i class="fa fa-check"></i><b>2.16</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html"><i class="fa fa-check"></i><b>3</b> Conceptos básicos de programación</a><ul>
<li class="chapter" data-level="3.1" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html#conditionals"><i class="fa fa-check"></i><b>3.1</b> Expresiones condicionales</a></li>
<li class="chapter" data-level="3.2" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html#como-definir-funciones"><i class="fa fa-check"></i><b>3.2</b> Cómo definir funciones</a></li>
<li class="chapter" data-level="3.3" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html#namespaces"><i class="fa fa-check"></i><b>3.3</b> <em>Namespaces</em></a></li>
<li class="chapter" data-level="3.4" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html#bucles-for"><i class="fa fa-check"></i><b>3.4</b> Bucles-for</a></li>
<li class="chapter" data-level="3.5" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html#vectorization"><i class="fa fa-check"></i><b>3.5</b> Vectorización y funcionales</a></li>
<li class="chapter" data-level="3.6" data-path="conceptos-basicos-de-programacion.html"><a href="conceptos-basicos-de-programacion.html#ejercicios-7"><i class="fa fa-check"></i><b>3.6</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> <em>tidyverse</em></a><ul>
<li class="chapter" data-level="4.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>4.1</b> Data <em>tidy</em></a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-8"><i class="fa fa-check"></i><b>4.2</b> Ejercicios</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse.html"><a href="tidyverse.html#como-manipular-los-data-frames"><i class="fa fa-check"></i><b>4.3</b> Cómo manipular los <em>data frames</em></a><ul>
<li class="chapter" data-level="4.3.1" data-path="tidyverse.html"><a href="tidyverse.html#como-agregar-una-columna-con-mutate"><i class="fa fa-check"></i><b>4.3.1</b> Cómo agregar una columna con <code>mutate</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="tidyverse.html"><a href="tidyverse.html#como-crear-subconjuntos-con-filter"><i class="fa fa-check"></i><b>4.3.2</b> Cómo crear subconjuntos con <code>filter</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="tidyverse.html"><a href="tidyverse.html#como-seleccionar-columnas-con-select"><i class="fa fa-check"></i><b>4.3.3</b> Cómo seleccionar columnas con <code>select</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-9"><i class="fa fa-check"></i><b>4.4</b> Ejercicios</a></li>
<li class="chapter" data-level="4.5" data-path="tidyverse.html"><a href="tidyverse.html#el-pipe"><i class="fa fa-check"></i><b>4.5</b> El <em>pipe</em>: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.6" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-10"><i class="fa fa-check"></i><b>4.6</b> Ejercicios</a></li>
<li class="chapter" data-level="4.7" data-path="tidyverse.html"><a href="tidyverse.html#como-resumir-datos"><i class="fa fa-check"></i><b>4.7</b> Cómo resumir datos</a><ul>
<li class="chapter" data-level="4.7.1" data-path="tidyverse.html"><a href="tidyverse.html#summarize"><i class="fa fa-check"></i><b>4.7.1</b> <code>summarize</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="tidyverse.html"><a href="tidyverse.html#pull"><i class="fa fa-check"></i><b>4.7.2</b> <code>pull</code></a></li>
<li class="chapter" data-level="4.7.3" data-path="tidyverse.html"><a href="tidyverse.html#group-by"><i class="fa fa-check"></i><b>4.7.3</b> Cómo agrupar y luego resumir con <code>group_by</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="tidyverse.html"><a href="tidyverse.html#como-ordenar-los-data-frames"><i class="fa fa-check"></i><b>4.8</b> Cómo ordenar los <em>data frames</em></a><ul>
<li class="chapter" data-level="4.8.1" data-path="tidyverse.html"><a href="tidyverse.html#como-ordenar-anidadamente"><i class="fa fa-check"></i><b>4.8.1</b> Cómo ordenar anidadamente</a></li>
<li class="chapter" data-level="4.8.2" data-path="tidyverse.html"><a href="tidyverse.html#los-primeros-n"><i class="fa fa-check"></i><b>4.8.2</b> Los primeros <span class="math inline">\(n\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-11"><i class="fa fa-check"></i><b>4.9</b> Ejercicios</a></li>
<li class="chapter" data-level="4.10" data-path="tidyverse.html"><a href="tidyverse.html#tibbles"><i class="fa fa-check"></i><b>4.10</b> <em>Tibbles</em></a><ul>
<li class="chapter" data-level="4.10.1" data-path="tidyverse.html"><a href="tidyverse.html#los-tibbles-se-ven-mejor"><i class="fa fa-check"></i><b>4.10.1</b> Los <em>tibbles</em> se ven mejor</a></li>
<li class="chapter" data-level="4.10.2" data-path="tidyverse.html"><a href="tidyverse.html#los-subconjuntos-de-tibbles-son-tibbles"><i class="fa fa-check"></i><b>4.10.2</b> Los subconjuntos de <em>tibbles</em> son <em>tibbles</em></a></li>
<li class="chapter" data-level="4.10.3" data-path="tidyverse.html"><a href="tidyverse.html#los-tibbles-pueden-tener-entradas-complejas"><i class="fa fa-check"></i><b>4.10.3</b> Los <em>tibbles</em> pueden tener entradas complejas</a></li>
<li class="chapter" data-level="4.10.4" data-path="tidyverse.html"><a href="tidyverse.html#los-tibbles-se-pueden-agrupar"><i class="fa fa-check"></i><b>4.10.4</b> Los <em>tibbles</em> se pueden agrupar</a></li>
<li class="chapter" data-level="4.10.5" data-path="tidyverse.html"><a href="tidyverse.html#como-crear-un-tibble-usando-tibble-en-lugar-de-data.frame"><i class="fa fa-check"></i><b>4.10.5</b> Cómo crear un <em>tibble</em> usando <code>tibble</code> en lugar de <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="tidyverse.html"><a href="tidyverse.html#el-operador-punto"><i class="fa fa-check"></i><b>4.11</b> El operador punto</a></li>
<li class="chapter" data-level="4.12" data-path="tidyverse.html"><a href="tidyverse.html#do"><i class="fa fa-check"></i><b>4.12</b> <code>do</code></a></li>
<li class="chapter" data-level="4.13" data-path="tidyverse.html"><a href="tidyverse.html#el-paquete-purrr"><i class="fa fa-check"></i><b>4.13</b> El paquete <strong>purrr</strong></a></li>
<li class="chapter" data-level="4.14" data-path="tidyverse.html"><a href="tidyverse.html#los-condicionales-de-tidyverse"><i class="fa fa-check"></i><b>4.14</b> Los condicionales de <em>tidyverse</em></a><ul>
<li class="chapter" data-level="4.14.1" data-path="tidyverse.html"><a href="tidyverse.html#case_when"><i class="fa fa-check"></i><b>4.14.1</b> <code>case_when</code></a></li>
<li class="chapter" data-level="4.14.2" data-path="tidyverse.html"><a href="tidyverse.html#between"><i class="fa fa-check"></i><b>4.14.2</b> <code>between</code></a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-12"><i class="fa fa-check"></i><b>4.15</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>5</b> Importando datos</a><ul>
<li class="chapter" data-level="5.1" data-path="importing-data.html"><a href="importing-data.html#las-rutas-y-el-directorio-de-trabajo"><i class="fa fa-check"></i><b>5.1</b> Las rutas y el directorio de trabajo</a><ul>
<li class="chapter" data-level="5.1.1" data-path="importing-data.html"><a href="importing-data.html#el-sistema-de-archivos"><i class="fa fa-check"></i><b>5.1.1</b> El sistema de archivos</a></li>
<li class="chapter" data-level="5.1.2" data-path="importing-data.html"><a href="importing-data.html#las-rutas-relativas-y-completas"><i class="fa fa-check"></i><b>5.1.2</b> Las rutas relativas y completas</a></li>
<li class="chapter" data-level="5.1.3" data-path="importing-data.html"><a href="importing-data.html#el-directorio-de-trabajo"><i class="fa fa-check"></i><b>5.1.3</b> El directorio de trabajo</a></li>
<li class="chapter" data-level="5.1.4" data-path="importing-data.html"><a href="importing-data.html#como-generar-los-nombres-de-ruta"><i class="fa fa-check"></i><b>5.1.4</b> Cómo generar los nombres de ruta</a></li>
<li class="chapter" data-level="5.1.5" data-path="importing-data.html"><a href="importing-data.html#como-copiar-los-archivos-usando-rutas"><i class="fa fa-check"></i><b>5.1.5</b> Cómo copiar los archivos usando rutas</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-data.html"><a href="importing-data.html#los-paquetes-readr-y-readxl"><i class="fa fa-check"></i><b>5.2</b> Los paquetes readr y readxl</a><ul>
<li class="chapter" data-level="5.2.1" data-path="importing-data.html"><a href="importing-data.html#readr"><i class="fa fa-check"></i><b>5.2.1</b> readr</a></li>
<li class="chapter" data-level="5.2.2" data-path="importing-data.html"><a href="importing-data.html#readxl"><i class="fa fa-check"></i><b>5.2.2</b> readxl</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="importing-data.html"><a href="importing-data.html#ejercicios-13"><i class="fa fa-check"></i><b>5.3</b> Ejercicios</a></li>
<li class="chapter" data-level="5.4" data-path="importing-data.html"><a href="importing-data.html#como-descargar-archivos"><i class="fa fa-check"></i><b>5.4</b> Cómo descargar archivos</a></li>
<li class="chapter" data-level="5.5" data-path="importing-data.html"><a href="importing-data.html#las-funciones-de-importacion-de-base-r"><i class="fa fa-check"></i><b>5.5</b> Las funciones de importación de base R</a><ul>
<li class="chapter" data-level="5.5.1" data-path="importing-data.html"><a href="importing-data.html#scan"><i class="fa fa-check"></i><b>5.5.1</b> <code>scan</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="importing-data.html"><a href="importing-data.html#archivos-de-texto-versus-archivos-binarios"><i class="fa fa-check"></i><b>5.6</b> Archivos de texto versus archivos binarios</a></li>
<li class="chapter" data-level="5.7" data-path="importing-data.html"><a href="importing-data.html#unicode-versus-ascii"><i class="fa fa-check"></i><b>5.7</b> Unicode versus ASCII</a></li>
<li class="chapter" data-level="5.8" data-path="importing-data.html"><a href="importing-data.html#como-organizar-datos-con-hojas-de-calculo"><i class="fa fa-check"></i><b>5.8</b> Cómo organizar datos con hojas de cálculo</a></li>
<li class="chapter" data-level="5.9" data-path="importing-data.html"><a href="importing-data.html#ejercicios-14"><i class="fa fa-check"></i><b>5.9</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="part-visualizacion-de-datos-esta-parte-todavia-esta-en-construccion.html"><a href="part-visualizacion-de-datos-esta-parte-todavia-esta-en-construccion.html"><i class="fa fa-check"></i><b>6</b> (PART) Visualización de datos ESTA PARTE TODAVIA ESTA EN CONSTRUCCION</a></li>
<li class="chapter" data-level="7" data-path="introduccion-a-la-visualizacion-de-datos.html"><a href="introduccion-a-la-visualizacion-de-datos.html"><i class="fa fa-check"></i><b>7</b> Introducción a la visualización de datos</a></li>
<li class="chapter" data-level="8" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>8</b> ggplot2</a><ul>
<li class="chapter" data-level="8.1" data-path="ggplot2.html"><a href="ggplot2.html#los-componentes-de-un-grafico"><i class="fa fa-check"></i><b>8.1</b> Los componentes de un gráfico</a></li>
<li class="chapter" data-level="8.2" data-path="ggplot2.html"><a href="ggplot2.html#ggplot-objetos"><i class="fa fa-check"></i><b>8.2</b> <code>ggplot</code> objetos</a></li>
<li class="chapter" data-level="8.3" data-path="ggplot2.html"><a href="ggplot2.html#geometrias"><i class="fa fa-check"></i><b>8.3</b> Geometrías</a></li>
<li class="chapter" data-level="8.4" data-path="ggplot2.html"><a href="ggplot2.html#mapeos-esteticos"><i class="fa fa-check"></i><b>8.4</b> Mapeos estéticos</a></li>
<li class="chapter" data-level="8.5" data-path="ggplot2.html"><a href="ggplot2.html#capas"><i class="fa fa-check"></i><b>8.5</b> Capas</a><ul>
<li class="chapter" data-level="8.5.1" data-path="ggplot2.html"><a href="ggplot2.html#jugueteando-con-argumentos"><i class="fa fa-check"></i><b>8.5.1</b> Jugueteando con argumentos</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="ggplot2.html"><a href="ggplot2.html#mapeos-esteticos-globales-versus-locales"><i class="fa fa-check"></i><b>8.6</b> Mapeos estéticos globales versus locales</a></li>
<li class="chapter" data-level="8.7" data-path="ggplot2.html"><a href="ggplot2.html#escamas"><i class="fa fa-check"></i><b>8.7</b> Escamas</a></li>
<li class="chapter" data-level="8.8" data-path="ggplot2.html"><a href="ggplot2.html#etiquetas-y-titulos"><i class="fa fa-check"></i><b>8.8</b> Etiquetas y títulos</a></li>
<li class="chapter" data-level="8.9" data-path="ggplot2.html"><a href="ggplot2.html#categorias-como-colores"><i class="fa fa-check"></i><b>8.9</b> Categorías como colores</a></li>
<li class="chapter" data-level="8.10" data-path="ggplot2.html"><a href="ggplot2.html#anotacion-formas-y-ajustes"><i class="fa fa-check"></i><b>8.10</b> Anotación, formas y ajustes</a></li>
<li class="chapter" data-level="8.11" data-path="ggplot2.html"><a href="ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>8.11</b> Paquetes complementarios</a></li>
<li class="chapter" data-level="8.12" data-path="ggplot2.html"><a href="ggplot2.html#poniendolo-todo-junto"><i class="fa fa-check"></i><b>8.12</b> Poniendolo todo junto</a></li>
<li class="chapter" data-level="8.13" data-path="ggplot2.html"><a href="ggplot2.html#qplot"><i class="fa fa-check"></i><b>8.13</b> Trazados rápidos con <code>qplot</code></a></li>
<li class="chapter" data-level="8.14" data-path="ggplot2.html"><a href="ggplot2.html#cuadriculas-de-parcelas"><i class="fa fa-check"></i><b>8.14</b> Cuadrículas de parcelas</a></li>
<li class="chapter" data-level="8.15" data-path="ggplot2.html"><a href="ggplot2.html#ejercicios-15"><i class="fa fa-check"></i><b>8.15</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>9</b> Visualizar distribuciones de datos</a><ul>
<li class="chapter" data-level="9.1" data-path="distributions.html"><a href="distributions.html#tipos-de-variables"><i class="fa fa-check"></i><b>9.1</b> Tipos de variables</a></li>
<li class="chapter" data-level="9.2" data-path="distributions.html"><a href="distributions.html#estudio-de-caso-descripcion-de-las-alturas-de-los-estudiantes"><i class="fa fa-check"></i><b>9.2</b> Estudio de caso: descripción de las alturas de los estudiantes</a></li>
<li class="chapter" data-level="9.3" data-path="distributions.html"><a href="distributions.html#funcion-de-distribucion"><i class="fa fa-check"></i><b>9.3</b> Función de distribución</a></li>
<li class="chapter" data-level="9.4" data-path="distributions.html"><a href="distributions.html#cdf-intro"><i class="fa fa-check"></i><b>9.4</b> Funciones de distribución acumulativa</a></li>
<li class="chapter" data-level="9.5" data-path="distributions.html"><a href="distributions.html#histogramas"><i class="fa fa-check"></i><b>9.5</b> Histogramas</a></li>
<li class="chapter" data-level="9.6" data-path="distributions.html"><a href="distributions.html#densidad-suavizada"><i class="fa fa-check"></i><b>9.6</b> Densidad suavizada</a><ul>
<li class="chapter" data-level="9.6.1" data-path="distributions.html"><a href="distributions.html#interpretando-el-eje-y"><i class="fa fa-check"></i><b>9.6.1</b> Interpretando el eje y</a></li>
<li class="chapter" data-level="9.6.2" data-path="distributions.html"><a href="distributions.html#las-densidades-permiten-la-estratificacion"><i class="fa fa-check"></i><b>9.6.2</b> Las densidades permiten la estratificación</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="distributions.html"><a href="distributions.html#ejercicios-16"><i class="fa fa-check"></i><b>9.7</b> Ejercicios</a></li>
<li class="chapter" data-level="9.8" data-path="distributions.html"><a href="distributions.html#normal-distribution"><i class="fa fa-check"></i><b>9.8</b> La distribución normal</a></li>
<li class="chapter" data-level="9.9" data-path="distributions.html"><a href="distributions.html#unidades-estandar"><i class="fa fa-check"></i><b>9.9</b> Unidades estándar</a></li>
<li class="chapter" data-level="9.10" data-path="distributions.html"><a href="distributions.html#graficos-cuantil-cuantil"><i class="fa fa-check"></i><b>9.10</b> Gráficos cuantil-cuantil</a></li>
<li class="chapter" data-level="9.11" data-path="distributions.html"><a href="distributions.html#percentiles"><i class="fa fa-check"></i><b>9.11</b> Percentiles</a></li>
<li class="chapter" data-level="9.12" data-path="distributions.html"><a href="distributions.html#graficos-de-caja"><i class="fa fa-check"></i><b>9.12</b> Gráficos de caja</a></li>
<li class="chapter" data-level="9.13" data-path="distributions.html"><a href="distributions.html#stratification"><i class="fa fa-check"></i><b>9.13</b> Estratificación</a></li>
<li class="chapter" data-level="9.14" data-path="distributions.html"><a href="distributions.html#student-height-cont"><i class="fa fa-check"></i><b>9.14</b> Estudio de caso: descripción de las alturas de los estudiantes (continuación)</a></li>
<li class="chapter" data-level="9.15" data-path="distributions.html"><a href="distributions.html#ejercicios-17"><i class="fa fa-check"></i><b>9.15</b> Ejercicios</a></li>
<li class="chapter" data-level="9.16" data-path="distributions.html"><a href="distributions.html#other-geometries"><i class="fa fa-check"></i><b>9.16</b> geometrías ggplot2</a><ul>
<li class="chapter" data-level="9.16.1" data-path="distributions.html"><a href="distributions.html#barplots"><i class="fa fa-check"></i><b>9.16.1</b> Barplots</a></li>
<li class="chapter" data-level="9.16.2" data-path="distributions.html"><a href="distributions.html#histogramas-1"><i class="fa fa-check"></i><b>9.16.2</b> Histogramas</a></li>
<li class="chapter" data-level="9.16.3" data-path="distributions.html"><a href="distributions.html#graficos-de-densidad"><i class="fa fa-check"></i><b>9.16.3</b> Gráficos de densidad</a></li>
<li class="chapter" data-level="9.16.4" data-path="distributions.html"><a href="distributions.html#boxplots"><i class="fa fa-check"></i><b>9.16.4</b> Boxplots</a></li>
<li class="chapter" data-level="9.16.5" data-path="distributions.html"><a href="distributions.html#qq-plot"><i class="fa fa-check"></i><b>9.16.5</b> QQ-plot</a></li>
<li class="chapter" data-level="9.16.6" data-path="distributions.html"><a href="distributions.html#imagenes"><i class="fa fa-check"></i><b>9.16.6</b> Imágenes</a></li>
<li class="chapter" data-level="9.16.7" data-path="distributions.html"><a href="distributions.html#trazados-rapidos"><i class="fa fa-check"></i><b>9.16.7</b> Trazados rápidos</a></li>
</ul></li>
<li class="chapter" data-level="9.17" data-path="distributions.html"><a href="distributions.html#ejercicios-18"><i class="fa fa-check"></i><b>9.17</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>10</b> Visualización de datos en la práctica</a><ul>
<li class="chapter" data-level="10.1" data-path="gapminder.html"><a href="gapminder.html#estudio-de-caso-nuevas-ideas-sobre-la-pobreza"><i class="fa fa-check"></i><b>10.1</b> Estudio de caso: nuevas ideas sobre la pobreza</a><ul>
<li class="chapter" data-level="10.1.1" data-path="gapminder.html"><a href="gapminder.html#prueba-de-hans-rosling"><i class="fa fa-check"></i><b>10.1.1</b> Prueba de Hans Rosling</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="gapminder.html"><a href="gapminder.html#grafico-de-dispersion"><i class="fa fa-check"></i><b>10.2</b> Gráfico de dispersión</a></li>
<li class="chapter" data-level="10.3" data-path="gapminder.html"><a href="gapminder.html#facetado"><i class="fa fa-check"></i><b>10.3</b> Facetado</a><ul>
<li class="chapter" data-level="10.3.1" data-path="gapminder.html"><a href="gapminder.html#facet_wrap"><i class="fa fa-check"></i><b>10.3.1</b> <code>facet_wrap</code></a></li>
<li class="chapter" data-level="10.3.2" data-path="gapminder.html"><a href="gapminder.html#escalas-fijas-para-mejores-comparaciones"><i class="fa fa-check"></i><b>10.3.2</b> Escalas fijas para mejores comparaciones</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="gapminder.html"><a href="gapminder.html#graficos-de-series-de-tiempo"><i class="fa fa-check"></i><b>10.4</b> Gráficos de series de tiempo</a><ul>
<li class="chapter" data-level="10.4.1" data-path="gapminder.html"><a href="gapminder.html#etiquetas-en-lugar-de-leyendas"><i class="fa fa-check"></i><b>10.4.1</b> Etiquetas en lugar de leyendas</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="gapminder.html"><a href="gapminder.html#transformaciones-de-datos"><i class="fa fa-check"></i><b>10.5</b> Transformaciones de datos</a><ul>
<li class="chapter" data-level="10.5.1" data-path="gapminder.html"><a href="gapminder.html#transformacion-de-registro"><i class="fa fa-check"></i><b>10.5.1</b> Transformación de registro</a></li>
<li class="chapter" data-level="10.5.2" data-path="gapminder.html"><a href="gapminder.html#que-base"><i class="fa fa-check"></i><b>10.5.2</b> ¿Qué base?</a></li>
<li class="chapter" data-level="10.5.3" data-path="gapminder.html"><a href="gapminder.html#transformar-los-valores-o-la-escala"><i class="fa fa-check"></i><b>10.5.3</b> ¿Transformar los valores o la escala?</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="gapminder.html"><a href="gapminder.html#visualizando-distribuciones-multimodales"><i class="fa fa-check"></i><b>10.6</b> Visualizando distribuciones multimodales</a></li>
<li class="chapter" data-level="10.7" data-path="gapminder.html"><a href="gapminder.html#comparar-multiples-distribuciones-con-graficos-de-caja-y-graficos-de-cresta"><i class="fa fa-check"></i><b>10.7</b> Comparar múltiples distribuciones con gráficos de caja y gráficos de cresta</a><ul>
<li class="chapter" data-level="10.7.1" data-path="gapminder.html"><a href="gapminder.html#boxplots-1"><i class="fa fa-check"></i><b>10.7.1</b> Boxplots</a></li>
<li class="chapter" data-level="10.7.2" data-path="gapminder.html"><a href="gapminder.html#parcelas-de-cresta"><i class="fa fa-check"></i><b>10.7.2</b> Parcelas de cresta</a></li>
<li class="chapter" data-level="10.7.3" data-path="gapminder.html"><a href="gapminder.html#ejemplo-distribuciones-de-ingresos-de-1970-versus-2010"><i class="fa fa-check"></i><b>10.7.3</b> Ejemplo: distribuciones de ingresos de 1970 versus 2010</a></li>
<li class="chapter" data-level="10.7.4" data-path="gapminder.html"><a href="gapminder.html#acceso-a-variables-calculadas"><i class="fa fa-check"></i><b>10.7.4</b> Acceso a variables calculadas</a></li>
<li class="chapter" data-level="10.7.5" data-path="gapminder.html"><a href="gapminder.html#densidades-ponderadas"><i class="fa fa-check"></i><b>10.7.5</b> Densidades ponderadas</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="gapminder.html"><a href="gapminder.html#la-falacia-ecologica-y-la-importancia-de-mostrar-los-datos"><i class="fa fa-check"></i><b>10.8</b> La falacia ecológica y la importancia de mostrar los datos</a><ul>
<li class="chapter" data-level="10.8.1" data-path="gapminder.html"><a href="gapminder.html#logit"><i class="fa fa-check"></i><b>10.8.1</b> Transformación logística</a></li>
<li class="chapter" data-level="10.8.2" data-path="gapminder.html"><a href="gapminder.html#mostrar-los-datos"><i class="fa fa-check"></i><b>10.8.2</b> Mostrar los datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html"><i class="fa fa-check"></i><b>11</b> Principios de visualización de datos</a><ul>
<li class="chapter" data-level="11.1" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#codificacion-de-datos-utilizando-senales-visuales"><i class="fa fa-check"></i><b>11.1</b> Codificación de datos utilizando señales visuales</a></li>
<li class="chapter" data-level="11.2" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#sepa-cuando-incluir-0"><i class="fa fa-check"></i><b>11.2</b> Sepa cuándo incluir 0</a></li>
<li class="chapter" data-level="11.3" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#no-distorsionar-cantidades"><i class="fa fa-check"></i><b>11.3</b> No distorsionar cantidades</a></li>
<li class="chapter" data-level="11.4" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#ordenar-categorias-por-un-valor-significativo"><i class="fa fa-check"></i><b>11.4</b> Ordenar categorías por un valor significativo</a></li>
<li class="chapter" data-level="11.5" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#mostrar-los-datos-1"><i class="fa fa-check"></i><b>11.5</b> Mostrar los datos</a></li>
<li class="chapter" data-level="11.6" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#facilita-las-comparaciones"><i class="fa fa-check"></i><b>11.6</b> Facilita las comparaciones</a><ul>
<li class="chapter" data-level="11.6.1" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#usar-ejes-comunes"><i class="fa fa-check"></i><b>11.6.1</b> Usar ejes comunes</a></li>
<li class="chapter" data-level="11.6.2" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#alinee-las-parcelas-verticalmente-para-ver-cambios-horizontales-y-horizontalmente-para-ver-cambios-verticales"><i class="fa fa-check"></i><b>11.6.2</b> Alinee las parcelas verticalmente para ver cambios horizontales y horizontalmente para ver cambios verticales</a></li>
<li class="chapter" data-level="11.6.3" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#considere-transformaciones"><i class="fa fa-check"></i><b>11.6.3</b> Considere transformaciones</a></li>
<li class="chapter" data-level="11.6.4" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#las-senales-visuales-a-comparar-deben-ser-adyacentes"><i class="fa fa-check"></i><b>11.6.4</b> Las señales visuales a comparar deben ser adyacentes</a></li>
<li class="chapter" data-level="11.6.5" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#usar-color"><i class="fa fa-check"></i><b>11.6.5</b> Usar color</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#piensa-en-el-daltonico"><i class="fa fa-check"></i><b>11.7</b> Piensa en el daltónico</a></li>
<li class="chapter" data-level="11.8" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#graficos-para-dos-variables"><i class="fa fa-check"></i><b>11.8</b> Gráficos para dos variables</a><ul>
<li class="chapter" data-level="11.8.1" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#graficos-de-pendiente"><i class="fa fa-check"></i><b>11.8.1</b> Gráficos de pendiente</a></li>
<li class="chapter" data-level="11.8.2" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#trama-de-bland-altman"><i class="fa fa-check"></i><b>11.8.2</b> Trama de Bland-Altman</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#codificacion-de-una-tercera-variable"><i class="fa fa-check"></i><b>11.9</b> Codificación de una tercera variable</a></li>
<li class="chapter" data-level="11.10" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#evite-las-tramas-pseudo-tridimensionales"><i class="fa fa-check"></i><b>11.10</b> Evite las tramas pseudo-tridimensionales</a></li>
<li class="chapter" data-level="11.11" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#evite-demasiados-digitos-significativos"><i class="fa fa-check"></i><b>11.11</b> Evite demasiados dígitos significativos</a></li>
<li class="chapter" data-level="11.12" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#conoce-a-tu-audiencia"><i class="fa fa-check"></i><b>11.12</b> Conoce a tu audiencia</a></li>
<li class="chapter" data-level="11.13" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#ejercicios-19"><i class="fa fa-check"></i><b>11.13</b> Ejercicios</a></li>
<li class="chapter" data-level="11.14" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#vaccines"><i class="fa fa-check"></i><b>11.14</b> Estudio de caso: vacunas y enfermedades infecciosas</a></li>
<li class="chapter" data-level="11.15" data-path="principios-de-visualizacion-de-datos.html"><a href="principios-de-visualizacion-de-datos.html#ejercicios-20"><i class="fa fa-check"></i><b>11.15</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="robust-summaries.html"><a href="robust-summaries.html"><i class="fa fa-check"></i><b>12</b> Resúmenes robustos</a><ul>
<li class="chapter" data-level="12.1" data-path="robust-summaries.html"><a href="robust-summaries.html#valores-atipicos"><i class="fa fa-check"></i><b>12.1</b> Valores atípicos</a></li>
<li class="chapter" data-level="12.2" data-path="robust-summaries.html"><a href="robust-summaries.html#mediana"><i class="fa fa-check"></i><b>12.2</b> Mediana</a></li>
<li class="chapter" data-level="12.3" data-path="robust-summaries.html"><a href="robust-summaries.html#el-rango-intercuartil-iqr"><i class="fa fa-check"></i><b>12.3</b> El rango intercuartil (IQR)</a></li>
<li class="chapter" data-level="12.4" data-path="robust-summaries.html"><a href="robust-summaries.html#la-definicion-de-tukey-de-un-valor-atipico"><i class="fa fa-check"></i><b>12.4</b> La definición de Tukey de un valor atípico</a></li>
<li class="chapter" data-level="12.5" data-path="robust-summaries.html"><a href="robust-summaries.html#mediana-desviacion-absoluta"><i class="fa fa-check"></i><b>12.5</b> Mediana desviación absoluta</a></li>
<li class="chapter" data-level="12.6" data-path="robust-summaries.html"><a href="robust-summaries.html#ejercicios-21"><i class="fa fa-check"></i><b>12.6</b> Ejercicios</a></li>
<li class="chapter" data-level="12.7" data-path="robust-summaries.html"><a href="robust-summaries.html#estudio-de-caso-alturas-de-estudiantes-autoinformadas"><i class="fa fa-check"></i><b>12.7</b> Estudio de caso: alturas de estudiantes autoinformadas</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a la Ciencia de Datos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2" class="section level1">
<h1><span class="header-section-number">Capítulo 8</span> ggplot2</h1>
<p>La visualización de datos exploratorios es quizás la mayor fortaleza de R. Uno puede pasar rápidamente de la idea a los datos para trazar con un equilibrio único de flexibilidad y facilidad. Por ejemplo, Excel puede ser más fácil que R para algunas parcelas, pero no es tan flexible. D3.js puede ser más flexible y poderoso que R, pero lleva mucho más tiempo generar una trama.</p>
<p>A lo largo del libro, crearemos diagramas usando el paquete <strong>ggplot2</strong><a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a>.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb262-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a></code></pre></div>
<p>Existen muchos otros enfoques para crear trazados en R. De hecho, las capacidades de trazado que vienen con una instalación básica de R ya son bastante poderosas. También hay otros paquetes para crear gráficos como __grid__y<strong>lattice</strong>. Elegimos usar <strong>ggplot2</strong> en este libro porque divide las tramas en componentes de una manera que permite a los principiantes crear tramas relativamente complejas y estéticamente agradables utilizando una sintaxis intuitiva y relativamente fácil de recordar.</p>
<p>Una razón por la que <strong>ggplot2</strong> es generalmente más intuitiva para los principiantes es porque usa una gramática de gráficos<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>, el _gg_en<strong>ggplot2</strong>. Esto es análogo a la forma en que aprender gramática puede ayudar a un principiante a construir cientos de oraciones diferentes al aprender solo un puñado de verbos, sustantivos y adjetivos sin tener que memorizar cada oración específica. Del mismo modo, al aprender un puñado de bloques de construcción <strong>ggplot2</strong> y su gramática, podrá crear cientos de tramas diferentes.</p>
<p>Otra razón por la que <strong>ggplot2</strong> es fácil para los principiantes es que su comportamiento predeterminado se elige cuidadosamente para satisfacer la gran mayoría de los casos y es visualmente agradable. Como resultado, es posible crear gráficos informativos y elegantes con un código relativamente simple y legible.</p>
<p>Una limitación es que <strong>ggplot2</strong> está diseñado para trabajar exclusivamente con tablas de datos en formato ordenado (donde las filas son observaciones y las columnas son variables). Sin embargo, un porcentaje sustancial de conjuntos de datos con los que los principiantes trabajan están en este formato o pueden convertirse a este. Una ventaja de este enfoque es que, suponiendo que nuestros datos estén ordenados, <strong>ggplot2</strong> simplifica el código de trazado y el aprendizaje de la gramática para una variedad de trazados.</p>
<p>Para usar <strong>ggplot2</strong> deberás aprender varias funciones y argumentos. Estos son difíciles de memorizar, por lo que le recomendamos que tenga a mano la hoja de trucos ggplot2. Puede obtener una copia aquí: [<a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdffont" class="uri">https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdffont</a>&gt;(<a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="uri">https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf</a>) o simplemente realice una búsqueda en Internet de “ggplot2 cheat sheet”.</p>
<div id="los-componentes-de-un-grafico" class="section level2">
<h2><span class="header-section-number">8.1</span> Los componentes de un gráfico</h2>
<p>Construiremos un gráfico que resume el conjunto de datos de asesinatos de los Estados Unidos que se ve así:</p>
<p><img src="libro_files/figure-html/ggplot-example-plot-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Podemos ver claramente cuánto varían los estados según el tamaño de la población y el número total de asesinatos. No es sorprendente que también veamos una relación clara entre los totales de asesinatos y el tamaño de la población. Un estado que cae en la línea gris discontinua tiene la misma tasa de asesinatos que el promedio de los EE. UU. Las cuatro regiones geográficas se denotan con color, que representa cómo la mayoría de los estados del sur tienen tasas de asesinatos por encima del promedio.</p>
<p>Esta visualización de datos nos muestra prácticamente toda la información en la tabla de datos. El código necesario para hacer esta trama es relativamente simple. Aprenderemos a crear la trama parte por parte.</p>
<p>El primer paso para aprender <strong>ggplot2</strong> es poder separar un gráfico en componentes. Analicemos la gráfica anterior e introduzcamos algo de la terminología <strong>ggplot2</strong>. Los tres componentes principales a tener en cuenta son:</p>
<ul>
<li><strong>Data</strong>: se está resumiendo la tabla de datos de asesinatos de Estados Unidos. Nos referimos a esto como el componente <strong>data</strong>.</li>
<li><strong>Geometría</strong>: El diagrama de arriba es un diagrama de dispersión. Esto se conoce como el
<strong>geometría</strong> componente. Otras posibles geometrías son diagrama de barras, histograma, densidades suaves, diagrama qq y diagrama de caja. Aprenderemos más sobre esto en la parte de visualización de datos del libro.</li>
<li><strong>Mapeo estético</strong>: El gráfico usa varias señales visuales para representar la información proporcionada por el conjunto de datos. Las dos señales más importantes en este gráfico son las posiciones de los puntos en el eje xy el eje y, que representan el tamaño de la población y el número total de asesinatos, respectivamente. Cada punto representa una observación diferente, y asignamos datos sobre estas observaciones a señales visuales como las escalas x e y. El color es otra señal visual que asignamos a la región. Nos referimos a esto como el componente <strong>mapeo estético</strong>. La forma en que definimos el mapeo depende de qué <strong>geometría</strong> estamos usando.</li>
</ul>
<p>También notamos que:</p>
<ul>
<li>Los puntos están etiquetados con las abreviaturas de estado.</li>
<li>El rango del eje x y el eje y parece estar definido por el rango de los datos. Ambos están en escalas logarítmicas.</li>
<li>Hay etiquetas, un título, una leyenda, y utilizamos el estilo de la revista The Economist.</li>
</ul>
<p>Ahora construiremos la trama pieza por pieza.</p>
<p>Comenzamos cargando el conjunto de datos:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb263-2" data-line-number="2"><span class="kw">data</span>(murders)</a></code></pre></div>
</div>
<div id="ggplot-objetos" class="section level2">
<h2><span class="header-section-number">8.2</span> <code>ggplot</code> objetos</h2>
<p>El primer paso para crear un gráfico <strong>ggplot2</strong> es definir un <code>ggplot</code> objeto. Hacemos esto con la función <code>ggplot</code>, que inicializa el gráfico. Si leemos el archivo de ayuda para esta función, vemos que el primer argumento se usa para especificar qué datos están asociados con este objeto:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> murders)</a></code></pre></div>
<p>También podemos canalizar los datos como primer argumento. Entonces, esta línea de código es equivalente a la anterior:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1">murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>()</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-2-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Representa un diagrama, en este caso una pizarra en blanco ya que no se ha definido geometría. La única opción de estilo que vemos es un fondo gris.</p>
<p>Lo que sucedió anteriormente es que el objeto fue creado y, debido a que no fue asignado, fue evaluado automáticamente. Pero podemos asignar nuestra trama a un objeto, por ejemplo así:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> murders)</a>
<a class="sourceLine" id="cb266-2" data-line-number="2"><span class="kw">class</span>(p)</a>
<a class="sourceLine" id="cb266-3" data-line-number="3"><span class="co">#&gt; [1] &quot;gg&quot;     &quot;ggplot&quot;</span></a></code></pre></div>
<p>Para representar el diagrama asociado con este objeto, simplemente imprimimos el objeto <code>p</code>. Las siguientes dos líneas de código producen cada una la misma gráfica que vemos arriba:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1"><span class="kw">print</span>(p)</a>
<a class="sourceLine" id="cb267-2" data-line-number="2">p</a></code></pre></div>
</div>
<div id="geometrias" class="section level2">
<h2><span class="header-section-number">8.3</span> Geometrías</h2>
<p>En <code>ggplot2</code> creamos gráficos agregando <em>layers</em>. Las capas pueden definir geometrías, calcular estadísticas de resumen, definir qué escalas usar, o incluso cambiar estilos.
Para agregar capas, usamos el símbolo <code>+</code>. En general, una línea de código se verá así:</p>
<blockquote>
<blockquote>
<p>DATOS%&gt;% <code>ggplot()</code> + CAPA 1 + CAPA 2 + … + CAPA N</p>
</blockquote>
</blockquote>
<p>Por lo general, la primera capa agregada define la geometría. Queremos hacer un diagrama de dispersión. ¿Qué geometría utilizamos?</p>
<p>Echando un vistazo rápido a la hoja de trucos, vemos que la función utilizada para crear gráficos con esta geometría es <code>geom_point</code>.</p>
<p><img src="R/img/ggplot2-cheatsheeta.png" width="45%" style="display: block; margin: auto;" /><img src="R/img/ggplot2-cheatsheetb.png" width="45%" style="display: block; margin: auto;" /></p>
<p>(Imagen cortesía de RStudio<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>. Licencia CC-BY-4.0<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a>.)</p>
<!--(Source: [RStudio](https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf))-->
<p>Los nombres de las funciones de geometría siguen el patrón: <code>geom_X</code> donde X es el nombre de la geometría. Algunos ejemplos incluyen <code>geom_point</code>, <code>geom_bar</code> y <code>geom_histogram</code>.</p>
<p>Por <code>geom_point</code> para funcionar correctamente, necesitamos proporcionar datos y un mapeo. Ya hemos conectado el objeto <code>p</code> con el <code>murders</code> tabla de datos, y si agregamos la capa <code>geom_point</code> por defecto usa estos datos. Para saber qué asignaciones se esperan, leemos la sección <strong>Estética</strong> del archivo de ayuda <code>geom_point</code> archivo de ayuda:</p>
<pre><code>&gt; Aesthetics
&gt;
&gt; geom_point understands the following aesthetics (required aesthetics are in bold):
&gt;
&gt; x
&gt;
&gt; y
&gt;
&gt; alpha
&gt;
&gt; colour</code></pre>
<p>y, como se esperaba, vemos que se requieren al menos dos argumentos <code>x</code> y <code>y</code>.</p>
</div>
<div id="mapeos-esteticos" class="section level2">
<h2><span class="header-section-number">8.4</span> Mapeos estéticos</h2>
<p><strong>Las asignaciones estéticas</strong> describen cómo las propiedades de los datos se conectan con las características del gráfico, como la distancia a lo largo de un eje, tamaño o color. los <code>aes</code> la función conecta los datos con lo que vemos en el gráfico mediante la definición de asignaciones estéticas y será una de las funciones que utilice con más frecuencia al trazar. El resultado de la <code>aes</code> la función se utiliza a menudo como argumento de una función de geometría. Este ejemplo produce un diagrama de dispersión de asesinatos totales versus población en millones:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" data-line-number="1">murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb269-2" data-line-number="2"><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, <span class="dt">y =</span> total))</a></code></pre></div>
<p>Podemos dejar caer el <code>x =</code> y <code>y =</code> si quisiéramos ya que estos son el primer y el segundo argumento esperado, como se ve en la página de ayuda.</p>
<p>En lugar de definir nuestra trama desde cero, también podemos agregar una capa al <code>p</code> objeto que se definió anteriormente como <code>p &lt;- ggplot(data = murders)</code>:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total))</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-3-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>La escala y las etiquetas se definen por defecto al agregar esta capa. Al igual que las funciones <strong>dplyr</strong>, <code>aes</code> también usa los nombres de variables del componente objeto: podemos usar <code>population</code> y <code>total</code> sin tener que llamarlos como 'asesinatos <span class="math inline">\(population` and `murders\)</span> total NA aes NA población NA total NA aes` recibes un error.</p>
</div>
<div id="capas" class="section level2">
<h2><span class="header-section-number">8.5</span> Capas</h2>
<p>Una segunda capa en el diagrama que deseamos hacer implica agregar una etiqueta a cada punto para identificar el estado. los <code>geom_label</code> y <code>geom_text</code> las funciones nos permiten agregar texto a la trama con y sin un rectángulo detrás del texto, respectivamente.</p>
<p>Debido a que cada punto (cada estado en este caso) tiene una etiqueta, necesitamos un mapeo estético para hacer la conexión entre los puntos y las etiquetas. Al leer el archivo de ayuda, aprendemos que proporcionamos el mapeo entre el punto y la etiqueta a través de <code>label</code> argumento de <code>aes</code>. Entonces el código se ve así:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total)) <span class="op">+</span></a>
<a class="sourceLine" id="cb271-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb))</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-4-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Hemos agregado con éxito una segunda capa a la trama.</p>
<p>Como ejemplo del comportamiento único de <code>aes</code> mencionado anteriormente, tenga en cuenta que esta llamada:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" data-line-number="1">p_test &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb))</a></code></pre></div>
<p>está bien, mientras que esta llamada:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1">p_test &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total), <span class="dt">label =</span> abb)</a></code></pre></div>
<p>te dará un error desde <code>abb</code> no se encuentra porque está fuera del <code>aes</code> función. La capa <code>geom_text</code> no sabe dónde encontrar <code>abb</code> ya que es un nombre de columna y no una variable global.</p>
<div id="jugueteando-con-argumentos" class="section level3">
<h3><span class="header-section-number">8.5.1</span> Jugueteando con argumentos</h3>
<p>Cada función de geometría tiene muchos argumentos distintos de <code>aes</code> y <code>data</code>. Tienden a ser específicos de la función. Por ejemplo, en la gráfica que deseamos hacer, los puntos son más grandes que el tamaño predeterminado. En el archivo de ayuda vemos que <code>size</code> es una estética y podemos cambiarla así:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total), <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb274-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb))</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-5-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><code>size</code> no es un mapeo: mientras que los mapeos usan datos de observaciones específicas y necesitan estar dentro <code>aes()</code>, las operaciones que queremos afectar a todos los puntos de la misma manera no necesitan ser incluidas dentro <code>aes</code>.</p>
<p>Ahora, debido a que los puntos son más grandes, es difícil ver las etiquetas. Si leemos el archivo de ayuda para <code>geom_text</code>, vemos el <code>nudge_x</code> argumento, que mueve el texto ligeramente hacia la derecha o hacia la izquierda:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total), <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb275-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb), <span class="dt">nudge_x =</span> <span class="fl">1.5</span>)</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-6-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Esto es preferible ya que facilita la lectura del texto. En la sección <a href="ggplot2.html#add-on-packages">8.11</a> aprendemos una mejor manera de asegurarnos de que podemos ver los puntos y las etiquetas.</p>
</div>
</div>
<div id="mapeos-esteticos-globales-versus-locales" class="section level2">
<h2><span class="header-section-number">8.6</span> Mapeos estéticos globales versus locales</h2>
<p>En la línea de código anterior, definimos el mapeo <code>aes(population/10^6, total)</code> dos veces, una vez en cada geometría. Podemos evitar esto usando un mapeo estético global. Podemos hacer esto cuando definimos la pizarra en blanco <code>ggplot</code> objeto. Recuerda que la función <code>ggplot</code> contiene un argumento que nos permite definir asignaciones estéticas:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1"><span class="kw">args</span>(ggplot)</a>
<a class="sourceLine" id="cb276-2" data-line-number="2"><span class="co">#&gt; function (data = NULL, mapping = aes(), ..., environment = parent.frame()) </span></a>
<a class="sourceLine" id="cb276-3" data-line-number="3"><span class="co">#&gt; NULL</span></a></code></pre></div>
<p>Si definimos un mapeo en <code>ggplot</code>, todas las geometrías que se agregan como capas se asignarán de manera predeterminada a esta asignación. Redefinimos <code>p</code>:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1">p &lt;-<span class="st"> </span>murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb))</a></code></pre></div>
<p>y luego podemos simplemente escribir el siguiente código para producir el diagrama anterior:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb278-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="dt">nudge_x =</span> <span class="fl">1.5</span>)</a></code></pre></div>
<p>Mantenemos el <code>size</code> y <code>nudge_x</code> argumentos en <code>geom_point</code> y <code>geom_text</code>, respectivamente, porque solo queremos aumentar el tamaño de los puntos y solo empujar las etiquetas. Si ponemos esos argumentos en <code>aes</code> entonces se aplicarían a ambas parcelas. También tenga en cuenta que el <code>geom_point</code> la función no necesita un <code>label</code> argumento y por lo tanto ignora esa estética.</p>
<p>Si es necesario, podemos anular la asignación global definiendo una nueva asignación dentro de cada capa. Estas definiciones locales reemplazan a las globales. Aquí hay un ejemplo:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb279-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="dv">10</span>, <span class="dt">y =</span> <span class="dv">800</span>, <span class="dt">label =</span> <span class="st">&quot;Hello there!&quot;</span>))</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-8-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Claramente, la segunda llamada a <code>geom_text</code> no se usa <code>population</code> y <code>total</code>.</p>
</div>
<div id="escamas" class="section level2">
<h2><span class="header-section-number">8.7</span> Escamas</h2>
<p>Primero, nuestras escalas deseadas están en escala logarítmica. Este no es el valor predeterminado, por lo que este cambio debe agregarse a través de una capa <em>escalas</em>. Un vistazo rápido a la hoja de trucos revela la <code>scale_x_continuous</code> la función nos permite controlar el comportamiento de las escalas. Los usamos así:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb280-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="dt">nudge_x =</span> <span class="fl">0.05</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb280-3" data-line-number="3"><span class="kw">scale_x_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log10&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb280-4" data-line-number="4"><span class="kw">scale_y_continuous</span>(<span class="dt">trans =</span> <span class="st">&quot;log10&quot;</span>)</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-9-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Debido a que ahora estamos en la escala logarítmica, el <em>nudge</em> debe hacerse más pequeño.</p>
<p>Esta transformación particular es tan común que <strong>ggplot2</strong> proporciona las funciones especializadas. <code>scale_x_log10</code> y <code>scale_y_log10</code>, que podemos usar para reescribir el código de esta manera:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb281-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="dt">nudge_x =</span> <span class="fl">0.05</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb281-3" data-line-number="3"><span class="kw">scale_x_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb281-4" data-line-number="4"><span class="kw">scale_y_log10</span>()</a></code></pre></div>
</div>
<div id="etiquetas-y-titulos" class="section level2">
<h2><span class="header-section-number">8.8</span> Etiquetas y títulos</h2>
<p>Del mismo modo, la hoja de trucos revela rápidamente que para cambiar las etiquetas y agregar un título, utilizamos las siguientes funciones:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb282-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="dt">nudge_x =</span> <span class="fl">0.05</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb282-3" data-line-number="3"><span class="kw">scale_x_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb282-4" data-line-number="4"><span class="kw">scale_y_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb282-5" data-line-number="5"><span class="kw">xlab</span>(<span class="st">&quot;Populations in millions (log scale)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb282-6" data-line-number="6"><span class="kw">ylab</span>(<span class="st">&quot;Total number of murders (log scale)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb282-7" data-line-number="7"><span class="kw">ggtitle</span>(<span class="st">&quot;US Gun Murders in 2010&quot;</span>)</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-10-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>¡Estamos casi alli! Todo lo que nos queda por hacer es agregar color, una leyenda y cambios opcionales al estilo.</p>
</div>
<div id="categorias-como-colores" class="section level2">
<h2><span class="header-section-number">8.9</span> Categorías como colores</h2>
<p>Podemos cambiar el color de los puntos usando el <code>col</code> argumento en el <code>geom_point</code> función. Para facilitar la demostración de nuevas características, redefiniremos <code>p</code> para ser todo excepto la capa de puntos:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" data-line-number="1">p &lt;-<span class="st"> </span>murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb)) <span class="op">+</span></a>
<a class="sourceLine" id="cb283-2" data-line-number="2"><span class="kw">geom_text</span>(<span class="dt">nudge_x =</span> <span class="fl">0.05</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb283-3" data-line-number="3"><span class="kw">scale_x_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb283-4" data-line-number="4"><span class="kw">scale_y_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb283-5" data-line-number="5"><span class="kw">xlab</span>(<span class="st">&quot;Populations in millions (log scale)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb283-6" data-line-number="6"><span class="kw">ylab</span>(<span class="st">&quot;Total number of murders (log scale)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb283-7" data-line-number="7"><span class="kw">ggtitle</span>(<span class="st">&quot;US Gun Murders in 2010&quot;</span>)</a></code></pre></div>
<p>y luego pruebe lo que sucede agregando diferentes llamadas a <code>geom_point</code>. Podemos hacer que todos los puntos sean azules agregando el <code>color</code> argumento:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">color =</span><span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-11-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Esto, por supuesto, no es lo que queremos. Queremos asignar color según la región geográfica. Un buen comportamiento predeterminado de <strong>ggplot2</strong> es que si asignamos una variable categórica al color, automáticamente asigna un color diferente a cada categoría y también agrega una leyenda.</p>
<p>Dado que la elección del color está determinada por una característica de cada observación, este es un mapeo estético. Para asignar cada punto a un color, necesitamos usar <code>aes</code>. Usamos el siguiente código:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>region), <span class="dt">size =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-12-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Los <code>x</code> y <code>y</code> las asignaciones se heredan de las ya definidas en <code>p</code>, por lo que no los redefinimos. También nos movemos <code>aes</code> al primer argumento, ya que es donde se esperan asignaciones en esta llamada de función.</p>
<p>Aquí vemos otro comportamiento útil por defecto: <strong>ggplot2</strong> agrega automáticamente una leyenda que asigna el color a la región. Para evitar agregar esta leyenda, establecemos el <code>geom_point</code> argumento <code>show.legend = FALSE</code>.</p>
</div>
<div id="anotacion-formas-y-ajustes" class="section level2">
<h2><span class="header-section-number">8.10</span> Anotación, formas y ajustes</h2>
<p>A menudo queremos agregar formas o anotaciones a las figuras que no se derivan directamente del mapeo estético; Los ejemplos incluyen etiquetas, cuadros, áreas sombreadas y líneas.</p>
<p>Aquí queremos agregar una línea que represente la tasa promedio de asesinatos en todo el país. Una vez que determinamos la tasa por millón a ser <span class="math inline">\(r\)</span>, esta línea está definida por la fórmula: <span class="math inline">\(y = r x\)</span>, con <span class="math inline">\(y\)</span> y <span class="math inline">\(x\)</span> nuestros ejes: asesinatos totales y población en millones, respectivamente. En la escala de registro, esta línea se convierte en: <span class="math inline">\(\log(y) = \log(r) + \log(x)\)</span>. Entonces, en nuestra gráfica, es una línea con pendiente 1 e intercepción <span class="math inline">\(\log(r)\)</span>. Para calcular este valor, utilizamos nuestras habilidades <strong>dplyr</strong>:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb286-1" data-line-number="1">r &lt;-<span class="st"> </span>murders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb286-2" data-line-number="2"><span class="kw">summarize</span>(<span class="dt">rate =</span> <span class="kw">sum</span>(total)<span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(population) <span class="op">*</span><span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb286-3" data-line-number="3"><span class="kw">pull</span>(rate)</a></code></pre></div>
<p>Para agregar una línea usamos el <code>geom_abline</code> función. <strong>ggplot2</strong> utiliza <code>ab</code> en el nombre para recordarnos que estamos suministrando la intercepción ( <code>a</code>) y pendiente ( <code>b</code>) La línea predeterminada tiene pendiente 1 e intersección 0, por lo que solo tenemos que definir la intersección:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>region), <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb287-2" data-line-number="2"><span class="kw">geom_abline</span>(<span class="dt">intercept =</span> <span class="kw">log10</span>(r))</a></code></pre></div>
<p><img src="libro_files/figure-html/ggplot-example-13-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Aquí <code>geom_abline</code> no utiliza ninguna información del objeto de datos.</p>
<p>Podemos cambiar el tipo de línea y el color de las líneas usando argumentos. Además, lo dibujamos primero para que no exceda nuestros puntos.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb288-1" data-line-number="1">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_abline</span>(<span class="dt">intercept =</span> <span class="kw">log10</span>(r), <span class="dt">lty =</span> <span class="dv">2</span>, <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb288-2" data-line-number="2"><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>region), <span class="dt">size =</span> <span class="dv">3</span>)</a></code></pre></div>
<p>Tenga en cuenta que hemos redefinido <code>p</code> y usé este nuevo <code>p</code> a continuación y en la siguiente sección.</p>
<p>Los gráficos predeterminados creados por <strong>ggplot2</strong> ya son muy útiles. Sin embargo, con frecuencia necesitamos hacer pequeños ajustes al comportamiento predeterminado. Aunque no siempre es obvio cómo hacer esto incluso con la hoja de trucos, <strong>ggplot2</strong> es muy flexible.</p>
<p>Por ejemplo, podemos hacer cambios a la leyenda a través de <code>scale_color_discrete</code> función. En nuestra trama, la palabra <em>región</em> está en mayúscula y podemos cambiarla así:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" data-line-number="1">p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Region&quot;</span>)</a></code></pre></div>
</div>
<div id="add-on-packages" class="section level2">
<h2><span class="header-section-number">8.11</span> Paquetes complementarios</h2>
<p>El poder de <strong>ggplot2</strong> se incrementa aún más debido a la disponibilidad de paquetes adicionales.
Los cambios restantes necesarios para dar los toques finales a nuestra trama requieren los paquetes __ggthemes__y<strong>ggrepel</strong>.</p>
<p>El estilo de un gráfico <strong>ggplot2</strong> se puede cambiar usando el <code>theme</code> funciones Se incluyen varios temas como parte del paquete <strong>ggplot2</strong>. De hecho, para la mayoría de las tramas de este libro, utilizamos una función en el paquete <strong>dslabs</strong> que establece automáticamente un tema predeterminado:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" data-line-number="1"><span class="kw">ds_theme_set</span>()</a></code></pre></div>
<p>El paquete <strong>ggthemes</strong> agrega muchos otros temas. Entre esos están los <code>theme_economist</code> tema que utilizamos. Después de instalar el paquete, puede cambiar el estilo agregando una capa como esta:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" data-line-number="1"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb291-2" data-line-number="2">p <span class="op">+</span><span class="st"> </span><span class="kw">theme_economist</span>()</a></code></pre></div>
<p>Puede ver cómo se ven algunos de los otros temas simplemente cambiando la función. Por ejemplo, puedes probar el <code>theme_fivethirtyeight()</code> tema en su lugar.</p>
<p>La diferencia final tiene que ver con la posición de las etiquetas. En nuestra trama, algunas de las etiquetas se superponen. El paquete de complementos <strong>ggrepel</strong> incluye una geometría que agrega etiquetas a la vez que garantiza que no se superpongan entre sí. Simplemente cambiamos <code>geom_text</code> con <code>geom_text_repel</code>.</p>
</div>
<div id="poniendolo-todo-junto" class="section level2">
<h2><span class="header-section-number">8.12</span> Poniendolo todo junto</h2>
<p>Ahora que hemos terminado las pruebas, podemos escribir un código que produzca nuestro diagrama deseado desde cero.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb292-1" data-line-number="1"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb292-2" data-line-number="2"><span class="kw">library</span>(ggrepel)</a>
<a class="sourceLine" id="cb292-3" data-line-number="3"></a>
<a class="sourceLine" id="cb292-4" data-line-number="4">r &lt;-<span class="st"> </span>murders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb292-5" data-line-number="5"><span class="kw">summarize</span>(<span class="dt">rate =</span> <span class="kw">sum</span>(total)<span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(population) <span class="op">*</span><span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb292-6" data-line-number="6"><span class="kw">pull</span>(rate)</a>
<a class="sourceLine" id="cb292-7" data-line-number="7"></a>
<a class="sourceLine" id="cb292-8" data-line-number="8">murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(population<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, total, <span class="dt">label =</span> abb)) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-9" data-line-number="9"><span class="kw">geom_abline</span>(<span class="dt">intercept =</span> <span class="kw">log10</span>(r), <span class="dt">lty =</span> <span class="dv">2</span>, <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-10" data-line-number="10"><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>region), <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-11" data-line-number="11"><span class="kw">geom_text_repel</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb292-12" data-line-number="12"><span class="kw">scale_x_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb292-13" data-line-number="13"><span class="kw">scale_y_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb292-14" data-line-number="14"><span class="kw">xlab</span>(<span class="st">&quot;Populations in millions (log scale)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-15" data-line-number="15"><span class="kw">ylab</span>(<span class="st">&quot;Total number of murders (log scale)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-16" data-line-number="16"><span class="kw">ggtitle</span>(<span class="st">&quot;US Gun Murders in 2010&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-17" data-line-number="17"><span class="kw">scale_color_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Region&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb292-18" data-line-number="18"><span class="kw">theme_economist</span>()</a></code></pre></div>
<p><img src="libro_files/figure-html/final-ggplot-example-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="qplot" class="section level2">
<h2><span class="header-section-number">8.13</span> Trazados rápidos con <code>qplot</code></h2>
<p>Hemos aprendido el poderoso enfoque para generar visualización con ggplot. Sin embargo, hay casos en los que todo lo que queremos es hacer un diagrama rápido de, por ejemplo, un histograma de los valores en un vector, un diagrama de dispersión de los valores en dos vectores o un diagrama de caja usando vectores categóricos y numéricos. Demostramos cómo generar estas parcelas con <code>hist</code>, <code>plot</code> y <code>boxplot</code>. Sin embargo, si queremos mantener la coherencia con el estilo ggplot, podemos usar la función <code>qplot</code>.</p>
<p>Si tenemos valores en dos vectores, digamos:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb293-1" data-line-number="1"><span class="kw">data</span>(murders)</a>
<a class="sourceLine" id="cb293-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">log10</span>(murders<span class="op">$</span>population)</a>
<a class="sourceLine" id="cb293-3" data-line-number="3">y &lt;-<span class="st"> </span>murders<span class="op">$</span>total</a></code></pre></div>
<p>y queremos hacer un diagrama de dispersión con ggplot, tendríamos que escribir algo como:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb294-1" data-line-number="1"><span class="kw">data.frame</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb294-2" data-line-number="2"><span class="kw">ggplot</span>(<span class="kw">aes</span>(x, y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb294-3" data-line-number="3"><span class="kw">geom_point</span>()</a></code></pre></div>
<p>Esto parece demasiado código para una trama tan simple.
Los <code>qplot</code> la función sacrifica la flexibilidad proporcionada por el <code>ggplot</code> enfoque, pero nos permite generar una trama rápidamente.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb295-1" data-line-number="1"><span class="kw">qplot</span>(x, y)</a></code></pre></div>
<p>Aprenderemos más sobre <code>qplot</code> en la sección <a href="distributions.html#other-geometries">9.16</a></p>
</div>
<div id="cuadriculas-de-parcelas" class="section level2">
<h2><span class="header-section-number">8.14</span> Cuadrículas de parcelas</h2>
<p>A menudo hay razones para graficar parcelas una al lado de la otra. El paquete <strong>gridExtra</strong> nos permite hacer eso:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb296-1" data-line-number="1"><span class="kw">library</span>(gridExtra)</a>
<a class="sourceLine" id="cb296-2" data-line-number="2">p1 &lt;-<span class="st"> </span><span class="kw">qplot</span>(x)</a>
<a class="sourceLine" id="cb296-3" data-line-number="3">p2 &lt;-<span class="st"> </span><span class="kw">qplot</span>(x,y)</a>
<a class="sourceLine" id="cb296-4" data-line-number="4"><span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="libro_files/figure-html/gridExtra-example-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="ejercicios-15" class="section level2">
<h2><span class="header-section-number">8.15</span> Ejercicios</h2>
<p>Comience cargando la biblioteca __dplyr__y<strong>ggplot2</strong>, así como la biblioteca <code>murders</code> y <code>heights</code> datos.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb297-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb297-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb297-3" data-line-number="3"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb297-4" data-line-number="4"><span class="kw">data</span>(heights)</a>
<a class="sourceLine" id="cb297-5" data-line-number="5"><span class="kw">data</span>(murders)</a></code></pre></div>
<p>1. Con <strong>ggplot2</strong> las parcelas se pueden guardar como objetos. Por ejemplo, podemos asociar un conjunto de datos con un objeto de trazado como este</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb298-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> murders)</a></code></pre></div>
<p>Porque <code>data</code> es el primer argumento que no necesitamos explicarlo</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb299-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(murders)</a></code></pre></div>
<p>y también podemos usar la tubería:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" data-line-number="1">p &lt;-<span class="st"> </span>murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>()</a></code></pre></div>
<p>¿Qué es la clase del objeto? <code>p</code>?</p>
<p>2. Recuerde que para imprimir un objeto puede usar el comando <code>print</code> o simplemente escriba el objeto.
Imprime el objeto <code>p</code> definido en el ejercicio uno y describe lo que ves.</p>
<ol style="list-style-type: lower-alpha">
<li>No pasa nada.
si. Una trama de pizarra en blanco.</li>
<li>Un diagrama de dispersión.
re. Un histograma</li>
</ol>
<p>3. Usando la tubería <code>%&gt;%</code>, crea un objeto <code>p</code> pero esta vez asociado con el <code>heights</code> conjunto de datos en lugar de <code>murders</code> conjunto de datos</p>
<p>4. ¿Cuál es la clase del objeto? <code>p</code> acabas de crear?</p>
<p>5. Ahora vamos a agregar una capa y las asignaciones estéticas correspondientes. Para los datos de asesinatos, graficamos asesinatos totales versus tamaños de población. Explorar el <code>murders</code> marco de datos para recordar cuáles son los nombres de estas dos variables y seleccionar la respuesta correcta. <strong>Sugerencia</strong>: Mira <code>?murders</code>.</p>
<ol style="list-style-type: lower-alpha">
<li><code>state</code> y <code>abb</code>.
si. <code>total_murders</code> y <code>population_size</code>.</li>
<li><code>total</code> y <code>population</code>.
re. <code>murders</code> y <code>size</code>.</li>
</ol>
<p>6. Para crear el diagrama de dispersión, agregamos una capa con <code>geom_point</code>. Las asignaciones estéticas requieren que definamos las variables del eje x y del eje y, respectivamente. Entonces el código se ve así:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" data-line-number="1">murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> , <span class="dt">y =</span> )) <span class="op">+</span></a>
<a class="sourceLine" id="cb301-2" data-line-number="2"><span class="kw">geom_point</span>()</a></code></pre></div>
<p>excepto que tenemos que definir las dos variables <code>x</code> y <code>y</code>. Rellene esto con los nombres correctos de las variables.</p>
<p>7. Tenga en cuenta que si no usamos nombres de argumentos, podemos obtener la misma gráfica asegurándonos de ingresar los nombres de las variables en el orden correcto de esta manera:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb302-1" data-line-number="1">murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(population, total)) <span class="op">+</span></a>
<a class="sourceLine" id="cb302-2" data-line-number="2"><span class="kw">geom_point</span>()</a></code></pre></div>
<p>Vuelva a hacer la gráfica pero ahora con total en el eje xy población en el eje y.</p>
<p>8. Si en lugar de puntos queremos agregar texto, podemos usar el <code>geom_text()</code> o <code>geom_label()</code> geometrías El siguiente código</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" data-line-number="1">murders <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(population, total)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_label</span>()</a></code></pre></div>
<p>nos dará el mensaje de error: <code>Error: geom_label requires the following missing aesthetics: label</code></p>
<p>¿Por qué es esto?</p>
<ol style="list-style-type: lower-alpha">
<li>Necesitamos mapear un personaje a cada punto a través del argumento de etiqueta en aes.
si. Necesitamos dejar <code>geom_label</code> saber qué personaje usar en la trama.</li>
<li>los <code>geom_label</code> la geometría no requiere valores del eje x y del eje y.
re. <code>geom_label</code> no es un comando ggplot2.</li>
</ol>
<p>9. Vuelva a escribir el código anterior a la abreviatura como la etiqueta a través de <code>aes</code></p>
<p>10. Cambia el color de las etiquetas a azul. ¿Como haremos esto?</p>
<ol style="list-style-type: lower-alpha">
<li>Agregar una columna llamada <code>blue</code> a <code>murders</code>.
si. Debido a que cada etiqueta necesita un color diferente, mapeamos los colores a través de <code>aes</code>.</li>
<li>Utilizar el <code>color</code> argumento en <code>ggplot</code>.
re. Como queremos que todos los colores sean azules, no necesitamos asignar colores, solo use el argumento de color en <code>geom_label</code>.</li>
</ol>
<p>11. Reescribe el código de arriba para que las etiquetas sean azules.</p>
<p>12. Ahora supongamos que queremos usar el color para representar las diferentes regiones. En este caso, cuál de los siguientes es el más apropiado:</p>
<ol style="list-style-type: lower-alpha">
<li>Agregar una columna llamada <code>color</code> a <code>murders</code> con el color que queremos usar.
si. Debido a que cada etiqueta necesita un color diferente, mapeamos los colores a través del argumento de color de <code>aes</code> .</li>
<li>Utilizar el <code>color</code> argumento en <code>ggplot</code>.
re. Como queremos que todos los colores sean azules, no necesitamos asignar colores, solo use el argumento de color en <code>geom_label</code>.</li>
</ol>
<p>13. Vuelva a escribir el código anterior para que el color de las etiquetas esté determinado por la región del estado.</p>
<p>14. Ahora vamos a cambiar el eje x a una escala logarítmica para tener en cuenta el hecho de que la distribución de la población está sesgada. Comencemos definiendo un objeto <code>p</code> sosteniendo la trama que hemos hecho hasta ahora</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb304-1" data-line-number="1">p &lt;-<span class="st"> </span>murders <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb304-2" data-line-number="2"><span class="kw">ggplot</span>(<span class="kw">aes</span>(population, total, <span class="dt">label =</span> abb, <span class="dt">color =</span> region)) <span class="op">+</span></a>
<a class="sourceLine" id="cb304-3" data-line-number="3"><span class="kw">geom_label</span>()</a></code></pre></div>
<p>Para cambiar el eje y a una escala logarítmica, aprendimos sobre el <code>scale_x_log10()</code> función. Agregue esta capa al objeto <code>p</code> para cambiar la escala y renderizar la trama.</p>
<p>15. Repita el ejercicio anterior pero ahora cambie ambos ejes para que estén en la escala logarítmica.</p>
<p>Dieciséis. Ahora edite el código anterior para agregar el título “Datos de asesinatos de armas” al argumento. Sugerencia: use el <code>ggtitle</code> función.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="25">
<li id="fn25"><p><a href="https://ggplot2.tidyverse.org/" class="uri">https://ggplot2.tidyverse.org/</a><a href="ggplot2.html#fnref25" class="footnote-back">↩</a></p></li>
<li id="fn26"><p><a href="http://www.springer.com/us/book/9780387245447" class="uri">http://www.springer.com/us/book/9780387245447</a><a href="ggplot2.html#fnref26" class="footnote-back">↩</a></p></li>
<li id="fn27"><p><a href="https://github.com/rstudio/cheatsheets" class="uri">https://github.com/rstudio/cheatsheets</a><a href="ggplot2.html#fnref27" class="footnote-back">↩</a></p></li>
<li id="fn28"><p><a href="https://github.com/rstudio/cheatsheets/blob/master/LICENSE" class="uri">https://github.com/rstudio/cheatsheets/blob/master/LICENSE</a><a href="ggplot2.html#fnref28" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduccion-a-la-visualizacion-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="distributions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rafalab/dslibro/edit/master/dataviz/ggplot2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
