<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 24 Procesamiento de cadenas | Introducción a la ciencia de datos</title>
  <meta name="description" content="Este libro presenta conceptos y destrezas que les ayudarán abordar los retos de situaciones actuales del análisis de datos. Cubre conceptos de probabilidad, inferencia estadística, regresión lineal y machine learning. Además, les permitirá desarrollar destrezas como la programación R, el wrangling de datos con dplyr, la visualización de datos con ggplot2, la organización de archivos con Shell de UNIX / Linux, el control de versiones con GitHub y la preparación de documentos reproducibles con R markdown." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 24 Procesamiento de cadenas | Introducción a la ciencia de datos" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro presenta conceptos y destrezas que les ayudarán abordar los retos de situaciones actuales del análisis de datos. Cubre conceptos de probabilidad, inferencia estadística, regresión lineal y machine learning. Además, les permitirá desarrollar destrezas como la programación R, el wrangling de datos con dplyr, la visualización de datos con ggplot2, la organización de archivos con Shell de UNIX / Linux, el control de versiones con GitHub y la preparación de documentos reproducibles con R markdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 24 Procesamiento de cadenas | Introducción a la ciencia de datos" />
  
  <meta name="twitter:description" content="Este libro presenta conceptos y destrezas que les ayudarán abordar los retos de situaciones actuales del análisis de datos. Cubre conceptos de probabilidad, inferencia estadística, regresión lineal y machine learning. Además, les permitirá desarrollar destrezas como la programación R, el wrangling de datos con dplyr, la visualización de datos con ggplot2, la organización de archivos con Shell de UNIX / Linux, el control de versiones con GitHub y la preparación de documentos reproducibles con R markdown." />
  

<meta name="author" content="Rafael A. Irizarry" />


<meta name="date" content="2021-07-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="extracción-de-la-web.html"/>
<link rel="next" href="cómo-leer-y-procesar-fechas-y-horas.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introducción a la Ciencia de Datos</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a></li>
<li class="chapter" data-level="" data-path="agradecimientos.html"><a href="agradecimientos.html"><i class="fa fa-check"></i>Agradecimientos</a></li>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i>Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#los-casos-de-estudio"><i class="fa fa-check"></i>Los casos de estudio</a></li>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#quién-encontrará-útil-este-libro"><i class="fa fa-check"></i>¿Quién encontrará útil este libro?</a></li>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#que-cubre-este-libro"><i class="fa fa-check"></i>¿Que cubre este libro?</a></li>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#qué-no-cubre-este-libro"><i class="fa fa-check"></i>¿Qué no cubre este libro?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Comenzando con R y RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#por-qué-r"><i class="fa fa-check"></i><b>1.1</b> ¿Por qué R?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#la-consola-r"><i class="fa fa-check"></i><b>1.2</b> La consola R</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#scripts"><i class="fa fa-check"></i><b>1.3</b> <em>Scripts</em></a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>1.4</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="getting-started.html"><a href="getting-started.html#paneles"><i class="fa fa-check"></i><b>1.4.1</b> Paneles</a></li>
<li class="chapter" data-level="1.4.2" data-path="getting-started.html"><a href="getting-started.html#atajos-de-teclado"><i class="fa fa-check"></i><b>1.4.2</b> Atajos de teclado</a></li>
<li class="chapter" data-level="1.4.3" data-path="getting-started.html"><a href="getting-started.html#cómo-ejecutar-comandos-mientras-editan-scripts"><i class="fa fa-check"></i><b>1.4.3</b> Cómo ejecutar comandos mientras editan <em>scripts</em></a></li>
<li class="chapter" data-level="1.4.4" data-path="getting-started.html"><a href="getting-started.html#cómo-cambiar-las-opciones-globales"><i class="fa fa-check"></i><b>1.4.4</b> Cómo cambiar las opciones globales</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#instalación-de-paquetes-de-r"><i class="fa fa-check"></i><b>1.5</b> Instalación de paquetes de R</a></li>
</ul></li>
<li class="part"><span><b>I R</b></span></li>
<li class="chapter" data-level="2" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2</b> Lo básico de R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-basics.html"><a href="r-basics.html#caso-de-estudio-los-asesinatos-con-armas-en-ee.-uu."><i class="fa fa-check"></i><b>2.1</b> Caso de estudio: los asesinatos con armas en EE. UU.</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics.html"><a href="r-basics.html#lo-básico"><i class="fa fa-check"></i><b>2.2</b> Lo básico</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-basics.html"><a href="r-basics.html#objetos"><i class="fa fa-check"></i><b>2.2.1</b> Objetos</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-basics.html"><a href="r-basics.html#el-espacio-de-trabajo"><i class="fa fa-check"></i><b>2.2.2</b> El espacio de trabajo</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-basics.html"><a href="r-basics.html#funciones"><i class="fa fa-check"></i><b>2.2.3</b> Funciones</a></li>
<li class="chapter" data-level="2.2.4" data-path="r-basics.html"><a href="r-basics.html#otros-objetos-predefinidos"><i class="fa fa-check"></i><b>2.2.4</b> Otros objetos predefinidos</a></li>
<li class="chapter" data-level="2.2.5" data-path="r-basics.html"><a href="r-basics.html#nombres-de-variables"><i class="fa fa-check"></i><b>2.2.5</b> Nombres de variables</a></li>
<li class="chapter" data-level="2.2.6" data-path="r-basics.html"><a href="r-basics.html#cómo-guardar-su-espacio-de-trabajo"><i class="fa fa-check"></i><b>2.2.6</b> Cómo guardar su espacio de trabajo</a></li>
<li class="chapter" data-level="2.2.7" data-path="r-basics.html"><a href="r-basics.html#scripts-motivantes"><i class="fa fa-check"></i><b>2.2.7</b> <em>Scripts</em> motivantes</a></li>
<li class="chapter" data-level="2.2.8" data-path="r-basics.html"><a href="r-basics.html#cómo-comentar-su-código"><i class="fa fa-check"></i><b>2.2.8</b> Cómo comentar su código</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html#ejercicios"><i class="fa fa-check"></i><b>2.3</b> Ejercicios</a></li>
<li class="chapter" data-level="2.4" data-path="r-basics.html"><a href="r-basics.html#tipos-de-datos"><i class="fa fa-check"></i><b>2.4</b> Tipos de datos</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="r-basics.html"><a href="r-basics.html#data-frames"><i class="fa fa-check"></i><b>2.4.1</b> <em>Data frames</em></a></li>
<li class="chapter" data-level="2.4.2" data-path="r-basics.html"><a href="r-basics.html#cómo-examinar-un-objeto"><i class="fa fa-check"></i><b>2.4.2</b> Cómo examinar un objeto</a></li>
<li class="chapter" data-level="2.4.3" data-path="r-basics.html"><a href="r-basics.html#el-operador-de-acceso"><i class="fa fa-check"></i><b>2.4.3</b> El operador de acceso: <code>$</code></a></li>
<li class="chapter" data-level="2.4.4" data-path="r-basics.html"><a href="r-basics.html#vectores-numéricos-de-caracteres-y-lógicos"><i class="fa fa-check"></i><b>2.4.4</b> Vectores: numéricos, de caracteres y lógicos</a></li>
<li class="chapter" data-level="2.4.5" data-path="r-basics.html"><a href="r-basics.html#factors"><i class="fa fa-check"></i><b>2.4.5</b> Factores</a></li>
<li class="chapter" data-level="2.4.6" data-path="r-basics.html"><a href="r-basics.html#listas"><i class="fa fa-check"></i><b>2.4.6</b> Listas</a></li>
<li class="chapter" data-level="2.4.7" data-path="r-basics.html"><a href="r-basics.html#matrices"><i class="fa fa-check"></i><b>2.4.7</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r-basics.html"><a href="r-basics.html#ejercicios-1"><i class="fa fa-check"></i><b>2.5</b> Ejercicios</a></li>
<li class="chapter" data-level="2.6" data-path="r-basics.html"><a href="r-basics.html#vectors"><i class="fa fa-check"></i><b>2.6</b> Vectores</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r-basics.html"><a href="r-basics.html#cómo-crear-vectores"><i class="fa fa-check"></i><b>2.6.1</b> Cómo crear vectores</a></li>
<li class="chapter" data-level="2.6.2" data-path="r-basics.html"><a href="r-basics.html#nombres"><i class="fa fa-check"></i><b>2.6.2</b> Nombres</a></li>
<li class="chapter" data-level="2.6.3" data-path="r-basics.html"><a href="r-basics.html#secuencias"><i class="fa fa-check"></i><b>2.6.3</b> Secuencias</a></li>
<li class="chapter" data-level="2.6.4" data-path="r-basics.html"><a href="r-basics.html#cómo-crear-un-subconjunto"><i class="fa fa-check"></i><b>2.6.4</b> Cómo crear un subconjunto</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r-basics.html"><a href="r-basics.html#la-conversión-forzada"><i class="fa fa-check"></i><b>2.7</b> La conversión forzada</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r-basics.html"><a href="r-basics.html#not-available-na"><i class="fa fa-check"></i><b>2.7.1</b> <em>Not available</em> (NA)</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="r-basics.html"><a href="r-basics.html#ejercicios-2"><i class="fa fa-check"></i><b>2.8</b> Ejercicios</a></li>
<li class="chapter" data-level="2.9" data-path="r-basics.html"><a href="r-basics.html#sorting"><i class="fa fa-check"></i><b>2.9</b> <em>Sorting</em></a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="r-basics.html"><a href="r-basics.html#sort"><i class="fa fa-check"></i><b>2.9.1</b> <code>sort</code></a></li>
<li class="chapter" data-level="2.9.2" data-path="r-basics.html"><a href="r-basics.html#order"><i class="fa fa-check"></i><b>2.9.2</b> <code>order</code></a></li>
<li class="chapter" data-level="2.9.3" data-path="r-basics.html"><a href="r-basics.html#max-y-which.max"><i class="fa fa-check"></i><b>2.9.3</b> <code>max</code> y <code>which.max</code></a></li>
<li class="chapter" data-level="2.9.4" data-path="r-basics.html"><a href="r-basics.html#rank"><i class="fa fa-check"></i><b>2.9.4</b> <code>rank</code></a></li>
<li class="chapter" data-level="2.9.5" data-path="r-basics.html"><a href="r-basics.html#cuidado-con-el-reciclaje"><i class="fa fa-check"></i><b>2.9.5</b> Cuidado con el reciclaje</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="r-basics.html"><a href="r-basics.html#ejercicios-3"><i class="fa fa-check"></i><b>2.10</b> Ejercicios</a></li>
<li class="chapter" data-level="2.11" data-path="r-basics.html"><a href="r-basics.html#aritmética-de-vectores"><i class="fa fa-check"></i><b>2.11</b> Aritmética de vectores</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="r-basics.html"><a href="r-basics.html#rescaling-un-vector"><i class="fa fa-check"></i><b>2.11.1</b> <em>Rescaling</em> un vector</a></li>
<li class="chapter" data-level="2.11.2" data-path="r-basics.html"><a href="r-basics.html#dos-vectores"><i class="fa fa-check"></i><b>2.11.2</b> Dos vectores</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="r-basics.html"><a href="r-basics.html#ejercicios-4"><i class="fa fa-check"></i><b>2.12</b> Ejercicios</a></li>
<li class="chapter" data-level="2.13" data-path="r-basics.html"><a href="r-basics.html#indexación"><i class="fa fa-check"></i><b>2.13</b> Indexación</a>
<ul>
<li class="chapter" data-level="2.13.1" data-path="r-basics.html"><a href="r-basics.html#cómo-crear-subconjuntos-con-lógicos"><i class="fa fa-check"></i><b>2.13.1</b> Cómo crear subconjuntos con lógicos</a></li>
<li class="chapter" data-level="2.13.2" data-path="r-basics.html"><a href="r-basics.html#operadores-lógicos"><i class="fa fa-check"></i><b>2.13.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="2.13.3" data-path="r-basics.html"><a href="r-basics.html#which"><i class="fa fa-check"></i><b>2.13.3</b> <code>which</code></a></li>
<li class="chapter" data-level="2.13.4" data-path="r-basics.html"><a href="r-basics.html#match"><i class="fa fa-check"></i><b>2.13.4</b> <code>match</code></a></li>
<li class="chapter" data-level="2.13.5" data-path="r-basics.html"><a href="r-basics.html#in"><i class="fa fa-check"></i><b>2.13.5</b> <code>%in%</code></a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="r-basics.html"><a href="r-basics.html#ejercicios-5"><i class="fa fa-check"></i><b>2.14</b> Ejercicios</a></li>
<li class="chapter" data-level="2.15" data-path="r-basics.html"><a href="r-basics.html#gráficos-básicos"><i class="fa fa-check"></i><b>2.15</b> Gráficos básicos</a>
<ul>
<li class="chapter" data-level="2.15.1" data-path="r-basics.html"><a href="r-basics.html#plot"><i class="fa fa-check"></i><b>2.15.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="2.15.2" data-path="r-basics.html"><a href="r-basics.html#hist"><i class="fa fa-check"></i><b>2.15.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="2.15.3" data-path="r-basics.html"><a href="r-basics.html#boxplot"><i class="fa fa-check"></i><b>2.15.3</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="2.15.4" data-path="r-basics.html"><a href="r-basics.html#image"><i class="fa fa-check"></i><b>2.15.4</b> <code>image</code></a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="r-basics.html"><a href="r-basics.html#ejercicios-6"><i class="fa fa-check"></i><b>2.16</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html"><i class="fa fa-check"></i><b>3</b> Conceptos básicos de programación</a>
<ul>
<li class="chapter" data-level="3.1" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html#conditionals"><i class="fa fa-check"></i><b>3.1</b> Expresiones condicionales</a></li>
<li class="chapter" data-level="3.2" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html#cómo-definir-funciones"><i class="fa fa-check"></i><b>3.2</b> Cómo definir funciones</a></li>
<li class="chapter" data-level="3.3" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html#namespaces"><i class="fa fa-check"></i><b>3.3</b> <em>Namespaces</em></a></li>
<li class="chapter" data-level="3.4" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html#bucles-for"><i class="fa fa-check"></i><b>3.4</b> Bucles-for</a></li>
<li class="chapter" data-level="3.5" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html#vectorization"><i class="fa fa-check"></i><b>3.5</b> Vectorización y funcionales</a></li>
<li class="chapter" data-level="3.6" data-path="conceptos-básicos-de-programación.html"><a href="conceptos-básicos-de-programación.html#ejercicios-7"><i class="fa fa-check"></i><b>3.6</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>4.1</b> Datos <em>tidy</em></a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-8"><i class="fa fa-check"></i><b>4.2</b> Ejercicios</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse.html"><a href="tidyverse.html#cómo-manipular-los-data-frames"><i class="fa fa-check"></i><b>4.3</b> Cómo manipular los <em>data frames</em></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tidyverse.html"><a href="tidyverse.html#cómo-añadir-una-columna-con-mutate"><i class="fa fa-check"></i><b>4.3.1</b> Cómo añadir una columna con <code>mutate</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="tidyverse.html"><a href="tidyverse.html#cómo-crear-subconjuntos-con-filter"><i class="fa fa-check"></i><b>4.3.2</b> Cómo crear subconjuntos con <code>filter</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="tidyverse.html"><a href="tidyverse.html#cómo-seleccionar-columnas-con-select"><i class="fa fa-check"></i><b>4.3.3</b> Cómo seleccionar columnas con <code>select</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-9"><i class="fa fa-check"></i><b>4.4</b> Ejercicios</a></li>
<li class="chapter" data-level="4.5" data-path="tidyverse.html"><a href="tidyverse.html#el-pipe"><i class="fa fa-check"></i><b>4.5</b> El <em>pipe</em>: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.6" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-10"><i class="fa fa-check"></i><b>4.6</b> Ejercicios</a></li>
<li class="chapter" data-level="4.7" data-path="tidyverse.html"><a href="tidyverse.html#cómo-resumir-datos"><i class="fa fa-check"></i><b>4.7</b> Cómo resumir datos</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="tidyverse.html"><a href="tidyverse.html#summarize"><i class="fa fa-check"></i><b>4.7.1</b> <code>summarize</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="tidyverse.html"><a href="tidyverse.html#resúmenes-múltiples"><i class="fa fa-check"></i><b>4.7.2</b> Resúmenes múltiples</a></li>
<li class="chapter" data-level="4.7.3" data-path="tidyverse.html"><a href="tidyverse.html#group-by"><i class="fa fa-check"></i><b>4.7.3</b> Cómo agrupar y luego resumir con <code>group_by</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="tidyverse.html"><a href="tidyverse.html#pull"><i class="fa fa-check"></i><b>4.8</b> <code>pull</code></a></li>
<li class="chapter" data-level="4.9" data-path="tidyverse.html"><a href="tidyverse.html#cómo-ordenar-los-data-frames"><i class="fa fa-check"></i><b>4.9</b> Cómo ordenar los <em>data frames</em></a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="tidyverse.html"><a href="tidyverse.html#cómo-ordenar-anidadamente"><i class="fa fa-check"></i><b>4.9.1</b> Cómo ordenar anidadamente</a></li>
<li class="chapter" data-level="4.9.2" data-path="tidyverse.html"><a href="tidyverse.html#los-primeros-n"><i class="fa fa-check"></i><b>4.9.2</b> Los primeros <span class="math inline">\(n\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-11"><i class="fa fa-check"></i><b>4.10</b> Ejercicios</a></li>
<li class="chapter" data-level="4.11" data-path="tidyverse.html"><a href="tidyverse.html#tibbles"><i class="fa fa-check"></i><b>4.11</b> <em>Tibbles</em></a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="tidyverse.html"><a href="tidyverse.html#los-tibbles-se-ven-mejor"><i class="fa fa-check"></i><b>4.11.1</b> Los <em>tibbles</em> se ven mejor</a></li>
<li class="chapter" data-level="4.11.2" data-path="tidyverse.html"><a href="tidyverse.html#los-subconjuntos-de-tibbles-son-tibbles"><i class="fa fa-check"></i><b>4.11.2</b> Los subconjuntos de <em>tibbles</em> son <em>tibbles</em></a></li>
<li class="chapter" data-level="4.11.3" data-path="tidyverse.html"><a href="tidyverse.html#los-tibbles-pueden-tener-entradas-complejas"><i class="fa fa-check"></i><b>4.11.3</b> Los <em>tibbles</em> pueden tener entradas complejas</a></li>
<li class="chapter" data-level="4.11.4" data-path="tidyverse.html"><a href="tidyverse.html#los-tibbles-se-pueden-agrupar"><i class="fa fa-check"></i><b>4.11.4</b> Los <em>tibbles</em> se pueden agrupar</a></li>
<li class="chapter" data-level="4.11.5" data-path="tidyverse.html"><a href="tidyverse.html#cómo-crear-un-tibble-usando-tibble-en-lugar-de-data.frame"><i class="fa fa-check"></i><b>4.11.5</b> Cómo crear un <em>tibble</em> usando <code>tibble</code> en lugar de <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="tidyverse.html"><a href="tidyverse.html#el-operador-punto"><i class="fa fa-check"></i><b>4.12</b> El operador punto</a></li>
<li class="chapter" data-level="4.13" data-path="tidyverse.html"><a href="tidyverse.html#el-paquete-purrr"><i class="fa fa-check"></i><b>4.13</b> El paquete <strong>purrr</strong></a></li>
<li class="chapter" data-level="4.14" data-path="tidyverse.html"><a href="tidyverse.html#los-condicionales-de-tidyverse"><i class="fa fa-check"></i><b>4.14</b> Los condicionales de <em>tidyverse</em></a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="tidyverse.html"><a href="tidyverse.html#case_when"><i class="fa fa-check"></i><b>4.14.1</b> <code>case_when</code></a></li>
<li class="chapter" data-level="4.14.2" data-path="tidyverse.html"><a href="tidyverse.html#between"><i class="fa fa-check"></i><b>4.14.2</b> <code>between</code></a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="tidyverse.html"><a href="tidyverse.html#ejercicios-12"><i class="fa fa-check"></i><b>4.15</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>5</b> Importando datos</a>
<ul>
<li class="chapter" data-level="5.1" data-path="importing-data.html"><a href="importing-data.html#las-rutas-y-el-directorio-de-trabajo"><i class="fa fa-check"></i><b>5.1</b> Las rutas y el directorio de trabajo</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="importing-data.html"><a href="importing-data.html#el-sistema-de-archivos"><i class="fa fa-check"></i><b>5.1.1</b> El sistema de archivos</a></li>
<li class="chapter" data-level="5.1.2" data-path="importing-data.html"><a href="importing-data.html#las-rutas-relativas-y-completas"><i class="fa fa-check"></i><b>5.1.2</b> Las rutas relativas y completas</a></li>
<li class="chapter" data-level="5.1.3" data-path="importing-data.html"><a href="importing-data.html#el-directorio-de-trabajo"><i class="fa fa-check"></i><b>5.1.3</b> El directorio de trabajo</a></li>
<li class="chapter" data-level="5.1.4" data-path="importing-data.html"><a href="importing-data.html#cómo-generar-los-nombres-de-ruta"><i class="fa fa-check"></i><b>5.1.4</b> Cómo generar los nombres de ruta</a></li>
<li class="chapter" data-level="5.1.5" data-path="importing-data.html"><a href="importing-data.html#cómo-copiar-los-archivos-usando-rutas"><i class="fa fa-check"></i><b>5.1.5</b> Cómo copiar los archivos usando rutas</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-data.html"><a href="importing-data.html#los-paquetes-readr-y-readxl"><i class="fa fa-check"></i><b>5.2</b> Los paquetes readr y readxl</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="importing-data.html"><a href="importing-data.html#readr"><i class="fa fa-check"></i><b>5.2.1</b> readr</a></li>
<li class="chapter" data-level="5.2.2" data-path="importing-data.html"><a href="importing-data.html#readxl"><i class="fa fa-check"></i><b>5.2.2</b> readxl</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="importing-data.html"><a href="importing-data.html#ejercicios-13"><i class="fa fa-check"></i><b>5.3</b> Ejercicios</a></li>
<li class="chapter" data-level="5.4" data-path="importing-data.html"><a href="importing-data.html#cómo-descargar-archivos"><i class="fa fa-check"></i><b>5.4</b> Cómo descargar archivos</a></li>
<li class="chapter" data-level="5.5" data-path="importing-data.html"><a href="importing-data.html#las-funciones-de-importación-de-base-r"><i class="fa fa-check"></i><b>5.5</b> Las funciones de importación de base R</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="importing-data.html"><a href="importing-data.html#scan"><i class="fa fa-check"></i><b>5.5.1</b> <code>scan</code></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="importing-data.html"><a href="importing-data.html#archivos-de-texto-versus-archivos-binarios"><i class="fa fa-check"></i><b>5.6</b> Archivos de texto versus archivos binarios</a></li>
<li class="chapter" data-level="5.7" data-path="importing-data.html"><a href="importing-data.html#unicode-versus-ascii"><i class="fa fa-check"></i><b>5.7</b> Unicode versus ASCII</a></li>
<li class="chapter" data-level="5.8" data-path="importing-data.html"><a href="importing-data.html#cómo-organizar-datos-con-hojas-de-cálculo"><i class="fa fa-check"></i><b>5.8</b> Cómo organizar datos con hojas de cálculo</a></li>
<li class="chapter" data-level="5.9" data-path="importing-data.html"><a href="importing-data.html#ejercicios-14"><i class="fa fa-check"></i><b>5.9</b> Ejercicios</a></li>
</ul></li>
<li class="part"><span><b>II Visualización de datos</b></span></li>
<li class="chapter" data-level="6" data-path="introducción-a-la-visualización-de-datos.html"><a href="introducción-a-la-visualización-de-datos.html"><i class="fa fa-check"></i><b>6</b> Introducción a la visualización de datos</a></li>
<li class="chapter" data-level="7" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>7</b> ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ggplot2.html"><a href="ggplot2.html#los-componentes-de-un-gráfico"><i class="fa fa-check"></i><b>7.1</b> Los componentes de un gráfico</a></li>
<li class="chapter" data-level="7.2" data-path="ggplot2.html"><a href="ggplot2.html#objetos-ggplot"><i class="fa fa-check"></i><b>7.2</b> Objetos <code>ggplot</code></a></li>
<li class="chapter" data-level="7.3" data-path="ggplot2.html"><a href="ggplot2.html#geometrías"><i class="fa fa-check"></i><b>7.3</b> Geometrías</a></li>
<li class="chapter" data-level="7.4" data-path="ggplot2.html"><a href="ggplot2.html#mapeos-estéticos"><i class="fa fa-check"></i><b>7.4</b> Mapeos estéticos</a></li>
<li class="chapter" data-level="7.5" data-path="ggplot2.html"><a href="ggplot2.html#capas"><i class="fa fa-check"></i><b>7.5</b> Capas</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ggplot2.html"><a href="ggplot2.html#cómo-probar-varios-argumentos"><i class="fa fa-check"></i><b>7.5.1</b> Cómo probar varios argumentos</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ggplot2.html"><a href="ggplot2.html#mapeos-estéticos-globales-versus-locales"><i class="fa fa-check"></i><b>7.6</b> Mapeos estéticos globales versus locales</a></li>
<li class="chapter" data-level="7.7" data-path="ggplot2.html"><a href="ggplot2.html#escalas"><i class="fa fa-check"></i><b>7.7</b> Escalas</a></li>
<li class="chapter" data-level="7.8" data-path="ggplot2.html"><a href="ggplot2.html#etiquetas-y-títulos"><i class="fa fa-check"></i><b>7.8</b> Etiquetas y títulos</a></li>
<li class="chapter" data-level="7.9" data-path="ggplot2.html"><a href="ggplot2.html#categorías-como-colores"><i class="fa fa-check"></i><b>7.9</b> Categorías como colores</a></li>
<li class="chapter" data-level="7.10" data-path="ggplot2.html"><a href="ggplot2.html#anotación-formas-y-ajustes"><i class="fa fa-check"></i><b>7.10</b> Anotación, formas y ajustes</a></li>
<li class="chapter" data-level="7.11" data-path="ggplot2.html"><a href="ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>7.11</b> Paquetes complementarios</a></li>
<li class="chapter" data-level="7.12" data-path="ggplot2.html"><a href="ggplot2.html#cómo-combinarlo-todo"><i class="fa fa-check"></i><b>7.12</b> Cómo combinarlo todo</a></li>
<li class="chapter" data-level="7.13" data-path="ggplot2.html"><a href="ggplot2.html#qplot"><i class="fa fa-check"></i><b>7.13</b> Gráficos rápidos con <code>qplot</code></a></li>
<li class="chapter" data-level="7.14" data-path="ggplot2.html"><a href="ggplot2.html#cuadrículas-de-gráficos"><i class="fa fa-check"></i><b>7.14</b> Cuadrículas de gráficos</a></li>
<li class="chapter" data-level="7.15" data-path="ggplot2.html"><a href="ggplot2.html#ejercicios-15"><i class="fa fa-check"></i><b>7.15</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>8</b> Cómo visualizar distribuciones de datos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="distributions.html"><a href="distributions.html#tipos-de-variables"><i class="fa fa-check"></i><b>8.1</b> Tipos de variables</a></li>
<li class="chapter" data-level="8.2" data-path="distributions.html"><a href="distributions.html#estudio-de-caso-describiendo-alturas-de-estudiantes"><i class="fa fa-check"></i><b>8.2</b> Estudio de caso: describiendo alturas de estudiantes</a></li>
<li class="chapter" data-level="8.3" data-path="distributions.html"><a href="distributions.html#la-función-de-distribución"><i class="fa fa-check"></i><b>8.3</b> La función de distribución</a></li>
<li class="chapter" data-level="8.4" data-path="distributions.html"><a href="distributions.html#cdf-intro"><i class="fa fa-check"></i><b>8.4</b> Funciones de distribución acumulada</a></li>
<li class="chapter" data-level="8.5" data-path="distributions.html"><a href="distributions.html#histogramas"><i class="fa fa-check"></i><b>8.5</b> Histogramas</a></li>
<li class="chapter" data-level="8.6" data-path="distributions.html"><a href="distributions.html#densidad-suave"><i class="fa fa-check"></i><b>8.6</b> Densidad suave</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="distributions.html"><a href="distributions.html#cómo-interpretar-el-eje-y"><i class="fa fa-check"></i><b>8.6.1</b> Cómo interpretar el eje-y</a></li>
<li class="chapter" data-level="8.6.2" data-path="distributions.html"><a href="distributions.html#densidades-permiten-estratificación"><i class="fa fa-check"></i><b>8.6.2</b> Densidades permiten estratificación</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="distributions.html"><a href="distributions.html#ejercicios-16"><i class="fa fa-check"></i><b>8.7</b> Ejercicios</a></li>
<li class="chapter" data-level="8.8" data-path="distributions.html"><a href="distributions.html#normal-distribution"><i class="fa fa-check"></i><b>8.8</b> La distribución normal</a></li>
<li class="chapter" data-level="8.9" data-path="distributions.html"><a href="distributions.html#unidades-estándar"><i class="fa fa-check"></i><b>8.9</b> Unidades estándar</a></li>
<li class="chapter" data-level="8.10" data-path="distributions.html"><a href="distributions.html#gráficos-q-q"><i class="fa fa-check"></i><b>8.10</b> Gráficos Q-Q</a></li>
<li class="chapter" data-level="8.11" data-path="distributions.html"><a href="distributions.html#percentiles"><i class="fa fa-check"></i><b>8.11</b> Percentiles</a></li>
<li class="chapter" data-level="8.12" data-path="distributions.html"><a href="distributions.html#diagramas-de-caja"><i class="fa fa-check"></i><b>8.12</b> Diagramas de caja</a></li>
<li class="chapter" data-level="8.13" data-path="distributions.html"><a href="distributions.html#stratification"><i class="fa fa-check"></i><b>8.13</b> Estratificación</a></li>
<li class="chapter" data-level="8.14" data-path="distributions.html"><a href="distributions.html#student-height-cont"><i class="fa fa-check"></i><b>8.14</b> Estudio de caso: describiendo alturas de estudiantes (continuación)</a></li>
<li class="chapter" data-level="8.15" data-path="distributions.html"><a href="distributions.html#ejercicios-17"><i class="fa fa-check"></i><b>8.15</b> Ejercicios</a></li>
<li class="chapter" data-level="8.16" data-path="distributions.html"><a href="distributions.html#other-geometries"><i class="fa fa-check"></i><b>8.16</b> Geometrías ggplot2</a>
<ul>
<li class="chapter" data-level="8.16.1" data-path="distributions.html"><a href="distributions.html#diagramas-de-barras"><i class="fa fa-check"></i><b>8.16.1</b> Diagramas de barras</a></li>
<li class="chapter" data-level="8.16.2" data-path="distributions.html"><a href="distributions.html#histogramas-1"><i class="fa fa-check"></i><b>8.16.2</b> Histogramas</a></li>
<li class="chapter" data-level="8.16.3" data-path="distributions.html"><a href="distributions.html#gráficos-de-densidad"><i class="fa fa-check"></i><b>8.16.3</b> Gráficos de densidad</a></li>
<li class="chapter" data-level="8.16.4" data-path="distributions.html"><a href="distributions.html#diagramas-de-caja-1"><i class="fa fa-check"></i><b>8.16.4</b> Diagramas de caja</a></li>
<li class="chapter" data-level="8.16.5" data-path="distributions.html"><a href="distributions.html#gráficos-q-q-1"><i class="fa fa-check"></i><b>8.16.5</b> Gráficos Q-Q</a></li>
<li class="chapter" data-level="8.16.6" data-path="distributions.html"><a href="distributions.html#imágenes"><i class="fa fa-check"></i><b>8.16.6</b> Imágenes</a></li>
<li class="chapter" data-level="8.16.7" data-path="distributions.html"><a href="distributions.html#gráficos-rápidos"><i class="fa fa-check"></i><b>8.16.7</b> Gráficos rápidos</a></li>
</ul></li>
<li class="chapter" data-level="8.17" data-path="distributions.html"><a href="distributions.html#ejercicios-18"><i class="fa fa-check"></i><b>8.17</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>9</b> Visualización de datos en la práctica</a>
<ul>
<li class="chapter" data-level="9.1" data-path="gapminder.html"><a href="gapminder.html#estudio-de-caso-nuevas-ideas-sobre-la-pobreza"><i class="fa fa-check"></i><b>9.1</b> Estudio de caso: nuevas ideas sobre la pobreza</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="gapminder.html"><a href="gapminder.html#la-prueba-de-hans-rosling"><i class="fa fa-check"></i><b>9.1.1</b> La prueba de Hans Rosling</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="gapminder.html"><a href="gapminder.html#diagramas-de-dispersión"><i class="fa fa-check"></i><b>9.2</b> Diagramas de dispersión</a></li>
<li class="chapter" data-level="9.3" data-path="gapminder.html"><a href="gapminder.html#separar-en-facetas"><i class="fa fa-check"></i><b>9.3</b> Separar en facetas</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="gapminder.html"><a href="gapminder.html#facet_wrap"><i class="fa fa-check"></i><b>9.3.1</b> <code>facet_wrap</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="gapminder.html"><a href="gapminder.html#escalas-fijas-para-mejores-comparaciones"><i class="fa fa-check"></i><b>9.3.2</b> Escalas fijas para mejores comparaciones</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="gapminder.html"><a href="gapminder.html#gráficos-de-series-de-tiempo"><i class="fa fa-check"></i><b>9.4</b> Gráficos de series de tiempo</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="gapminder.html"><a href="gapminder.html#etiquetas-en-lugar-de-leyendas"><i class="fa fa-check"></i><b>9.4.1</b> Etiquetas en lugar de leyendas</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gapminder.html"><a href="gapminder.html#transformaciones-de-datos"><i class="fa fa-check"></i><b>9.5</b> Transformaciones de datos</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="gapminder.html"><a href="gapminder.html#transformación-logarítmica"><i class="fa fa-check"></i><b>9.5.1</b> Transformación logarítmica</a></li>
<li class="chapter" data-level="9.5.2" data-path="gapminder.html"><a href="gapminder.html#qué-base"><i class="fa fa-check"></i><b>9.5.2</b> ¿Qué base?</a></li>
<li class="chapter" data-level="9.5.3" data-path="gapminder.html"><a href="gapminder.html#transformar-los-valores-o-la-escala"><i class="fa fa-check"></i><b>9.5.3</b> ¿Transformar los valores o la escala?</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="gapminder.html"><a href="gapminder.html#cómo-visualizar-distribuciones-multimodales"><i class="fa fa-check"></i><b>9.6</b> Cómo visualizar distribuciones multimodales</a></li>
<li class="chapter" data-level="9.7" data-path="gapminder.html"><a href="gapminder.html#cómo-comparar-múltiples-distribuciones-con-diagramas-de-caja-y-gráficos-ridge"><i class="fa fa-check"></i><b>9.7</b> Cómo comparar múltiples distribuciones con diagramas de caja y gráficos <em>ridge</em></a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="gapminder.html"><a href="gapminder.html#diagramas-de-caja-2"><i class="fa fa-check"></i><b>9.7.1</b> Diagramas de caja</a></li>
<li class="chapter" data-level="9.7.2" data-path="gapminder.html"><a href="gapminder.html#gráficos-ridge"><i class="fa fa-check"></i><b>9.7.2</b> Gráficos <em>ridge</em></a></li>
<li class="chapter" data-level="9.7.3" data-path="gapminder.html"><a href="gapminder.html#ejemplo-distribuciones-de-ingresos-de-1970-versus-2010"><i class="fa fa-check"></i><b>9.7.3</b> Ejemplo: distribuciones de ingresos de 1970 versus 2010</a></li>
<li class="chapter" data-level="9.7.4" data-path="gapminder.html"><a href="gapminder.html#cómo-obtener-acceso-a-variables-calculadas"><i class="fa fa-check"></i><b>9.7.4</b> Cómo obtener acceso a variables calculadas</a></li>
<li class="chapter" data-level="9.7.5" data-path="gapminder.html"><a href="gapminder.html#densidades-ponderadas"><i class="fa fa-check"></i><b>9.7.5</b> Densidades ponderadas</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="gapminder.html"><a href="gapminder.html#la-falacia-ecológica-y-la-importancia-de-mostrar-los-datos"><i class="fa fa-check"></i><b>9.8</b> La falacia ecológica y la importancia de mostrar los datos</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="gapminder.html"><a href="gapminder.html#logit"><i class="fa fa-check"></i><b>9.8.1</b> Transformación logística</a></li>
<li class="chapter" data-level="9.8.2" data-path="gapminder.html"><a href="gapminder.html#mostrar-los-datos"><i class="fa fa-check"></i><b>9.8.2</b> Mostrar los datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html"><i class="fa fa-check"></i><b>10</b> Principios de visualización de datos</a>
<ul>
<li class="chapter" data-level="10.1" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#cómo-codificar-datos-utilizando-señales-visuales"><i class="fa fa-check"></i><b>10.1</b> Cómo codificar datos utilizando señales visuales</a></li>
<li class="chapter" data-level="10.2" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#cuándo-incluir-0"><i class="fa fa-check"></i><b>10.2</b> Cuándo incluir 0</a></li>
<li class="chapter" data-level="10.3" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#no-distorsionar-cantidades"><i class="fa fa-check"></i><b>10.3</b> No distorsionar cantidades</a></li>
<li class="chapter" data-level="10.4" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#ordenar-categorías-por-un-valor-significativo"><i class="fa fa-check"></i><b>10.4</b> Ordenar categorías por un valor significativo</a></li>
<li class="chapter" data-level="10.5" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#mostrar-los-datos-1"><i class="fa fa-check"></i><b>10.5</b> Mostrar los datos</a></li>
<li class="chapter" data-level="10.6" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#cómo-facilitar-comparaciones"><i class="fa fa-check"></i><b>10.6</b> Cómo facilitar comparaciones</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#usen-ejes-comunes"><i class="fa fa-check"></i><b>10.6.1</b> Usen ejes comunes</a></li>
<li class="chapter" data-level="10.6.2" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#alineen-gráficos-verticalmente-para-ver-cambios-horizontales-y-horizontalmente-para-ver-cambios-verticales"><i class="fa fa-check"></i><b>10.6.2</b> Alineen gráficos verticalmente para ver cambios horizontales y horizontalmente para ver cambios verticales</a></li>
<li class="chapter" data-level="10.6.3" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#consideren-transformaciones"><i class="fa fa-check"></i><b>10.6.3</b> Consideren transformaciones</a></li>
<li class="chapter" data-level="10.6.4" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#señales-visuales-comparadas-deben-estar-adyacentes"><i class="fa fa-check"></i><b>10.6.4</b> Señales visuales comparadas deben estar adyacentes</a></li>
<li class="chapter" data-level="10.6.5" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#usen-color"><i class="fa fa-check"></i><b>10.6.5</b> Usen color</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#consideren-los-daltónicos"><i class="fa fa-check"></i><b>10.7</b> Consideren los daltónicos</a></li>
<li class="chapter" data-level="10.8" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#gráficos-para-dos-variables"><i class="fa fa-check"></i><b>10.8</b> Gráficos para dos variables</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#slope-charts"><i class="fa fa-check"></i><b>10.8.1</b> <em>Slope charts</em></a></li>
<li class="chapter" data-level="10.8.2" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#gráfico-bland-altman"><i class="fa fa-check"></i><b>10.8.2</b> Gráfico Bland-Altman</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#cómo-codificar-una-tercera-variable"><i class="fa fa-check"></i><b>10.9</b> Cómo codificar una tercera variable</a></li>
<li class="chapter" data-level="10.10" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#eviten-los-gráficos-pseudo-tridimensionales"><i class="fa fa-check"></i><b>10.10</b> Eviten los gráficos pseudo-tridimensionales</a></li>
<li class="chapter" data-level="10.11" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#eviten-demasiados-dígitos-significativos"><i class="fa fa-check"></i><b>10.11</b> Eviten demasiados dígitos significativos</a></li>
<li class="chapter" data-level="10.12" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#consideren-a-su-audiencia"><i class="fa fa-check"></i><b>10.12</b> Consideren a su audiencia</a></li>
<li class="chapter" data-level="10.13" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#ejercicios-19"><i class="fa fa-check"></i><b>10.13</b> Ejercicios</a></li>
<li class="chapter" data-level="10.14" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#vaccines"><i class="fa fa-check"></i><b>10.14</b> Estudio de caso: las vacunas y las enfermedades infecciosas</a></li>
<li class="chapter" data-level="10.15" data-path="principios-de-visualización-de-datos.html"><a href="principios-de-visualización-de-datos.html#ejercicios-20"><i class="fa fa-check"></i><b>10.15</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="robust-summaries.html"><a href="robust-summaries.html"><i class="fa fa-check"></i><b>11</b> Resúmenes robustos</a>
<ul>
<li class="chapter" data-level="11.1" data-path="robust-summaries.html"><a href="robust-summaries.html#valores-atípicos"><i class="fa fa-check"></i><b>11.1</b> Valores atípicos</a></li>
<li class="chapter" data-level="11.2" data-path="robust-summaries.html"><a href="robust-summaries.html#mediana"><i class="fa fa-check"></i><b>11.2</b> Mediana</a></li>
<li class="chapter" data-level="11.3" data-path="robust-summaries.html"><a href="robust-summaries.html#el-rango-intercuartil-iqr"><i class="fa fa-check"></i><b>11.3</b> El rango intercuartil (IQR)</a></li>
<li class="chapter" data-level="11.4" data-path="robust-summaries.html"><a href="robust-summaries.html#la-definición-de-tukey-de-un-valor-atípico"><i class="fa fa-check"></i><b>11.4</b> La definición de Tukey de un valor atípico</a></li>
<li class="chapter" data-level="11.5" data-path="robust-summaries.html"><a href="robust-summaries.html#desviación-absoluta-mediana"><i class="fa fa-check"></i><b>11.5</b> Desviación absoluta mediana</a></li>
<li class="chapter" data-level="11.6" data-path="robust-summaries.html"><a href="robust-summaries.html#ejercicios-21"><i class="fa fa-check"></i><b>11.6</b> Ejercicios</a></li>
<li class="chapter" data-level="11.7" data-path="robust-summaries.html"><a href="robust-summaries.html#estudio-de-caso-alturas-autoreportadas-de-estudiantes"><i class="fa fa-check"></i><b>11.7</b> Estudio de caso: alturas autoreportadas de estudiantes</a></li>
</ul></li>
<li class="part"><span><b>III Estadísticas con R</b></span></li>
<li class="chapter" data-level="12" data-path="introducción-a-las-estadísticas-con-r.html"><a href="introducción-a-las-estadísticas-con-r.html"><i class="fa fa-check"></i><b>12</b> Introducción a las estadísticas con R</a></li>
<li class="chapter" data-level="13" data-path="probabilidad.html"><a href="probabilidad.html"><i class="fa fa-check"></i><b>13</b> Probabilidad</a>
<ul>
<li class="chapter" data-level="13.1" data-path="probabilidad.html"><a href="probabilidad.html#probabilidad-discreta"><i class="fa fa-check"></i><b>13.1</b> Probabilidad discreta</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="probabilidad.html"><a href="probabilidad.html#frecuencia-relativa"><i class="fa fa-check"></i><b>13.1.1</b> Frecuencia relativa</a></li>
<li class="chapter" data-level="13.1.2" data-path="probabilidad.html"><a href="probabilidad.html#notación"><i class="fa fa-check"></i><b>13.1.2</b> Notación</a></li>
<li class="chapter" data-level="13.1.3" data-path="probabilidad.html"><a href="probabilidad.html#distribuciones-de-probabilidad"><i class="fa fa-check"></i><b>13.1.3</b> Distribuciones de probabilidad</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="probabilidad.html"><a href="probabilidad.html#simulaciones-monte-carlo-para-datos-categóricos"><i class="fa fa-check"></i><b>13.2</b> Simulaciones Monte Carlo para datos categóricos</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="probabilidad.html"><a href="probabilidad.html#fijar-la-semilla-aleatoria"><i class="fa fa-check"></i><b>13.2.1</b> Fijar la semilla aleatoria</a></li>
<li class="chapter" data-level="13.2.2" data-path="probabilidad.html"><a href="probabilidad.html#con-y-sin-reemplazo"><i class="fa fa-check"></i><b>13.2.2</b> Con y sin reemplazo</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="probabilidad.html"><a href="probabilidad.html#independencia"><i class="fa fa-check"></i><b>13.3</b> Independencia</a></li>
<li class="chapter" data-level="13.4" data-path="probabilidad.html"><a href="probabilidad.html#probabilidades-condicionales"><i class="fa fa-check"></i><b>13.4</b> Probabilidades condicionales</a></li>
<li class="chapter" data-level="13.5" data-path="probabilidad.html"><a href="probabilidad.html#reglas-de-la-adición-y-de-la-multiplicación"><i class="fa fa-check"></i><b>13.5</b> Reglas de la adición y de la multiplicación</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="probabilidad.html"><a href="probabilidad.html#regla-de-la-multiplicación"><i class="fa fa-check"></i><b>13.5.1</b> Regla de la multiplicación</a></li>
<li class="chapter" data-level="13.5.2" data-path="probabilidad.html"><a href="probabilidad.html#regla-de-la-multiplicación-bajo-independencia"><i class="fa fa-check"></i><b>13.5.2</b> Regla de la multiplicación bajo independencia</a></li>
<li class="chapter" data-level="13.5.3" data-path="probabilidad.html"><a href="probabilidad.html#regla-de-la-adición"><i class="fa fa-check"></i><b>13.5.3</b> Regla de la adición</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="probabilidad.html"><a href="probabilidad.html#combinaciones-y-permutaciones"><i class="fa fa-check"></i><b>13.6</b> Combinaciones y permutaciones</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="probabilidad.html"><a href="probabilidad.html#ejemplo-monte-carlo"><i class="fa fa-check"></i><b>13.6.1</b> Ejemplo Monte Carlo</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="probabilidad.html"><a href="probabilidad.html#ejemplos"><i class="fa fa-check"></i><b>13.7</b> Ejemplos</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="probabilidad.html"><a href="probabilidad.html#problema-monty-hall"><i class="fa fa-check"></i><b>13.7.1</b> Problema Monty Hall</a></li>
<li class="chapter" data-level="13.7.2" data-path="probabilidad.html"><a href="probabilidad.html#problema-de-cumpleaños"><i class="fa fa-check"></i><b>13.7.2</b> Problema de cumpleaños</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="probabilidad.html"><a href="probabilidad.html#infinito-en-la-práctica"><i class="fa fa-check"></i><b>13.8</b> Infinito en la práctica</a></li>
<li class="chapter" data-level="13.9" data-path="probabilidad.html"><a href="probabilidad.html#ejercicios-22"><i class="fa fa-check"></i><b>13.9</b> Ejercicios</a></li>
<li class="chapter" data-level="13.10" data-path="probabilidad.html"><a href="probabilidad.html#probabilidad-continua"><i class="fa fa-check"></i><b>13.10</b> Probabilidad continua</a></li>
<li class="chapter" data-level="13.11" data-path="probabilidad.html"><a href="probabilidad.html#distribuciones-teóricas-continuas"><i class="fa fa-check"></i><b>13.11</b> Distribuciones teóricas continuas</a>
<ul>
<li class="chapter" data-level="13.11.1" data-path="probabilidad.html"><a href="probabilidad.html#distribuciones-teóricas-como-aproximaciones"><i class="fa fa-check"></i><b>13.11.1</b> Distribuciones teóricas como aproximaciones</a></li>
<li class="chapter" data-level="13.11.2" data-path="probabilidad.html"><a href="probabilidad.html#la-densidad-de-probabilidad"><i class="fa fa-check"></i><b>13.11.2</b> La densidad de probabilidad</a></li>
</ul></li>
<li class="chapter" data-level="13.12" data-path="probabilidad.html"><a href="probabilidad.html#simulaciones-monte-carlo-para-variables-continuas"><i class="fa fa-check"></i><b>13.12</b> Simulaciones Monte Carlo para variables continuas</a></li>
<li class="chapter" data-level="13.13" data-path="probabilidad.html"><a href="probabilidad.html#distribuciones-continuas"><i class="fa fa-check"></i><b>13.13</b> Distribuciones continuas</a></li>
<li class="chapter" data-level="13.14" data-path="probabilidad.html"><a href="probabilidad.html#ejercicios-23"><i class="fa fa-check"></i><b>13.14</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html"><i class="fa fa-check"></i><b>14</b> Variables aleatorias</a>
<ul>
<li class="chapter" data-level="14.1" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#variables-aleatorias-1"><i class="fa fa-check"></i><b>14.1</b> Variables aleatorias</a></li>
<li class="chapter" data-level="14.2" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#modelos-de-muestreo"><i class="fa fa-check"></i><b>14.2</b> Modelos de muestreo</a></li>
<li class="chapter" data-level="14.3" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#la-distribución-de-probabilidad-de-una-variable-aleatoria"><i class="fa fa-check"></i><b>14.3</b> La distribución de probabilidad de una variable aleatoria</a></li>
<li class="chapter" data-level="14.4" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#distribuciones-versus-distribuciones-de-probabilidad"><i class="fa fa-check"></i><b>14.4</b> Distribuciones versus distribuciones de probabilidad</a></li>
<li class="chapter" data-level="14.5" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#notación-para-variables-aleatorias"><i class="fa fa-check"></i><b>14.5</b> Notación para variables aleatorias</a></li>
<li class="chapter" data-level="14.6" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#el-valor-esperado-y-el-error-estándar"><i class="fa fa-check"></i><b>14.6</b> El valor esperado y el error estándar</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#población-sd-versus-la-muestra-sd"><i class="fa fa-check"></i><b>14.6.1</b> Población SD versus la muestra SD</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#teorema-del-límite-central"><i class="fa fa-check"></i><b>14.7</b> Teorema del límite central</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#cuán-grande-es-grande-en-el-teorema-del-límite-central"><i class="fa fa-check"></i><b>14.7.1</b> ¿Cuán grande es grande en el teorema del límite central?</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#propiedades-estadísticas-de-promedios"><i class="fa fa-check"></i><b>14.8</b> Propiedades estadísticas de promedios</a></li>
<li class="chapter" data-level="14.9" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#ley-de-los-grandes-números"><i class="fa fa-check"></i><b>14.9</b> Ley de los grandes números</a>
<ul>
<li class="chapter" data-level="14.9.1" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#malinterpretando-la-ley-de-promedios"><i class="fa fa-check"></i><b>14.9.1</b> Malinterpretando la ley de promedios</a></li>
</ul></li>
<li class="chapter" data-level="14.10" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#ejercicios-24"><i class="fa fa-check"></i><b>14.10</b> Ejercicios</a></li>
<li class="chapter" data-level="14.11" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#estudio-de-caso-the-big-short"><i class="fa fa-check"></i><b>14.11</b> Estudio de caso: <em>The Big Short</em></a>
<ul>
<li class="chapter" data-level="14.11.1" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#tasas-de-interés-explicadas-con-modelo-de-oportunidad"><i class="fa fa-check"></i><b>14.11.1</b> Tasas de interés explicadas con modelo de oportunidad</a></li>
<li class="chapter" data-level="14.11.2" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#the-big-short"><i class="fa fa-check"></i><b>14.11.2</b> <em>The Big Short</em></a></li>
</ul></li>
<li class="chapter" data-level="14.12" data-path="variables-aleatorias.html"><a href="variables-aleatorias.html#ejercicios-25"><i class="fa fa-check"></i><b>14.12</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="inference.html"><a href="inference.html"><i class="fa fa-check"></i><b>15</b> Inferencia estadística</a>
<ul>
<li class="chapter" data-level="15.1" data-path="inference.html"><a href="inference.html#encuestas"><i class="fa fa-check"></i><b>15.1</b> Encuestas</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="inference.html"><a href="inference.html#el-modelo-de-muestreo-para-encuestas"><i class="fa fa-check"></i><b>15.1.1</b> El modelo de muestreo para encuestas</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="inference.html"><a href="inference.html#poblaciones-muestras-parámetros-y-estimadores"><i class="fa fa-check"></i><b>15.2</b> Poblaciones, muestras, parámetros y estimadores</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="inference.html"><a href="inference.html#el-promedio-de-la-muestra"><i class="fa fa-check"></i><b>15.2.1</b> El promedio de la muestra</a></li>
<li class="chapter" data-level="15.2.2" data-path="inference.html"><a href="inference.html#parámetros"><i class="fa fa-check"></i><b>15.2.2</b> Parámetros</a></li>
<li class="chapter" data-level="15.2.3" data-path="inference.html"><a href="inference.html#encuesta-versus-pronóstico"><i class="fa fa-check"></i><b>15.2.3</b> Encuesta versus pronóstico</a></li>
<li class="chapter" data-level="15.2.4" data-path="inference.html"><a href="inference.html#propiedades-de-nuestro-estimador-valor-esperado-y-error-estándar"><i class="fa fa-check"></i><b>15.2.4</b> Propiedades de nuestro estimador: valor esperado y error estándar</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="inference.html"><a href="inference.html#ejercicios-26"><i class="fa fa-check"></i><b>15.3</b> Ejercicios</a></li>
<li class="chapter" data-level="15.4" data-path="inference.html"><a href="inference.html#clt"><i class="fa fa-check"></i><b>15.4</b> Teorema del límite central en la práctica</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="inference.html"><a href="inference.html#una-simulación-monte-carlo"><i class="fa fa-check"></i><b>15.4.1</b> Una simulación Monte Carlo</a></li>
<li class="chapter" data-level="15.4.2" data-path="inference.html"><a href="inference.html#la-diferencia"><i class="fa fa-check"></i><b>15.4.2</b> La diferencia</a></li>
<li class="chapter" data-level="15.4.3" data-path="inference.html"><a href="inference.html#sesgo-por-qué-no-realizar-una-encuesta-bien-grande"><i class="fa fa-check"></i><b>15.4.3</b> Sesgo: ¿por qué no realizar una encuesta bien grande?</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="inference.html"><a href="inference.html#ejercicios-27"><i class="fa fa-check"></i><b>15.5</b> Ejercicios</a></li>
<li class="chapter" data-level="15.6" data-path="inference.html"><a href="inference.html#intervalos-de-confianza"><i class="fa fa-check"></i><b>15.6</b> Intervalos de confianza</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="inference.html"><a href="inference.html#una-simulación-monte-carlo-1"><i class="fa fa-check"></i><b>15.6.1</b> Una simulación Monte Carlo</a></li>
<li class="chapter" data-level="15.6.2" data-path="inference.html"><a href="inference.html#el-idioma-correcto"><i class="fa fa-check"></i><b>15.6.2</b> El idioma correcto</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="inference.html"><a href="inference.html#ejercicios-28"><i class="fa fa-check"></i><b>15.7</b> Ejercicios</a></li>
<li class="chapter" data-level="15.8" data-path="inference.html"><a href="inference.html#poder"><i class="fa fa-check"></i><b>15.8</b> Poder</a></li>
<li class="chapter" data-level="15.9" data-path="inference.html"><a href="inference.html#valores-p"><i class="fa fa-check"></i><b>15.9</b> valores-p</a></li>
<li class="chapter" data-level="15.10" data-path="inference.html"><a href="inference.html#association-tests"><i class="fa fa-check"></i><b>15.10</b> Pruebas de asociación</a>
<ul>
<li class="chapter" data-level="15.10.1" data-path="inference.html"><a href="inference.html#lady-tasting-tea"><i class="fa fa-check"></i><b>15.10.1</b> Lady Tasting Tea</a></li>
<li class="chapter" data-level="15.10.2" data-path="inference.html"><a href="inference.html#tablas-2x2"><i class="fa fa-check"></i><b>15.10.2</b> Tablas 2x2</a></li>
<li class="chapter" data-level="15.10.3" data-path="inference.html"><a href="inference.html#prueba-de-chi-cuadrado"><i class="fa fa-check"></i><b>15.10.3</b> Prueba de chi-cuadrado</a></li>
<li class="chapter" data-level="15.10.4" data-path="inference.html"><a href="inference.html#odds-ratio"><i class="fa fa-check"></i><b>15.10.4</b> Riesgo relativo</a></li>
<li class="chapter" data-level="15.10.5" data-path="inference.html"><a href="inference.html#intervalos-de-confianza-para-el-riesgo-relativo"><i class="fa fa-check"></i><b>15.10.5</b> Intervalos de confianza para el riesgo relativo</a></li>
<li class="chapter" data-level="15.10.6" data-path="inference.html"><a href="inference.html#corrección-de-recuento-pequeño"><i class="fa fa-check"></i><b>15.10.6</b> Corrección de recuento pequeño</a></li>
<li class="chapter" data-level="15.10.7" data-path="inference.html"><a href="inference.html#muestras-grandes-valores-p-pequeños"><i class="fa fa-check"></i><b>15.10.7</b> Muestras grandes, valores-p pequeños</a></li>
</ul></li>
<li class="chapter" data-level="15.11" data-path="inference.html"><a href="inference.html#ejercicios-29"><i class="fa fa-check"></i><b>15.11</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="models.html"><a href="models.html"><i class="fa fa-check"></i><b>16</b> Modelos estadísticos</a>
<ul>
<li class="chapter" data-level="16.1" data-path="models.html"><a href="models.html#agregadores-de-encuestas"><i class="fa fa-check"></i><b>16.1</b> Agregadores de encuestas</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="models.html"><a href="models.html#datos-de-encuesta"><i class="fa fa-check"></i><b>16.1.1</b> Datos de encuesta</a></li>
<li class="chapter" data-level="16.1.2" data-path="models.html"><a href="models.html#sesgo-de-los-encuestadores"><i class="fa fa-check"></i><b>16.1.2</b> Sesgo de los encuestadores</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="models.html"><a href="models.html#data-driven-model"><i class="fa fa-check"></i><b>16.2</b> Modelos basados en datos</a></li>
<li class="chapter" data-level="16.3" data-path="models.html"><a href="models.html#ejercicios-30"><i class="fa fa-check"></i><b>16.3</b> Ejercicios</a></li>
<li class="chapter" data-level="16.4" data-path="models.html"><a href="models.html#bayesian-statistics"><i class="fa fa-check"></i><b>16.4</b> Estadísticas bayesianas</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="models.html"><a href="models.html#teorema-de-bayes"><i class="fa fa-check"></i><b>16.4.1</b> Teorema de Bayes</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="models.html"><a href="models.html#simulación-del-teorema-de-bayes"><i class="fa fa-check"></i><b>16.5</b> Simulación del teorema de Bayes</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="models.html"><a href="models.html#bayes-en-la-práctica"><i class="fa fa-check"></i><b>16.5.1</b> Bayes en la práctica</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="models.html"><a href="models.html#modelos-jerárquicos"><i class="fa fa-check"></i><b>16.6</b> Modelos jerárquicos</a></li>
<li class="chapter" data-level="16.7" data-path="models.html"><a href="models.html#ejercicios-31"><i class="fa fa-check"></i><b>16.7</b> Ejercicios</a></li>
<li class="chapter" data-level="16.8" data-path="models.html"><a href="models.html#election-forecasting"><i class="fa fa-check"></i><b>16.8</b> Estudio de caso: pronóstico de elecciones</a>
<ul>
<li class="chapter" data-level="16.8.1" data-path="models.html"><a href="models.html#bayesian-approach"><i class="fa fa-check"></i><b>16.8.1</b> Enfoque bayesiano</a></li>
<li class="chapter" data-level="16.8.2" data-path="models.html"><a href="models.html#el-sesgo-general"><i class="fa fa-check"></i><b>16.8.2</b> El sesgo general</a></li>
<li class="chapter" data-level="16.8.3" data-path="models.html"><a href="models.html#representaciones-matemáticas-de-modelos"><i class="fa fa-check"></i><b>16.8.3</b> Representaciones matemáticas de modelos</a></li>
<li class="chapter" data-level="16.8.4" data-path="models.html"><a href="models.html#prediciendo-el-colegio-electoral"><i class="fa fa-check"></i><b>16.8.4</b> Prediciendo el colegio electoral</a></li>
<li class="chapter" data-level="16.8.5" data-path="models.html"><a href="models.html#pronósticos"><i class="fa fa-check"></i><b>16.8.5</b> Pronósticos</a></li>
</ul></li>
<li class="chapter" data-level="16.9" data-path="models.html"><a href="models.html#ejercicios-32"><i class="fa fa-check"></i><b>16.9</b> Ejercicios</a></li>
<li class="chapter" data-level="16.10" data-path="models.html"><a href="models.html#t-dist"><i class="fa fa-check"></i><b>16.10</b> La distribución t</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>17</b> Regresión</a>
<ul>
<li class="chapter" data-level="17.1" data-path="regression.html"><a href="regression.html#estudio-de-caso-la-altura-es-hereditaria"><i class="fa fa-check"></i><b>17.1</b> Estudio de caso: ¿la altura es hereditaria?</a></li>
<li class="chapter" data-level="17.2" data-path="regression.html"><a href="regression.html#corr-coef"><i class="fa fa-check"></i><b>17.2</b> El coeficiente de correlación</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="regression.html"><a href="regression.html#la-correlación-de-muestra-es-una-variable-aleatoria"><i class="fa fa-check"></i><b>17.2.1</b> La correlación de muestra es una variable aleatoria</a></li>
<li class="chapter" data-level="17.2.2" data-path="regression.html"><a href="regression.html#la-correlación-no-siempre-es-un-resumen-útil"><i class="fa fa-check"></i><b>17.2.2</b> La correlación no siempre es un resumen útil</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="regression.html"><a href="regression.html#conditional-expectation"><i class="fa fa-check"></i><b>17.3</b> Valor esperado condicional</a></li>
<li class="chapter" data-level="17.4" data-path="regression.html"><a href="regression.html#la-línea-de-regresión"><i class="fa fa-check"></i><b>17.4</b> La línea de regresión</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="regression.html"><a href="regression.html#la-regresión-mejora-la-precisión"><i class="fa fa-check"></i><b>17.4.1</b> La regresión mejora la precisión</a></li>
<li class="chapter" data-level="17.4.2" data-path="regression.html"><a href="regression.html#distribución-normal-de-dos-variables-avanzada"><i class="fa fa-check"></i><b>17.4.2</b> Distribución normal de dos variables (avanzada)</a></li>
<li class="chapter" data-level="17.4.3" data-path="regression.html"><a href="regression.html#varianza-explicada"><i class="fa fa-check"></i><b>17.4.3</b> Varianza explicada</a></li>
<li class="chapter" data-level="17.4.4" data-path="regression.html"><a href="regression.html#advertencia-hay-dos-líneas-de-regresión"><i class="fa fa-check"></i><b>17.4.4</b> Advertencia: hay dos líneas de regresión</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="regression.html"><a href="regression.html#ejercicios-33"><i class="fa fa-check"></i><b>17.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>18</b> Modelos lineales</a>
<ul>
<li class="chapter" data-level="18.1" data-path="linear-models.html"><a href="linear-models.html#estudio-de-caso-moneyball"><i class="fa fa-check"></i><b>18.1</b> Estudio de caso: <em>Moneyball</em></a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="linear-models.html"><a href="linear-models.html#sabermetrics"><i class="fa fa-check"></i><b>18.1.1</b> Sabermetrics</a></li>
<li class="chapter" data-level="18.1.2" data-path="linear-models.html"><a href="linear-models.html#conceptos-básicos-de-béisbol"><i class="fa fa-check"></i><b>18.1.2</b> Conceptos básicos de béisbol</a></li>
<li class="chapter" data-level="18.1.3" data-path="linear-models.html"><a href="linear-models.html#no-hay-premios-para-bb"><i class="fa fa-check"></i><b>18.1.3</b> No hay premios para BB</a></li>
<li class="chapter" data-level="18.1.4" data-path="linear-models.html"><a href="linear-models.html#base-por-bolas-o-bases-robadas"><i class="fa fa-check"></i><b>18.1.4</b> ¿Base por bolas o bases robadas?</a></li>
<li class="chapter" data-level="18.1.5" data-path="linear-models.html"><a href="linear-models.html#regresión-aplicada-a-las-estadísticas-de-béisbol"><i class="fa fa-check"></i><b>18.1.5</b> Regresión aplicada a las estadísticas de béisbol</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="linear-models.html"><a href="linear-models.html#confusión"><i class="fa fa-check"></i><b>18.2</b> Confusión</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="linear-models.html"><a href="linear-models.html#cómo-entender-la-confusión-a-través-de-la-estratificación"><i class="fa fa-check"></i><b>18.2.1</b> Cómo entender la confusión a través de la estratificación</a></li>
<li class="chapter" data-level="18.2.2" data-path="linear-models.html"><a href="linear-models.html#regresión-lineal-múltiple"><i class="fa fa-check"></i><b>18.2.2</b> Regresión lineal múltiple</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="linear-models.html"><a href="linear-models.html#lse"><i class="fa fa-check"></i><b>18.3</b> Estimaciones de mínimos cuadrados</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="linear-models.html"><a href="linear-models.html#interpretando-modelos-lineales"><i class="fa fa-check"></i><b>18.3.1</b> Interpretando modelos lineales</a></li>
<li class="chapter" data-level="18.3.2" data-path="linear-models.html"><a href="linear-models.html#estimadores-de-mínimos-cuadrados-lse"><i class="fa fa-check"></i><b>18.3.2</b> Estimadores de mínimos cuadrados (LSE)</a></li>
<li class="chapter" data-level="18.3.3" data-path="linear-models.html"><a href="linear-models.html#la-función-lm"><i class="fa fa-check"></i><b>18.3.3</b> La función <code>lm</code></a></li>
<li class="chapter" data-level="18.3.4" data-path="linear-models.html"><a href="linear-models.html#el-lse-consiste-de-variables-aleatorias"><i class="fa fa-check"></i><b>18.3.4</b> El LSE consiste de variables aleatorias</a></li>
<li class="chapter" data-level="18.3.5" data-path="linear-models.html"><a href="linear-models.html#valores-pronosticados-son-variables-aleatorias"><i class="fa fa-check"></i><b>18.3.5</b> Valores pronosticados son variables aleatorias</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="linear-models.html"><a href="linear-models.html#ejercicios-34"><i class="fa fa-check"></i><b>18.4</b> Ejercicios</a></li>
<li class="chapter" data-level="18.5" data-path="linear-models.html"><a href="linear-models.html#regresión-lineal-en-el-tidyverse"><i class="fa fa-check"></i><b>18.5</b> Regresión lineal en el tidyverse</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="linear-models.html"><a href="linear-models.html#el-paquete-broom"><i class="fa fa-check"></i><b>18.5.1</b> El paquete <strong>broom</strong></a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="linear-models.html"><a href="linear-models.html#ejercicios-35"><i class="fa fa-check"></i><b>18.6</b> Ejercicios</a></li>
<li class="chapter" data-level="18.7" data-path="linear-models.html"><a href="linear-models.html#estudio-de-caso-moneyball-continuación"><i class="fa fa-check"></i><b>18.7</b> Estudio de caso: <em>Moneyball</em> (continuación)</a>
<ul>
<li class="chapter" data-level="18.7.1" data-path="linear-models.html"><a href="linear-models.html#añadiendo-información-sobre-salario-y-posición"><i class="fa fa-check"></i><b>18.7.1</b> Añadiendo información sobre salario y posición</a></li>
<li class="chapter" data-level="18.7.2" data-path="linear-models.html"><a href="linear-models.html#escoger-nueve-jugadores"><i class="fa fa-check"></i><b>18.7.2</b> Escoger nueve jugadores</a></li>
</ul></li>
<li class="chapter" data-level="18.8" data-path="linear-models.html"><a href="linear-models.html#la-falacia-de-la-regresión"><i class="fa fa-check"></i><b>18.8</b> La falacia de la regresión</a></li>
<li class="chapter" data-level="18.9" data-path="linear-models.html"><a href="linear-models.html#modelos-de-error-de-medición"><i class="fa fa-check"></i><b>18.9</b> Modelos de error de medición</a></li>
<li class="chapter" data-level="18.10" data-path="linear-models.html"><a href="linear-models.html#ejercicios-36"><i class="fa fa-check"></i><b>18.10</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html"><i class="fa fa-check"></i><b>19</b> La correlación no implica causalidad</a>
<ul>
<li class="chapter" data-level="19.1" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#correlación-espuria"><i class="fa fa-check"></i><b>19.1</b> Correlación espuria</a></li>
<li class="chapter" data-level="19.2" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#valores-atípicos-1"><i class="fa fa-check"></i><b>19.2</b> Valores atípicos</a></li>
<li class="chapter" data-level="19.3" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#inversión-de-causa-y-efecto"><i class="fa fa-check"></i><b>19.3</b> Inversión de causa y efecto</a></li>
<li class="chapter" data-level="19.4" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#factores-de-confusión"><i class="fa fa-check"></i><b>19.4</b> Factores de confusión</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#ejemplo-admisiones-a-la-universidad-de-california-berkeley"><i class="fa fa-check"></i><b>19.4.1</b> Ejemplo: admisiones a la Universidad de California, Berkeley</a></li>
<li class="chapter" data-level="19.4.2" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#confusión-explicada-gráficamente"><i class="fa fa-check"></i><b>19.4.2</b> Confusión explicada gráficamente</a></li>
<li class="chapter" data-level="19.4.3" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#calcular-promedio-luego-de-estratificar"><i class="fa fa-check"></i><b>19.4.3</b> Calcular promedio luego de estratificar</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#la-paradoja-de-simpson"><i class="fa fa-check"></i><b>19.5</b> La paradoja de Simpson</a></li>
<li class="chapter" data-level="19.6" data-path="la-correlación-no-implica-causalidad.html"><a href="la-correlación-no-implica-causalidad.html#ejercicios-37"><i class="fa fa-check"></i><b>19.6</b> Ejercicios</a></li>
</ul></li>
<li class="part"><span><b>IV Wrangling de datos</b></span></li>
<li class="chapter" data-level="20" data-path="introducción-al-wrangling-de-datos.html"><a href="introducción-al-wrangling-de-datos.html"><i class="fa fa-check"></i><b>20</b> Introducción al wrangling de datos</a></li>
<li class="chapter" data-level="21" data-path="cómo-cambiar-el-formato-de-datos.html"><a href="cómo-cambiar-el-formato-de-datos.html"><i class="fa fa-check"></i><b>21</b> Cómo cambiar el formato de datos</a>
<ul>
<li class="chapter" data-level="21.1" data-path="cómo-cambiar-el-formato-de-datos.html"><a href="cómo-cambiar-el-formato-de-datos.html#pivot_longer"><i class="fa fa-check"></i><b>21.1</b> <code>pivot_longer</code></a></li>
<li class="chapter" data-level="21.2" data-path="cómo-cambiar-el-formato-de-datos.html"><a href="cómo-cambiar-el-formato-de-datos.html#pivot_wider"><i class="fa fa-check"></i><b>21.2</b> <code>pivot_wider</code></a></li>
<li class="chapter" data-level="21.3" data-path="cómo-cambiar-el-formato-de-datos.html"><a href="cómo-cambiar-el-formato-de-datos.html#separate"><i class="fa fa-check"></i><b>21.3</b> <code>separate</code></a></li>
<li class="chapter" data-level="21.4" data-path="cómo-cambiar-el-formato-de-datos.html"><a href="cómo-cambiar-el-formato-de-datos.html#unite"><i class="fa fa-check"></i><b>21.4</b> <code>unite</code></a></li>
<li class="chapter" data-level="21.5" data-path="cómo-cambiar-el-formato-de-datos.html"><a href="cómo-cambiar-el-formato-de-datos.html#ejercicios-38"><i class="fa fa-check"></i><b>21.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="unir-tablas.html"><a href="unir-tablas.html"><i class="fa fa-check"></i><b>22</b> Unir tablas</a>
<ul>
<li class="chapter" data-level="22.1" data-path="unir-tablas.html"><a href="unir-tablas.html#joins"><i class="fa fa-check"></i><b>22.1</b> Funciones para unir</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="unir-tablas.html"><a href="unir-tablas.html#left-join"><i class="fa fa-check"></i><b>22.1.1</b> Left join</a></li>
<li class="chapter" data-level="22.1.2" data-path="unir-tablas.html"><a href="unir-tablas.html#right-join"><i class="fa fa-check"></i><b>22.1.2</b> Right join</a></li>
<li class="chapter" data-level="22.1.3" data-path="unir-tablas.html"><a href="unir-tablas.html#inner-join"><i class="fa fa-check"></i><b>22.1.3</b> Inner join</a></li>
<li class="chapter" data-level="22.1.4" data-path="unir-tablas.html"><a href="unir-tablas.html#full-join"><i class="fa fa-check"></i><b>22.1.4</b> Full join</a></li>
<li class="chapter" data-level="22.1.5" data-path="unir-tablas.html"><a href="unir-tablas.html#semi-join"><i class="fa fa-check"></i><b>22.1.5</b> Semi join</a></li>
<li class="chapter" data-level="22.1.6" data-path="unir-tablas.html"><a href="unir-tablas.html#anti-join"><i class="fa fa-check"></i><b>22.1.6</b> Anti join</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="unir-tablas.html"><a href="unir-tablas.html#binding"><i class="fa fa-check"></i><b>22.2</b> Binding</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="unir-tablas.html"><a href="unir-tablas.html#pegando-columnas"><i class="fa fa-check"></i><b>22.2.1</b> Pegando columnas</a></li>
<li class="chapter" data-level="22.2.2" data-path="unir-tablas.html"><a href="unir-tablas.html#pegando-filas"><i class="fa fa-check"></i><b>22.2.2</b> Pegando filas</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="unir-tablas.html"><a href="unir-tablas.html#operadores-de-sets"><i class="fa fa-check"></i><b>22.3</b> Operadores de sets</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="unir-tablas.html"><a href="unir-tablas.html#intersecar"><i class="fa fa-check"></i><b>22.3.1</b> Intersecar</a></li>
<li class="chapter" data-level="22.3.2" data-path="unir-tablas.html"><a href="unir-tablas.html#unión"><i class="fa fa-check"></i><b>22.3.2</b> Unión</a></li>
<li class="chapter" data-level="22.3.3" data-path="unir-tablas.html"><a href="unir-tablas.html#setdiff"><i class="fa fa-check"></i><b>22.3.3</b> <code>setdiff</code></a></li>
<li class="chapter" data-level="22.3.4" data-path="unir-tablas.html"><a href="unir-tablas.html#setequal"><i class="fa fa-check"></i><b>22.3.4</b> <code>setequal</code></a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="unir-tablas.html"><a href="unir-tablas.html#ejercicios-39"><i class="fa fa-check"></i><b>22.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="extracción-de-la-web.html"><a href="extracción-de-la-web.html"><i class="fa fa-check"></i><b>23</b> Extracción de la web</a>
<ul>
<li class="chapter" data-level="23.1" data-path="extracción-de-la-web.html"><a href="extracción-de-la-web.html#html"><i class="fa fa-check"></i><b>23.1</b> HTML</a></li>
<li class="chapter" data-level="23.2" data-path="extracción-de-la-web.html"><a href="extracción-de-la-web.html#el-paquete-rvest"><i class="fa fa-check"></i><b>23.2</b> El paquete <strong>rvest</strong></a></li>
<li class="chapter" data-level="23.3" data-path="extracción-de-la-web.html"><a href="extracción-de-la-web.html#css-selectors"><i class="fa fa-check"></i><b>23.3</b> Selectores CSS</a></li>
<li class="chapter" data-level="23.4" data-path="extracción-de-la-web.html"><a href="extracción-de-la-web.html#json"><i class="fa fa-check"></i><b>23.4</b> JSON</a></li>
<li class="chapter" data-level="23.5" data-path="extracción-de-la-web.html"><a href="extracción-de-la-web.html#ejercicios-40"><i class="fa fa-check"></i><b>23.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html"><i class="fa fa-check"></i><b>24</b> Procesamiento de cadenas</a>
<ul>
<li class="chapter" data-level="24.1" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#stringr"><i class="fa fa-check"></i><b>24.1</b> El paquete stringr</a></li>
<li class="chapter" data-level="24.2" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#estudio-de-caso-1-datos-de-asesinatos-en-ee.-uu."><i class="fa fa-check"></i><b>24.2</b> Estudio de caso 1: datos de asesinatos en EE. UU.</a></li>
<li class="chapter" data-level="24.3" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#estudio-de-caso-2-alturas-autoreportadas"><i class="fa fa-check"></i><b>24.3</b> Estudio de caso 2: alturas autoreportadas</a></li>
<li class="chapter" data-level="24.4" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#cómo-escapar-al-definir-cadenas"><i class="fa fa-check"></i><b>24.4</b> Cómo <em>escapar</em> al definir cadenas</a></li>
<li class="chapter" data-level="24.5" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#expresiones-regulares"><i class="fa fa-check"></i><b>24.5</b> Expresiones regulares</a>
<ul>
<li class="chapter" data-level="24.5.1" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#las-cadenas-son-expresiones-regulares"><i class="fa fa-check"></i><b>24.5.1</b> Las cadenas son expresiones regulares</a></li>
<li class="chapter" data-level="24.5.2" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#caracteres-especiales"><i class="fa fa-check"></i><b>24.5.2</b> Caracteres especiales</a></li>
<li class="chapter" data-level="24.5.3" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#clases-de-caracteres"><i class="fa fa-check"></i><b>24.5.3</b> Clases de caracteres</a></li>
<li class="chapter" data-level="24.5.4" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#anclas"><i class="fa fa-check"></i><b>24.5.4</b> Anclas</a></li>
<li class="chapter" data-level="24.5.5" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#cuantificadores"><i class="fa fa-check"></i><b>24.5.5</b> Cuantificadores</a></li>
<li class="chapter" data-level="24.5.6" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#espacio-en-blanco-s"><i class="fa fa-check"></i><b>24.5.6</b> Espacio en blanco <code>\s</code></a></li>
<li class="chapter" data-level="24.5.7" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#cuantificadores-1"><i class="fa fa-check"></i><b>24.5.7</b> Cuantificadores: <code>*</code>, <code>?</code>, <code>+</code></a></li>
<li class="chapter" data-level="24.5.8" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#todo-excepto"><i class="fa fa-check"></i><b>24.5.8</b> Todo excepto</a></li>
<li class="chapter" data-level="24.5.9" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#groups"><i class="fa fa-check"></i><b>24.5.9</b> Grupos</a></li>
</ul></li>
<li class="chapter" data-level="24.6" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#buscar-y-reemplazar-con-expresiones-regulares"><i class="fa fa-check"></i><b>24.6</b> Buscar y reemplazar con expresiones regulares</a>
<ul>
<li class="chapter" data-level="24.6.1" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#buscar-y-reemplazar-usando-grupos"><i class="fa fa-check"></i><b>24.6.1</b> Buscar y reemplazar usando grupos</a></li>
</ul></li>
<li class="chapter" data-level="24.7" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#probar-y-mejorar"><i class="fa fa-check"></i><b>24.7</b> Probar y mejorar</a></li>
<li class="chapter" data-level="24.8" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#podar"><i class="fa fa-check"></i><b>24.8</b> Podar</a></li>
<li class="chapter" data-level="24.9" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#cómo-cambiar-de-mayúsculas-o-minúsculas"><i class="fa fa-check"></i><b>24.9</b> Cómo cambiar de mayúsculas o minúsculas</a></li>
<li class="chapter" data-level="24.10" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#estudio-de-caso-2-alturas-autoreportadas-continuación"><i class="fa fa-check"></i><b>24.10</b> Estudio de caso 2: alturas autoreportadas (continuación)</a>
<ul>
<li class="chapter" data-level="24.10.1" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#la-función-extract"><i class="fa fa-check"></i><b>24.10.1</b> La función <code>extract</code></a></li>
<li class="chapter" data-level="24.10.2" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#juntando-todas-la-piezas"><i class="fa fa-check"></i><b>24.10.2</b> Juntando todas la piezas</a></li>
</ul></li>
<li class="chapter" data-level="24.11" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#división-de-cadenas"><i class="fa fa-check"></i><b>24.11</b> División de cadenas</a></li>
<li class="chapter" data-level="24.12" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#estudio-de-caso-3-extracción-de-tablas-de-un-pdf"><i class="fa fa-check"></i><b>24.12</b> Estudio de caso 3: extracción de tablas de un PDF</a></li>
<li class="chapter" data-level="24.13" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#recode"><i class="fa fa-check"></i><b>24.13</b> Recodificación</a></li>
<li class="chapter" data-level="24.14" data-path="procesamiento-de-cadenas.html"><a href="procesamiento-de-cadenas.html#ejercicios-41"><i class="fa fa-check"></i><b>24.14</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="cómo-leer-y-procesar-fechas-y-horas.html"><a href="cómo-leer-y-procesar-fechas-y-horas.html"><i class="fa fa-check"></i><b>25</b> Cómo leer y procesar fechas y horas</a>
<ul>
<li class="chapter" data-level="25.1" data-path="cómo-leer-y-procesar-fechas-y-horas.html"><a href="cómo-leer-y-procesar-fechas-y-horas.html#datos-tioo-fecha"><i class="fa fa-check"></i><b>25.1</b> Datos tioo fecha</a></li>
<li class="chapter" data-level="25.2" data-path="cómo-leer-y-procesar-fechas-y-horas.html"><a href="cómo-leer-y-procesar-fechas-y-horas.html#lubridate"><i class="fa fa-check"></i><b>25.2</b> El paquete lubridate</a></li>
<li class="chapter" data-level="25.3" data-path="cómo-leer-y-procesar-fechas-y-horas.html"><a href="cómo-leer-y-procesar-fechas-y-horas.html#ejercicios-42"><i class="fa fa-check"></i><b>25.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="minería-de-textos.html"><a href="minería-de-textos.html"><i class="fa fa-check"></i><b>26</b> Minería de textos</a>
<ul>
<li class="chapter" data-level="26.1" data-path="minería-de-textos.html"><a href="minería-de-textos.html#estudio-de-caso-tuits-de-trump"><i class="fa fa-check"></i><b>26.1</b> Estudio de caso: tuits de Trump</a></li>
<li class="chapter" data-level="26.2" data-path="minería-de-textos.html"><a href="minería-de-textos.html#texto-como-datos"><i class="fa fa-check"></i><b>26.2</b> Texto como datos</a></li>
<li class="chapter" data-level="26.3" data-path="minería-de-textos.html"><a href="minería-de-textos.html#análisis-de-sentimiento"><i class="fa fa-check"></i><b>26.3</b> Análisis de sentimiento</a></li>
<li class="chapter" data-level="26.4" data-path="minería-de-textos.html"><a href="minería-de-textos.html#ejercicios-43"><i class="fa fa-check"></i><b>26.4</b> Ejercicios</a></li>
</ul></li>
<li class="part"><span><b>V Machine Learning</b></span></li>
<li class="chapter" data-level="27" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html"><i class="fa fa-check"></i><b>27</b> Introducción a <em>machine learning</em></a>
<ul>
<li class="chapter" data-level="27.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#notación-1"><i class="fa fa-check"></i><b>27.1</b> Notación</a></li>
<li class="chapter" data-level="27.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#un-ejemplo"><i class="fa fa-check"></i><b>27.2</b> Un ejemplo</a></li>
<li class="chapter" data-level="27.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#ejercicios-44"><i class="fa fa-check"></i><b>27.3</b> Ejercicios</a></li>
<li class="chapter" data-level="27.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#métricas-de-evaluación"><i class="fa fa-check"></i><b>27.4</b> Métricas de evaluación</a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#training-test"><i class="fa fa-check"></i><b>27.4.1</b> Sets de entrenamiento y de evaluación</a></li>
<li class="chapter" data-level="27.4.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#exactitud-general"><i class="fa fa-check"></i><b>27.4.2</b> Exactitud general</a></li>
<li class="chapter" data-level="27.4.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#matriz-de-confusión"><i class="fa fa-check"></i><b>27.4.3</b> Matriz de confusión</a></li>
<li class="chapter" data-level="27.4.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#sensibilidad-y-especificidad"><i class="fa fa-check"></i><b>27.4.4</b> Sensibilidad y especificidad</a></li>
<li class="chapter" data-level="27.4.5" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#exactitud-equilibrada-y-medida-f_1"><i class="fa fa-check"></i><b>27.4.5</b> Exactitud equilibrada y medida <span class="math inline">\(F_1\)</span></a></li>
<li class="chapter" data-level="27.4.6" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#la-prevalencia-importa-en-la-práctica"><i class="fa fa-check"></i><b>27.4.6</b> La prevalencia importa en la práctica</a></li>
<li class="chapter" data-level="27.4.7" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#curvas-roc-y-precision-recall"><i class="fa fa-check"></i><b>27.4.7</b> Curvas ROC y precision-recall</a></li>
<li class="chapter" data-level="27.4.8" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#loss-function"><i class="fa fa-check"></i><b>27.4.8</b> Función de pérdida</a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#ejercicios-45"><i class="fa fa-check"></i><b>27.5</b> Ejercicios</a></li>
<li class="chapter" data-level="27.6" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#probabilidades-y-expectativas-condicionales"><i class="fa fa-check"></i><b>27.6</b> Probabilidades y expectativas condicionales</a>
<ul>
<li class="chapter" data-level="27.6.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#probabilidades-condicionales-1"><i class="fa fa-check"></i><b>27.6.1</b> Probabilidades condicionales</a></li>
<li class="chapter" data-level="27.6.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#expectativas-condicionales"><i class="fa fa-check"></i><b>27.6.2</b> Expectativas condicionales</a></li>
<li class="chapter" data-level="27.6.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#la-expectativa-condicional-minimiza-la-función-de-pérdida-cuadrática"><i class="fa fa-check"></i><b>27.6.3</b> La expectativa condicional minimiza la función de pérdida cuadrática</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#ejercicios-46"><i class="fa fa-check"></i><b>27.7</b> Ejercicios</a></li>
<li class="chapter" data-level="27.8" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#two-or-seven"><i class="fa fa-check"></i><b>27.8</b> Estudio de caso: ¿es un 2 o un 7?</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="suavización.html"><a href="suavización.html"><i class="fa fa-check"></i><b>28</b> Suavización</a>
<ul>
<li class="chapter" data-level="28.1" data-path="suavización.html"><a href="suavización.html#suavización-de-compartimientos"><i class="fa fa-check"></i><b>28.1</b> Suavización de compartimientos</a></li>
<li class="chapter" data-level="28.2" data-path="suavización.html"><a href="suavización.html#kernels"><i class="fa fa-check"></i><b>28.2</b> Kernels</a></li>
<li class="chapter" data-level="28.3" data-path="suavización.html"><a href="suavización.html#regresión-ponderada-local-loess"><i class="fa fa-check"></i><b>28.3</b> Regresión ponderada local (loess)</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="suavización.html"><a href="suavización.html#ajustando-con-parábolas"><i class="fa fa-check"></i><b>28.3.1</b> Ajustando con parábolas</a></li>
<li class="chapter" data-level="28.3.2" data-path="suavización.html"><a href="suavización.html#cuidado-con-los-parámetros-de-suavización-predeterminados"><i class="fa fa-check"></i><b>28.3.2</b> Cuidado con los parámetros de suavización predeterminados</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="suavización.html"><a href="suavización.html#smoothing-ml-connection"><i class="fa fa-check"></i><b>28.4</b> Conectando la suavización al <em>machine learning</em></a></li>
<li class="chapter" data-level="28.5" data-path="suavización.html"><a href="suavización.html#ejercicios-47"><i class="fa fa-check"></i><b>28.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="cross-validation.html"><a href="cross-validation.html"><i class="fa fa-check"></i><b>29</b> Validación cruzada</a>
<ul>
<li class="chapter" data-level="29.1" data-path="cross-validation.html"><a href="cross-validation.html#knn-cv-intro"><i class="fa fa-check"></i><b>29.1</b> Motivación con k vecinos más cercanos</a>
<ul>
<li class="chapter" data-level="29.1.1" data-path="cross-validation.html"><a href="cross-validation.html#sobreentrenamiento"><i class="fa fa-check"></i><b>29.1.1</b> Sobreentrenamiento</a></li>
<li class="chapter" data-level="29.1.2" data-path="cross-validation.html"><a href="cross-validation.html#sobre-suavización"><i class="fa fa-check"></i><b>29.1.2</b> Sobre-suavización</a></li>
<li class="chapter" data-level="29.1.3" data-path="cross-validation.html"><a href="cross-validation.html#escogiendo-la-k-en-knn"><i class="fa fa-check"></i><b>29.1.3</b> Escogiendo la <span class="math inline">\(k\)</span> en kNN</a></li>
</ul></li>
<li class="chapter" data-level="29.2" data-path="cross-validation.html"><a href="cross-validation.html#descripción-matemática-de-validación-cruzada"><i class="fa fa-check"></i><b>29.2</b> Descripción matemática de validación cruzada</a></li>
<li class="chapter" data-level="29.3" data-path="cross-validation.html"><a href="cross-validation.html#validación-cruzada-k-fold"><i class="fa fa-check"></i><b>29.3</b> Validación cruzada K-fold</a></li>
<li class="chapter" data-level="29.4" data-path="cross-validation.html"><a href="cross-validation.html#ejercicios-48"><i class="fa fa-check"></i><b>29.4</b> Ejercicios</a></li>
<li class="chapter" data-level="29.5" data-path="cross-validation.html"><a href="cross-validation.html#bootstrap"><i class="fa fa-check"></i><b>29.5</b> Bootstrap</a></li>
<li class="chapter" data-level="29.6" data-path="cross-validation.html"><a href="cross-validation.html#ejercicios-49"><i class="fa fa-check"></i><b>29.6</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="caret.html"><a href="caret.html"><i class="fa fa-check"></i><b>30</b> El paquete caret</a>
<ul>
<li class="chapter" data-level="30.1" data-path="caret.html"><a href="caret.html#la-función-train-de-caret"><i class="fa fa-check"></i><b>30.1</b> La función <code>train</code> de caret</a></li>
<li class="chapter" data-level="30.2" data-path="caret.html"><a href="caret.html#caret-cv"><i class="fa fa-check"></i><b>30.2</b> Validación cruzada</a></li>
<li class="chapter" data-level="30.3" data-path="caret.html"><a href="caret.html#ejemplo-ajuste-con-loess"><i class="fa fa-check"></i><b>30.3</b> Ejemplo: ajuste con loess</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html"><i class="fa fa-check"></i><b>31</b> Ejemplos de algoritmos</a>
<ul>
<li class="chapter" data-level="31.1" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#regresión-lineal"><i class="fa fa-check"></i><b>31.1</b> Regresión lineal</a>
<ul>
<li class="chapter" data-level="31.1.1" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#la-función-predict"><i class="fa fa-check"></i><b>31.1.1</b> La función <code>predict</code></a></li>
</ul></li>
<li class="chapter" data-level="31.2" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#ejercicios-50"><i class="fa fa-check"></i><b>31.2</b> Ejercicios</a></li>
<li class="chapter" data-level="31.3" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#regresión-logística"><i class="fa fa-check"></i><b>31.3</b> Regresión logística</a>
<ul>
<li class="chapter" data-level="31.3.1" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#modelos-lineales-generalizados"><i class="fa fa-check"></i><b>31.3.1</b> Modelos lineales generalizados</a></li>
<li class="chapter" data-level="31.3.2" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#regresión-logística-con-más-de-un-predictor"><i class="fa fa-check"></i><b>31.3.2</b> Regresión logística con más de un predictor</a></li>
</ul></li>
<li class="chapter" data-level="31.4" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#ejercicios-51"><i class="fa fa-check"></i><b>31.4</b> Ejercicios</a></li>
<li class="chapter" data-level="31.5" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#k-vecinos-más-cercanos-knn"><i class="fa fa-check"></i><b>31.5</b> k vecinos más cercanos (kNN)</a></li>
<li class="chapter" data-level="31.6" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#ejercicios-52"><i class="fa fa-check"></i><b>31.6</b> Ejercicios</a></li>
<li class="chapter" data-level="31.7" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#modelos-generativos"><i class="fa fa-check"></i><b>31.7</b> Modelos generativos</a>
<ul>
<li class="chapter" data-level="31.7.1" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#naive-bayes"><i class="fa fa-check"></i><b>31.7.1</b> Naive Bayes</a></li>
<li class="chapter" data-level="31.7.2" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#controlando-la-prevalencia"><i class="fa fa-check"></i><b>31.7.2</b> Controlando la prevalencia</a></li>
<li class="chapter" data-level="31.7.3" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#análisis-discriminante-cuadrático"><i class="fa fa-check"></i><b>31.7.3</b> Análisis discriminante cuadrático</a></li>
<li class="chapter" data-level="31.7.4" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#análisis-discriminante-lineal"><i class="fa fa-check"></i><b>31.7.4</b> Análisis discriminante lineal</a></li>
<li class="chapter" data-level="31.7.5" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#conexión-a-distancia"><i class="fa fa-check"></i><b>31.7.5</b> Conexión a distancia</a></li>
</ul></li>
<li class="chapter" data-level="31.8" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#estudio-de-caso-más-de-tres-clases"><i class="fa fa-check"></i><b>31.8</b> Estudio de caso: más de tres clases</a></li>
<li class="chapter" data-level="31.9" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#ejercicios-53"><i class="fa fa-check"></i><b>31.9</b> Ejercicios</a></li>
<li class="chapter" data-level="31.10" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#árboles-de-clasificación-y-regresión-cart"><i class="fa fa-check"></i><b>31.10</b> Árboles de clasificación y regresión (CART)</a>
<ul>
<li class="chapter" data-level="31.10.1" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#la-maldición-de-la-dimensionalidad"><i class="fa fa-check"></i><b>31.10.1</b> La maldición de la dimensionalidad</a></li>
<li class="chapter" data-level="31.10.2" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#motivación-cart"><i class="fa fa-check"></i><b>31.10.2</b> Motivación CART</a></li>
<li class="chapter" data-level="31.10.3" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#árboles-de-regresión"><i class="fa fa-check"></i><b>31.10.3</b> Árboles de regresión</a></li>
<li class="chapter" data-level="31.10.4" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#árboles-de-clasificación-decisión"><i class="fa fa-check"></i><b>31.10.4</b> Árboles de clasificación (decisión)</a></li>
</ul></li>
<li class="chapter" data-level="31.11" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#bosques-aleatorios"><i class="fa fa-check"></i><b>31.11</b> Bosques aleatorios</a></li>
<li class="chapter" data-level="31.12" data-path="ejemplos-de-algoritmos.html"><a href="ejemplos-de-algoritmos.html#ejercicios-54"><i class="fa fa-check"></i><b>31.12</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html"><i class="fa fa-check"></i><b>32</b> Machine learning en la práctica</a>
<ul>
<li class="chapter" data-level="32.1" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html#preprocesamiento"><i class="fa fa-check"></i><b>32.1</b> Preprocesamiento</a></li>
<li class="chapter" data-level="32.2" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html#k-vecino-más-cercano-y-bosque-aleatorio"><i class="fa fa-check"></i><b>32.2</b> k-vecino más cercano y bosque aleatorio</a></li>
<li class="chapter" data-level="32.3" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html#importancia-variable"><i class="fa fa-check"></i><b>32.3</b> Importancia variable</a></li>
<li class="chapter" data-level="32.4" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html#evaluaciones-visuales"><i class="fa fa-check"></i><b>32.4</b> Evaluaciones visuales</a></li>
<li class="chapter" data-level="32.5" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html#conjuntos"><i class="fa fa-check"></i><b>32.5</b> Conjuntos</a></li>
<li class="chapter" data-level="32.6" data-path="machine-learning-en-la-práctica.html"><a href="machine-learning-en-la-práctica.html#ejercicios-55"><i class="fa fa-check"></i><b>32.6</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html"><i class="fa fa-check"></i><b>33</b> Sets grandes de datos</a>
<ul>
<li class="chapter" data-level="33.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#matrix-algebra"><i class="fa fa-check"></i><b>33.1</b> Álgebra matricial</a>
<ul>
<li class="chapter" data-level="33.1.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#notación-2"><i class="fa fa-check"></i><b>33.1.1</b> Notación</a></li>
<li class="chapter" data-level="33.1.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#convertir-un-vector-en-una-matriz"><i class="fa fa-check"></i><b>33.1.2</b> Convertir un vector en una matriz</a></li>
<li class="chapter" data-level="33.1.3" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#resúmenes-de-filas-y-columnas"><i class="fa fa-check"></i><b>33.1.3</b> Resúmenes de filas y columnas</a></li>
<li class="chapter" data-level="33.1.4" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#apply"><i class="fa fa-check"></i><b>33.1.4</b> <code>apply</code></a></li>
<li class="chapter" data-level="33.1.5" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#filtrar-columnas-basado-en-resúmenes"><i class="fa fa-check"></i><b>33.1.5</b> Filtrar columnas basado en resúmenes</a></li>
<li class="chapter" data-level="33.1.6" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#indexación-con-matrices"><i class="fa fa-check"></i><b>33.1.6</b> Indexación con matrices</a></li>
<li class="chapter" data-level="33.1.7" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#binarizar-los-datos"><i class="fa fa-check"></i><b>33.1.7</b> Binarizar los datos</a></li>
<li class="chapter" data-level="33.1.8" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#vectorización-para-matrices"><i class="fa fa-check"></i><b>33.1.8</b> Vectorización para matrices</a></li>
<li class="chapter" data-level="33.1.9" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#operaciones-de-álgebra-matricial"><i class="fa fa-check"></i><b>33.1.9</b> Operaciones de álgebra matricial</a></li>
</ul></li>
<li class="chapter" data-level="33.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejercicios-56"><i class="fa fa-check"></i><b>33.2</b> Ejercicios</a></li>
<li class="chapter" data-level="33.3" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#distancia"><i class="fa fa-check"></i><b>33.3</b> Distancia</a>
<ul>
<li class="chapter" data-level="33.3.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#distancia-euclidiana"><i class="fa fa-check"></i><b>33.3.1</b> Distancia euclidiana</a></li>
<li class="chapter" data-level="33.3.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#distancia-en-dimensiones-superiores"><i class="fa fa-check"></i><b>33.3.2</b> Distancia en dimensiones superiores</a></li>
<li class="chapter" data-level="33.3.3" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejemplo-de-distancia-euclidiana"><i class="fa fa-check"></i><b>33.3.3</b> Ejemplo de distancia euclidiana</a></li>
<li class="chapter" data-level="33.3.4" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#predictor-space"><i class="fa fa-check"></i><b>33.3.4</b> Espacio predictor</a></li>
<li class="chapter" data-level="33.3.5" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#distancia-entre-predictores"><i class="fa fa-check"></i><b>33.3.5</b> Distancia entre predictores</a></li>
</ul></li>
<li class="chapter" data-level="33.4" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejercicios-57"><i class="fa fa-check"></i><b>33.4</b> Ejercicios</a></li>
<li class="chapter" data-level="33.5" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#reducción-de-dimensiones"><i class="fa fa-check"></i><b>33.5</b> Reducción de dimensiones</a>
<ul>
<li class="chapter" data-level="33.5.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#preservando-la-distancia"><i class="fa fa-check"></i><b>33.5.1</b> Preservando la distancia</a></li>
<li class="chapter" data-level="33.5.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#transformaciones-lineales-avanzado"><i class="fa fa-check"></i><b>33.5.2</b> Transformaciones lineales (avanzado)</a></li>
<li class="chapter" data-level="33.5.3" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#transformaciones-ortogonales-avanzado"><i class="fa fa-check"></i><b>33.5.3</b> Transformaciones ortogonales (avanzado)</a></li>
<li class="chapter" data-level="33.5.4" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#pca"><i class="fa fa-check"></i><b>33.5.4</b> Análisis de componentes principales</a></li>
<li class="chapter" data-level="33.5.5" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejemplo-de-lirios"><i class="fa fa-check"></i><b>33.5.5</b> Ejemplo de lirios</a></li>
<li class="chapter" data-level="33.5.6" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejemplo-de-mnist"><i class="fa fa-check"></i><b>33.5.6</b> Ejemplo de MNIST</a></li>
</ul></li>
<li class="chapter" data-level="33.6" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejercicios-58"><i class="fa fa-check"></i><b>33.6</b> Ejercicios</a></li>
<li class="chapter" data-level="33.7" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#sistemas-de-recomendación"><i class="fa fa-check"></i><b>33.7</b> Sistemas de recomendación</a>
<ul>
<li class="chapter" data-level="33.7.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#datos-de-movielens"><i class="fa fa-check"></i><b>33.7.1</b> Datos de Movielens</a></li>
<li class="chapter" data-level="33.7.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#sistemas-de-recomendación-como-un-desafío-de-machine-learning"><i class="fa fa-check"></i><b>33.7.2</b> Sistemas de recomendación como un desafío de <em>machine learning</em></a></li>
<li class="chapter" data-level="33.7.3" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#netflix-loss-function"><i class="fa fa-check"></i><b>33.7.3</b> Función de pérdida</a></li>
<li class="chapter" data-level="33.7.4" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#un-primer-modelo"><i class="fa fa-check"></i><b>33.7.4</b> Un primer modelo</a></li>
<li class="chapter" data-level="33.7.5" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#modelando-los-efectos-de-películas"><i class="fa fa-check"></i><b>33.7.5</b> Modelando los efectos de películas</a></li>
<li class="chapter" data-level="33.7.6" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#efectos-de-usuario"><i class="fa fa-check"></i><b>33.7.6</b> Efectos de usuario</a></li>
</ul></li>
<li class="chapter" data-level="33.8" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejercicios-59"><i class="fa fa-check"></i><b>33.8</b> Ejercicios</a></li>
<li class="chapter" data-level="33.9" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#regularización"><i class="fa fa-check"></i><b>33.9</b> Regularización</a>
<ul>
<li class="chapter" data-level="33.9.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#motivación"><i class="fa fa-check"></i><b>33.9.1</b> Motivación</a></li>
<li class="chapter" data-level="33.9.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#mínimos-cuadrados-penalizados"><i class="fa fa-check"></i><b>33.9.2</b> Mínimos cuadrados penalizados</a></li>
<li class="chapter" data-level="33.9.3" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#cómo-elegir-los-términos-de-penalización"><i class="fa fa-check"></i><b>33.9.3</b> Cómo elegir los términos de penalización</a></li>
</ul></li>
<li class="chapter" data-level="33.10" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejercicios-60"><i class="fa fa-check"></i><b>33.10</b> Ejercicios</a></li>
<li class="chapter" data-level="33.11" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#factorización-de-matrices"><i class="fa fa-check"></i><b>33.11</b> Factorización de matrices</a>
<ul>
<li class="chapter" data-level="33.11.1" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#factor-analysis"><i class="fa fa-check"></i><b>33.11.1</b> Análisis de factores</a></li>
<li class="chapter" data-level="33.11.2" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#conexión-a-svd-y-pca"><i class="fa fa-check"></i><b>33.11.2</b> Conexión a SVD y PCA</a></li>
</ul></li>
<li class="chapter" data-level="33.12" data-path="sets-grandes-de-datos.html"><a href="sets-grandes-de-datos.html#ejercicios-61"><i class="fa fa-check"></i><b>33.12</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>34</b> Agrupación</a>
<ul>
<li class="chapter" data-level="34.1" data-path="clustering.html"><a href="clustering.html#agrupación-jerárquica"><i class="fa fa-check"></i><b>34.1</b> Agrupación jerárquica</a></li>
<li class="chapter" data-level="34.2" data-path="clustering.html"><a href="clustering.html#k-means"><i class="fa fa-check"></i><b>34.2</b> k-means</a></li>
<li class="chapter" data-level="34.3" data-path="clustering.html"><a href="clustering.html#mapas-de-calor"><i class="fa fa-check"></i><b>34.3</b> Mapas de calor</a></li>
<li class="chapter" data-level="34.4" data-path="clustering.html"><a href="clustering.html#filtrando-atributos"><i class="fa fa-check"></i><b>34.4</b> Filtrando atributos</a></li>
<li class="chapter" data-level="34.5" data-path="clustering.html"><a href="clustering.html#ejercicios-62"><i class="fa fa-check"></i><b>34.5</b> Ejercicios</a></li>
</ul></li>
<li class="part"><span><b>VI Herramientas de productividad</b></span></li>
<li class="chapter" data-level="35" data-path="introducción-a-las-herramientas-de-productividad.html"><a href="introducción-a-las-herramientas-de-productividad.html"><i class="fa fa-check"></i><b>35</b> Introducción a las herramientas de productividad</a></li>
<li class="chapter" data-level="36" data-path="installing-r-rstudio.html"><a href="installing-r-rstudio.html"><i class="fa fa-check"></i><b>36</b> Instalación de R y RStudio</a>
<ul>
<li class="chapter" data-level="36.1" data-path="installing-r-rstudio.html"><a href="installing-r-rstudio.html#instalando-r"><i class="fa fa-check"></i><b>36.1</b> Instalando R</a></li>
<li class="chapter" data-level="36.2" data-path="installing-r-rstudio.html"><a href="installing-r-rstudio.html#instalación-de-rstudio"><i class="fa fa-check"></i><b>36.2</b> Instalación de RStudio</a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="accediendo-al-terminal-e-instalando-git.html"><a href="accediendo-al-terminal-e-instalando-git.html"><i class="fa fa-check"></i><b>37</b> Accediendo al terminal e instalando Git</a>
<ul>
<li class="chapter" data-level="37.1" data-path="accediendo-al-terminal-e-instalando-git.html"><a href="accediendo-al-terminal-e-instalando-git.html#terminal-on-mac"><i class="fa fa-check"></i><b>37.1</b> Accediendo al terminal en una Mac</a></li>
<li class="chapter" data-level="37.2" data-path="accediendo-al-terminal-e-instalando-git.html"><a href="accediendo-al-terminal-e-instalando-git.html#instalando-git-en-la-mac"><i class="fa fa-check"></i><b>37.2</b> Instalando Git en la Mac</a></li>
<li class="chapter" data-level="37.3" data-path="accediendo-al-terminal-e-instalando-git.html"><a href="accediendo-al-terminal-e-instalando-git.html#instalación-de-git-y-git-bash-en-windows"><i class="fa fa-check"></i><b>37.3</b> Instalación de Git y Git Bash en Windows</a></li>
<li class="chapter" data-level="37.4" data-path="accediendo-al-terminal-e-instalando-git.html"><a href="accediendo-al-terminal-e-instalando-git.html#terminal-on-windows"><i class="fa fa-check"></i><b>37.4</b> Accediendo el terminal en Windows</a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="unix.html"><a href="unix.html"><i class="fa fa-check"></i><b>38</b> Organizando con Unix</a>
<ul>
<li class="chapter" data-level="38.1" data-path="unix.html"><a href="unix.html#convención-de-nomenclatura"><i class="fa fa-check"></i><b>38.1</b> Convención de nomenclatura</a></li>
<li class="chapter" data-level="38.2" data-path="unix.html"><a href="unix.html#the-terminal"><i class="fa fa-check"></i><b>38.2</b> El terminal</a></li>
<li class="chapter" data-level="38.3" data-path="unix.html"><a href="unix.html#filesystem"><i class="fa fa-check"></i><b>38.3</b> El sistema de archivos</a>
<ul>
<li class="chapter" data-level="38.3.1" data-path="unix.html"><a href="unix.html#directorios-y-subdirectorios"><i class="fa fa-check"></i><b>38.3.1</b> Directorios y subdirectorios</a></li>
<li class="chapter" data-level="38.3.2" data-path="unix.html"><a href="unix.html#el-directorio-home"><i class="fa fa-check"></i><b>38.3.2</b> El directorio <em>home</em></a></li>
<li class="chapter" data-level="38.3.3" data-path="unix.html"><a href="unix.html#working-directory"><i class="fa fa-check"></i><b>38.3.3</b> Directorio de trabajo</a></li>
<li class="chapter" data-level="38.3.4" data-path="unix.html"><a href="unix.html#paths"><i class="fa fa-check"></i><b>38.3.4</b> Rutas</a></li>
</ul></li>
<li class="chapter" data-level="38.4" data-path="unix.html"><a href="unix.html#comandos-de-unix"><i class="fa fa-check"></i><b>38.4</b> Comandos de Unix</a>
<ul>
<li class="chapter" data-level="38.4.1" data-path="unix.html"><a href="unix.html#ls-listado-de-contenido-del-directorio"><i class="fa fa-check"></i><b>38.4.1</b> <code>ls</code>: Listado de contenido del directorio</a></li>
<li class="chapter" data-level="38.4.2" data-path="unix.html"><a href="unix.html#mkdir-y-rmdir-crear-y-eliminar-un-directorio"><i class="fa fa-check"></i><b>38.4.2</b> <code>mkdir</code> y <code>rmdir</code>: crear y eliminar un directorio</a></li>
<li class="chapter" data-level="38.4.3" data-path="unix.html"><a href="unix.html#cd-navegando-por-el-sistema-de-archivos-cambiando-directorios"><i class="fa fa-check"></i><b>38.4.3</b> <code>cd</code>: navegando por el sistema de archivos cambiando directorios</a></li>
</ul></li>
<li class="chapter" data-level="38.5" data-path="unix.html"><a href="unix.html#algunos-ejemplos"><i class="fa fa-check"></i><b>38.5</b> Algunos ejemplos</a></li>
<li class="chapter" data-level="38.6" data-path="unix.html"><a href="unix.html#más-comandos-de-unix"><i class="fa fa-check"></i><b>38.6</b> Más comandos de Unix</a>
<ul>
<li class="chapter" data-level="38.6.1" data-path="unix.html"><a href="unix.html#mv-mover-archivos"><i class="fa fa-check"></i><b>38.6.1</b> <code>mv</code>: mover archivos</a></li>
<li class="chapter" data-level="38.6.2" data-path="unix.html"><a href="unix.html#cp-copiando-archivos"><i class="fa fa-check"></i><b>38.6.2</b> <code>cp</code>: copiando archivos</a></li>
<li class="chapter" data-level="38.6.3" data-path="unix.html"><a href="unix.html#rm-eliminar-archivos"><i class="fa fa-check"></i><b>38.6.3</b> <code>rm</code>: eliminar archivos</a></li>
<li class="chapter" data-level="38.6.4" data-path="unix.html"><a href="unix.html#less-mirando-un-archivo"><i class="fa fa-check"></i><b>38.6.4</b> <code>less</code>: mirando un archivo</a></li>
</ul></li>
<li class="chapter" data-level="38.7" data-path="unix.html"><a href="unix.html#prep-project"><i class="fa fa-check"></i><b>38.7</b> Preparación para un proyecto de ciencia de datos</a></li>
<li class="chapter" data-level="38.8" data-path="unix.html"><a href="unix.html#unix-avanzado"><i class="fa fa-check"></i><b>38.8</b> Unix avanzado</a>
<ul>
<li class="chapter" data-level="38.8.1" data-path="unix.html"><a href="unix.html#argumentos"><i class="fa fa-check"></i><b>38.8.1</b> Argumentos</a></li>
<li class="chapter" data-level="38.8.2" data-path="unix.html"><a href="unix.html#obtener-ayuda"><i class="fa fa-check"></i><b>38.8.2</b> Obtener ayuda</a></li>
<li class="chapter" data-level="38.8.3" data-path="unix.html"><a href="unix.html#el-pipe-1"><i class="fa fa-check"></i><b>38.8.3</b> El <em>pipe</em></a></li>
<li class="chapter" data-level="38.8.4" data-path="unix.html"><a href="unix.html#comodines"><i class="fa fa-check"></i><b>38.8.4</b> Comodines</a></li>
<li class="chapter" data-level="38.8.5" data-path="unix.html"><a href="unix.html#variables-de-entorno"><i class="fa fa-check"></i><b>38.8.5</b> Variables de entorno</a></li>
<li class="chapter" data-level="38.8.6" data-path="unix.html"><a href="unix.html#shells"><i class="fa fa-check"></i><b>38.8.6</b> <em>Shells</em></a></li>
<li class="chapter" data-level="38.8.7" data-path="unix.html"><a href="unix.html#ejecutables"><i class="fa fa-check"></i><b>38.8.7</b> Ejecutables</a></li>
<li class="chapter" data-level="38.8.8" data-path="unix.html"><a href="unix.html#permisos-y-tipos-de-archivo"><i class="fa fa-check"></i><b>38.8.8</b> Permisos y tipos de archivo</a></li>
<li class="chapter" data-level="38.8.9" data-path="unix.html"><a href="unix.html#comandos-que-deben-aprender"><i class="fa fa-check"></i><b>38.8.9</b> Comandos que deben aprender</a></li>
<li class="chapter" data-level="38.8.10" data-path="unix.html"><a href="unix.html#manipulación-de-archivos-en-r"><i class="fa fa-check"></i><b>38.8.10</b> Manipulación de archivos en R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="39" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>39</b> Git y GitHub</a>
<ul>
<li class="chapter" data-level="39.1" data-path="git.html"><a href="git.html#por-qué-usar-git-y-github"><i class="fa fa-check"></i><b>39.1</b> ¿Por qué usar Git y GitHub?</a></li>
<li class="chapter" data-level="39.2" data-path="git.html"><a href="git.html#cuentas-github"><i class="fa fa-check"></i><b>39.2</b> Cuentas GitHub</a></li>
<li class="chapter" data-level="39.3" data-path="git.html"><a href="git.html#github-repos"><i class="fa fa-check"></i><b>39.3</b> Repositorios de GitHub</a></li>
<li class="chapter" data-level="39.4" data-path="git.html"><a href="git.html#git-overview"><i class="fa fa-check"></i><b>39.4</b> Descripción general de Git</a>
<ul>
<li class="chapter" data-level="39.4.1" data-path="git.html"><a href="git.html#clonar"><i class="fa fa-check"></i><b>39.4.1</b> Clonar</a></li>
</ul></li>
<li class="chapter" data-level="39.5" data-path="git.html"><a href="git.html#init"><i class="fa fa-check"></i><b>39.5</b> Inicializando un directorio Git</a></li>
<li class="chapter" data-level="39.6" data-path="git.html"><a href="git.html#rstudio-git"><i class="fa fa-check"></i><b>39.6</b> Usando Git y GitHub en RStudio</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><i class="fa fa-check"></i><b>40</b> Proyectos reproducibles con RStudio y R Markdown</a>
<ul>
<li class="chapter" data-level="40.1" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#proyectos-de-rstudio"><i class="fa fa-check"></i><b>40.1</b> Proyectos de RStudio</a></li>
<li class="chapter" data-level="40.2" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#r-markdown"><i class="fa fa-check"></i><b>40.2</b> R Markdown</a>
<ul>
<li class="chapter" data-level="40.2.1" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#el-encabezado"><i class="fa fa-check"></i><b>40.2.1</b> El encabezado</a></li>
<li class="chapter" data-level="40.2.2" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#fragmentos-de-código-r"><i class="fa fa-check"></i><b>40.2.2</b> Fragmentos de código R</a></li>
<li class="chapter" data-level="40.2.3" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#opciones-globales"><i class="fa fa-check"></i><b>40.2.3</b> Opciones globales</a></li>
<li class="chapter" data-level="40.2.4" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#knitr"><i class="fa fa-check"></i><b>40.2.4</b> knitR</a></li>
<li class="chapter" data-level="40.2.5" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#más-sobre-r-markdown"><i class="fa fa-check"></i><b>40.2.5</b> Más sobre R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="40.3" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#organizing"><i class="fa fa-check"></i><b>40.3</b> Organizando un proyecto de ciencia de datos</a>
<ul>
<li class="chapter" data-level="40.3.1" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#crear-directorios-en-unix"><i class="fa fa-check"></i><b>40.3.1</b> Crear directorios en Unix</a></li>
<li class="chapter" data-level="40.3.2" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#crear-un-proyecto-en-rstudio"><i class="fa fa-check"></i><b>40.3.2</b> Crear un proyecto en RStudio</a></li>
<li class="chapter" data-level="40.3.3" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#editar-algunos-scripts-de-r"><i class="fa fa-check"></i><b>40.3.3</b> Editar algunos scripts de R</a></li>
<li class="chapter" data-level="40.3.4" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#crear-más-directorios-usando-unix"><i class="fa fa-check"></i><b>40.3.4</b> Crear más directorios usando Unix</a></li>
<li class="chapter" data-level="40.3.5" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#agregar-un-archivo-readme"><i class="fa fa-check"></i><b>40.3.5</b> Agregar un archivo README</a></li>
<li class="chapter" data-level="40.3.6" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#inicializando-un-directorio-git"><i class="fa fa-check"></i><b>40.3.6</b> Inicializando un directorio Git</a></li>
<li class="chapter" data-level="40.3.7" data-path="proyectos-reproducibles-con-rstudio-y-r-markdown.html"><a href="proyectos-reproducibles-con-rstudio-y-r-markdown.html#add-commit-y-push-archivos-con-rstudio"><i class="fa fa-check"></i><b>40.3.7</b> <em>Add</em>, <em>commit</em> y <em>push</em> archivos con RStudio</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a la ciencia de datos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="procesamiento-de-cadenas" class="section level1" number="24">
<h1><span class="header-section-number">Capítulo 24</span> Procesamiento de cadenas</h1>
<p>Uno de los desafíos más comunes del <em>wrangling</em> de datos consiste en extraer datos numéricos contenidos en cadenas de caracteres y convertirlos en las representaciones numéricas requeridas para hacer gráficos, calcular resúmenes o ajustar modelos en R. También, es común tener que procesar texto no organizado y convertirlo en nombres de variables entendibles o variables categóricas. Muchos de los desafíos de procesamiento de cadenas que enfrentan los científicos de datos son únicos y a menudo inesperados. Por lo tanto, es bastante ambicioso escribir una sección completa sobre este tema. Aquí usamos una serie de estudios de casos que nos ayudan a demostrar cómo el procesamiento de cadenas es un paso necesario para muchos desafíos de disputas de datos. Específicamente, para los ejemplos <code>murders</code>, <code>heights</code> y <code>research_funding_rates</code>, describimos el proceso de convertir los datos sin procesar originales, que aún no hemos mostrados, en los <em>data frames</em> que hemos estudiado en este libro.</p>
<p>Al repasar estos estudios de caso, cubriremos algunas de las tareas más comunes en el procesamiento de cadenas, incluyendo cómo extraer números de cadenas, eliminar caracteres no deseados del texto, encontrar y reemplazar caracteres, extraer partes específicas de cadenas, convertir texto de forma libre a formatos más uniformes y dividir cadenas en múltiples valores.</p>
<p>Base R incluye funciones para realizar todas estas tareas. Sin embargo, no siguen una convención unificadora, lo que las hace un poco difíciles de memorizar y usar. El paquete <strong>stringr</strong> reempaqueta esta funcionalidad, pero utiliza un enfoque más consistente de nombrar funciones y ordenar sus argumentos. Por ejemplo, en <strong>stringr</strong>, todas las funciones de procesamiento de cadenas comienzan con <code>str_</code>. Esto significa que si escriben <code>str_</code> y presionan <em>tab</em>, R se completará automáticamente y mostrará todas las funciones disponibles. Como resultado, no tenemos que memorizar todos los nombres de las funciones. Otra ventaja es que en las funciones de este paquete, la cadena que se procesa siempre es el primer argumento, que significa que podemos usar el <em>pipe</em> más fácilmente. Por lo tanto, comenzaremos describiendo cómo usar las funciones en el paquete <strong>stringr</strong>.</p>
<p>La mayoría de los ejemplos provendrán del segundo estudio de caso que trata sobre las alturas autoreportadas por los estudiantes y la mayor parte del capítulo se dedica al aprendizaje de expresiones regulares (<em>regular expressions</em> o <em>regex</em> en inglés) y funciones en el paquete <strong>stringr</strong>.</p>
<div id="stringr" class="section level2" number="24.1">
<h2><span class="header-section-number">24.1</span> El paquete stringr</h2>
<div class="sourceCode" id="cb793"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb793-1"><a href="procesamiento-de-cadenas.html#cb793-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb793-2"><a href="procesamiento-de-cadenas.html#cb793-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>En general, las tareas de procesamiento de cadenas se pueden dividir en <strong>detectar</strong>, <strong>localizar</strong>, <strong>extraer</strong> o <strong>reemplazar</strong> patrones en cadenas. Veremos varios ejemplos. La siguiente tabla incluye las funciones disponibles en el paquete <strong>stringr</strong>. Las dividimos por tarea. También incluimos el equivalente de base R cuando está disponible.</p>
<p>Todas estas funciones toman un vector de caracteres como primer argumento. Además, para cada función, las operaciones se vectorizan: la operación se aplica a cada cadena en el vector.</p>
<p>Finalmente, tengan en cuenta que en esta tabla mencionamos <em>groups</em>. Estos se explicarán en la Sección <a href="procesamiento-de-cadenas.html#groups">24.5.9</a>.</p>
<table>
<colgroup>
<col width="19%" />
<col width="13%" />
<col width="50%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th>stringr</th>
<th>Tarea</th>
<th>Descripción</th>
<th>Base R</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str_detect</code></td>
<td>Detectar</td>
<td>¿El patrón está en la cadena?</td>
<td><code>grepl</code></td>
</tr>
<tr class="even">
<td><code>str_which</code></td>
<td>Detectar</td>
<td>Devuelve el índice de entradas que contienen el patrón.</td>
<td><code>grep</code></td>
</tr>
<tr class="odd">
<td><code>str_subset</code></td>
<td>Detectar</td>
<td>Devuelve el subconjunto de cadenas que contienen el patrón.</td>
<td><code>grep</code> con <code>value = TRUE</code></td>
</tr>
<tr class="even">
<td><code>str_locate</code></td>
<td>Localizar</td>
<td>Devuelve las posiciones de la primera aparición del patrón en una cadena.</td>
<td><code>regexpr</code></td>
</tr>
<tr class="odd">
<td><code>str_locate_all</code></td>
<td>Localizar</td>
<td>Devuelve la posición de todas las apariciones del patrón en una cadena.</td>
<td><code>gregexpr</code></td>
</tr>
<tr class="even">
<td><code>str_view</code></td>
<td>Localizar</td>
<td>Muestra la primera parte de la cadena que corresponde con el patrón.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_view_all</code></td>
<td>Localizar</td>
<td>Muestra todas las partes de la cadena que corresponden con el patrón.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_extract</code></td>
<td>Extraer</td>
<td>Extrae la primera parte de la cadena que corresponde con el patrón.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_extract_all</code></td>
<td>Extraer</td>
<td>Extrae todas las partes de la cadena que corresponden con el patrón.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_match</code></td>
<td>Extraer</td>
<td>Extrae la primera parte de la cadena que corresponde con los grupos y los patrones definidos por los grupos.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_match_all</code></td>
<td>Extraer</td>
<td>Extrae todas las partes de la cadena que corresponden con los grupos y los patrones definidos por los grupos.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_sub</code></td>
<td>Extraer</td>
<td>Extrae una subcadena.</td>
<td><code>substring</code></td>
</tr>
<tr class="odd">
<td><code>str_split</code></td>
<td>Extraer</td>
<td>Divide una cadena en una lista con partes separadas por patrón.</td>
<td><code>strsplit</code></td>
</tr>
<tr class="even">
<td><code>str_split_fixed</code></td>
<td>Extraer</td>
<td>Divide una cadena en una matriz con partes separadas por patrón.</td>
<td><code>strsplit</code> con <code>fixed = TRUE</code></td>
</tr>
<tr class="odd">
<td><code>str_count</code></td>
<td>Describir</td>
<td>Cuenta el número de veces que aparece un patrón en una cadena.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_length</code></td>
<td>Describir</td>
<td>Número de caracteres en la cadena.</td>
<td><code>nchar</code></td>
</tr>
<tr class="odd">
<td><code>str_replace</code></td>
<td>Reemplazar</td>
<td>Reemplaza la primera parte de una cadena que corresponde con un patrón con otro patrón.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_replace_all</code></td>
<td>Reemplazar</td>
<td>Reemplaza todas las partes de una cadena que corresponden con un patrón con otro patrón.</td>
<td><code>gsub</code></td>
</tr>
<tr class="odd">
<td><code>str_to_upper</code></td>
<td>Reemplazar</td>
<td>Cambia todos los caracteres a mayúsculas.</td>
<td><code>toupper</code></td>
</tr>
<tr class="even">
<td><code>str_to_lower</code></td>
<td>Reemplazar</td>
<td>Cambia todos los caracteres a minúsculas.</td>
<td><code>tolower</code></td>
</tr>
<tr class="odd">
<td><code>str_to_title</code></td>
<td>Reemplazar</td>
<td>Cambia el primer carácter a mayúscula y el resto a minúscula.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_replace_na</code></td>
<td>Reemplazar</td>
<td>Reemplaza todo los <code>NA</code>s con un nuevo valor.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_trim</code></td>
<td>Reemplazar</td>
<td>Elimina el espacio en blanco del inicio y del final de la cadena.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_c</code></td>
<td>Manipular</td>
<td>Une múltiples cadenas.</td>
<td><code>paste0</code></td>
</tr>
<tr class="odd">
<td><code>str_conv</code></td>
<td>Manipular</td>
<td>Cambia la codificación de la cadena.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_sort</code></td>
<td>Manipular</td>
<td>Pone el vector en orden alfabético.</td>
<td><code>sort</code></td>
</tr>
<tr class="odd">
<td><code>str_order</code></td>
<td>Manipular</td>
<td>Índice necesario para ordenar el vector alfabéticamente.</td>
<td><code>order</code></td>
</tr>
<tr class="even">
<td><code>str_trunc</code></td>
<td>Manipular</td>
<td>Trunca una cadena a un tamaño fijo.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_pad</code></td>
<td>Manipular</td>
<td>Agrega espacio en blanco a la cadena para que tenga un tamaño fijo.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_dup</code></td>
<td>Manipular</td>
<td>Repite una cadena.</td>
<td><code>rep</code> luego <code>paste</code></td>
</tr>
<tr class="odd">
<td><code>str_wrap</code></td>
<td>Manipular</td>
<td>Pone la cadena en párrafos formateados.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_interp</code></td>
<td>Manipular</td>
<td>Interpolación de cadenas.</td>
<td><code>sprintf</code></td>
</tr>
</tbody>
</table>
</div>
<div id="estudio-de-caso-1-datos-de-asesinatos-en-ee.-uu." class="section level2" number="24.2">
<h2><span class="header-section-number">24.2</span> Estudio de caso 1: datos de asesinatos en EE. UU.</h2>
<p>En esta sección presentamos algunos de los desafíos más sencillos de procesamiento de cadenas, con los siguientes sets de datos como ejemplo:</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="procesamiento-de-cadenas.html#cb794-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb794-2"><a href="procesamiento-de-cadenas.html#cb794-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://en.wikipedia.org/w/index.php?title=&quot;</span>,</span>
<span id="cb794-3"><a href="procesamiento-de-cadenas.html#cb794-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Gun_violence_in_the_United_States_by_state&quot;</span>,</span>
<span id="cb794-4"><a href="procesamiento-de-cadenas.html#cb794-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;&amp;direction=prev&amp;oldid=810166167&quot;</span>)</span>
<span id="cb794-5"><a href="procesamiento-de-cadenas.html#cb794-5" aria-hidden="true" tabindex="-1"></a>murders_raw <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url) <span class="sc">%&gt;%</span></span>
<span id="cb794-6"><a href="procesamiento-de-cadenas.html#cb794-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;table&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb794-7"><a href="procesamiento-de-cadenas.html#cb794-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb794-8"><a href="procesamiento-de-cadenas.html#cb794-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;state&quot;</span>, <span class="st">&quot;population&quot;</span>, <span class="st">&quot;total&quot;</span>, <span class="st">&quot;murder_rate&quot;</span>))</span></code></pre></div>
<p>El código anterior muestra el primer paso para construir el set de datos,</p>
<div class="sourceCode" id="cb795"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb795-1"><a href="procesamiento-de-cadenas.html#cb795-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb795-2"><a href="procesamiento-de-cadenas.html#cb795-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(murders)</span></code></pre></div>
<p>de los datos sin procesar, que se extrajeron de una página de Wikipedia.</p>
<p>En general, el procesamiento de cadenas implica una cadena y un patrón. En R, generalmente almacenamos cadenas en un vector de caracteres como <code>murders$population</code>. Las primeras tres cadenas en este vector definidas por la variable de población son:</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="procesamiento-de-cadenas.html#cb796-1" aria-hidden="true" tabindex="-1"></a>murders_raw<span class="sc">$</span>population[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb796-2"><a href="procesamiento-de-cadenas.html#cb796-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4,853,875&quot; &quot;737,709&quot;   &quot;6,817,565&quot;</span></span></code></pre></div>
<p>Forzar una conversión usando <code>as.numeric</code> no funciona aquí:</p>
<div class="sourceCode" id="cb797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb797-1"><a href="procesamiento-de-cadenas.html#cb797-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(murders_raw<span class="sc">$</span>population[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span>
<span id="cb797-2"><a href="procesamiento-de-cadenas.html#cb797-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: NAs introducidos por coerción</span></span>
<span id="cb797-3"><a href="procesamiento-de-cadenas.html#cb797-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA NA NA</span></span></code></pre></div>
<p>Esto se debe a las comas <code>,</code>. El procesamiento de cadenas que queremos hacer aquí es eliminar el <strong>patrón</strong> " <code>,</code>" de las <strong>cadenas</strong> en <code>murders_raw$population</code> y luego forzar una conversión de los números.</p>
<p>Podemos usar la función <code>str_detect</code> para ver que dos de las tres columnas tienen comas en las entradas:</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="procesamiento-de-cadenas.html#cb798-1" aria-hidden="true" tabindex="-1"></a>commas <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">any</span>(<span class="fu">str_detect</span>(x, <span class="st">&quot;,&quot;</span>))</span>
<span id="cb798-2"><a href="procesamiento-de-cadenas.html#cb798-2" aria-hidden="true" tabindex="-1"></a>murders_raw <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(commas)</span>
<span id="cb798-3"><a href="procesamiento-de-cadenas.html#cb798-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 4</span></span>
<span id="cb798-4"><a href="procesamiento-de-cadenas.html#cb798-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state population total murder_rate</span></span>
<span id="cb798-5"><a href="procesamiento-de-cadenas.html#cb798-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt; &lt;lgl&gt;      &lt;lgl&gt; &lt;lgl&gt;      </span></span>
<span id="cb798-6"><a href="procesamiento-de-cadenas.html#cb798-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 FALSE TRUE       TRUE  FALSE</span></span></code></pre></div>
<p>Entonces podemos usar la función <code>str_replace_all</code> para eliminarlas:</p>
<div class="sourceCode" id="cb799"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb799-1"><a href="procesamiento-de-cadenas.html#cb799-1" aria-hidden="true" tabindex="-1"></a>test_1 <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(murders_raw<span class="sc">$</span>population, <span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb799-2"><a href="procesamiento-de-cadenas.html#cb799-2" aria-hidden="true" tabindex="-1"></a>test_1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(test_1)</span></code></pre></div>
<p>De ahí podemos usar <code>mutate_all</code> para aplicar esta operación a cada columna, ya que no afectará a las columnas sin comas.</p>
<p>Resulta que esta operación es tan común que <code>readr</code> incluye la función <code>parse_number</code> específicamente para eliminar caracteres no numéricos antes de forzar una conversión:</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="procesamiento-de-cadenas.html#cb800-1" aria-hidden="true" tabindex="-1"></a>test_2 <span class="ot">&lt;-</span> <span class="fu">parse_number</span>(murders_raw<span class="sc">$</span>population)</span>
<span id="cb800-2"><a href="procesamiento-de-cadenas.html#cb800-2" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(test_1, test_2)</span>
<span id="cb800-3"><a href="procesamiento-de-cadenas.html#cb800-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Entonces podemos obtener nuestra tabla deseada usando:</p>
<div class="sourceCode" id="cb801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb801-1"><a href="procesamiento-de-cadenas.html#cb801-1" aria-hidden="true" tabindex="-1"></a>murders_new <span class="ot">&lt;-</span> murders_raw <span class="sc">%&gt;%</span> <span class="fu">mutate_at</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, parse_number)</span>
<span id="cb801-2"><a href="procesamiento-de-cadenas.html#cb801-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(murders_new)</span>
<span id="cb801-3"><a href="procesamiento-de-cadenas.html#cb801-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 x 4</span></span>
<span id="cb801-4"><a href="procesamiento-de-cadenas.html#cb801-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state      population total murder_rate</span></span>
<span id="cb801-5"><a href="procesamiento-de-cadenas.html#cb801-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb801-6"><a href="procesamiento-de-cadenas.html#cb801-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Alabama       4853875   348         7.2</span></span>
<span id="cb801-7"><a href="procesamiento-de-cadenas.html#cb801-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Alaska         737709    59         8  </span></span>
<span id="cb801-8"><a href="procesamiento-de-cadenas.html#cb801-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Arizona       6817565   309         4.5</span></span>
<span id="cb801-9"><a href="procesamiento-de-cadenas.html#cb801-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Arkansas      2977853   181         6.1</span></span>
<span id="cb801-10"><a href="procesamiento-de-cadenas.html#cb801-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 California   38993940  1861         4.8</span></span>
<span id="cb801-11"><a href="procesamiento-de-cadenas.html#cb801-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1 more row</span></span></code></pre></div>
<p>Este caso es relativamente sencillo en comparación con los desafíos de procesamiento de cadenas que normalmente enfrentamos en la ciencia de datos. El siguiente ejemplo es bastante complejo y ofrece varios retos que nos permitirán aprender muchas técnicas de procesamiento de cadenas.</p>
</div>
<div id="estudio-de-caso-2-alturas-autoreportadas" class="section level2" number="24.3">
<h2><span class="header-section-number">24.3</span> Estudio de caso 2: alturas autoreportadas</h2>
<p>El paquete <strong>dslabs</strong> incluye el set de datos sin procesar del cual se obtuvo el set de datos de alturas. Pueden cargarlo así:</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="procesamiento-de-cadenas.html#cb802-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(reported_heights)</span></code></pre></div>
<p>Estas alturas se obtuvieron mediante un formulario web en el que se les pidió a estudiantes que ingresaran sus alturas. Podían ingresar cualquier cosa, pero las instrucciones pedían <em>altura en pulgadas</em>, un número. Recopilamos 1,095 respuestas, pero desafortunadamente el vector de columna con las alturas reportadas tenía varias entradas no numéricas y como resultado se convirtió en un vector de caracteres:</p>
<div class="sourceCode" id="cb803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb803-1"><a href="procesamiento-de-cadenas.html#cb803-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(reported_heights<span class="sc">$</span>height)</span>
<span id="cb803-2"><a href="procesamiento-de-cadenas.html#cb803-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span></code></pre></div>
<p>Si intentamos analizarlo en números, recibimos una advertencia:</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="procesamiento-de-cadenas.html#cb804-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(reported_heights<span class="sc">$</span>height)</span>
<span id="cb804-2"><a href="procesamiento-de-cadenas.html#cb804-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: NAs introducidos por coerción</span></span></code></pre></div>
<p>Aunque la mayoría de los valores parecen ser la altura en pulgadas según lo solicitado:</p>
<div class="sourceCode" id="cb805"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb805-1"><a href="procesamiento-de-cadenas.html#cb805-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(x)</span>
<span id="cb805-2"><a href="procesamiento-de-cadenas.html#cb805-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 75 70 68 74 61 65</span></span></code></pre></div>
<p>terminamos con muchos <code>NA</code>s:</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="procesamiento-de-cadenas.html#cb806-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(x))</span>
<span id="cb806-2"><a href="procesamiento-de-cadenas.html#cb806-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 81</span></span></code></pre></div>
<p>Podemos ver algunas de las entradas que no se convierten correctamente utilizando <code>filter</code> para mantener solo las entradas que resultan en <code>NA</code>s:</p>
<div class="sourceCode" id="cb807"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb807-1"><a href="procesamiento-de-cadenas.html#cb807-1" aria-hidden="true" tabindex="-1"></a>reported_heights <span class="sc">%&gt;%</span></span>
<span id="cb807-2"><a href="procesamiento-de-cadenas.html#cb807-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_height =</span> <span class="fu">as.numeric</span>(height)) <span class="sc">%&gt;%</span></span>
<span id="cb807-3"><a href="procesamiento-de-cadenas.html#cb807-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(new_height)) <span class="sc">%&gt;%</span></span>
<span id="cb807-4"><a href="procesamiento-de-cadenas.html#cb807-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb807-5"><a href="procesamiento-de-cadenas.html#cb807-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             time_stamp    sex                 height new_height</span></span>
<span id="cb807-6"><a href="procesamiento-de-cadenas.html#cb807-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2014-09-02 15:16:28   Male                  5&#39; 4&quot;         NA</span></span>
<span id="cb807-7"><a href="procesamiento-de-cadenas.html#cb807-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2014-09-02 15:16:37 Female                  165cm         NA</span></span>
<span id="cb807-8"><a href="procesamiento-de-cadenas.html#cb807-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2014-09-02 15:16:52   Male                    5&#39;7         NA</span></span>
<span id="cb807-9"><a href="procesamiento-de-cadenas.html#cb807-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2014-09-02 15:16:56   Male                  &gt;9000         NA</span></span>
<span id="cb807-10"><a href="procesamiento-de-cadenas.html#cb807-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2014-09-02 15:16:56   Male                   5&#39;7&quot;         NA</span></span>
<span id="cb807-11"><a href="procesamiento-de-cadenas.html#cb807-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2014-09-02 15:17:09 Female                   5&#39;3&quot;         NA</span></span>
<span id="cb807-12"><a href="procesamiento-de-cadenas.html#cb807-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  2014-09-02 15:18:00   Male 5 feet and 8.11 inches         NA</span></span>
<span id="cb807-13"><a href="procesamiento-de-cadenas.html#cb807-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  2014-09-02 15:19:48   Male                   5&#39;11         NA</span></span>
<span id="cb807-14"><a href="procesamiento-de-cadenas.html#cb807-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  2014-09-04 00:46:45   Male                  5&#39;9&#39;&#39;         NA</span></span>
<span id="cb807-15"><a href="procesamiento-de-cadenas.html#cb807-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2014-09-04 10:29:44   Male                 5&#39;10&#39;&#39;         NA</span></span></code></pre></div>
<p>Inmediatamente vemos lo que está sucediendo. Algunos de los estudiantes no reportaron sus alturas en pulgadas según lo solicitado. Podríamos descartar estos datos y continuar. Sin embargo, muchas de las entradas siguen patrones que, en principio, podemos convertir fácilmente a pulgadas. Por ejemplo, en el resultado anterior, vemos varios casos que usan el formato <code>x'y''</code> con <code>x</code> e <code>y</code> representando pies y pulgadas, respectivamente. Cada uno de estos casos puede ser leído y convertido a pulgadas por un humano, por ejemplo <code>5'4''</code> es <code>5*12 + 4 = 64</code>. Entonces podríamos arreglar todas las entradas problemáticas <em>a mano</em>. Sin embargo, los humanos son propensos a cometer errores, por lo que es preferible un enfoque automatizado. Además, debido a que planeamos continuar recolectando datos, será conveniente escribir código que lo haga automáticamente.</p>
<p>Un primer paso en este tipo de tarea es examinar las entradas problemáticas e intentar definir patrones específicos seguidos por un gran grupo de entradas. Cuanto más grandes sean estos grupos, más entradas podremos arreglar con un solo enfoque programático. Queremos encontrar patrones que puedan describirse con precisión con una regla, como “un dígito, seguido por un símbolo de pie, seguido por uno o dos dígitos, seguido por un símbolo de pulgadas.”</p>
<p>Para buscar dichos patrones, es útil eliminar las entradas que son consistentes con estar en pulgadas y ver solo las entradas problemáticas. Por lo tanto, escribimos una función para hacer esto automáticamente. Mantenemos entradas que resultan en <code>NA</code>s al aplicar <code>as.numeric</code> o que están fuera de un rango de alturas plausibles. Permitimos un rango que cubre aproximadamente el 99.9999% de la población adulta. También usamos <code>suppressWarnings</code> para evitar el mensaje de advertencia que sabemos que <code>as.numeric</code> nos da.</p>
<div class="sourceCode" id="cb808"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb808-1"><a href="procesamiento-de-cadenas.html#cb808-1" aria-hidden="true" tabindex="-1"></a>not_inches <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">smallest =</span> <span class="dv">50</span>, <span class="at">tallest =</span> <span class="dv">84</span>){</span>
<span id="cb808-2"><a href="procesamiento-de-cadenas.html#cb808-2" aria-hidden="true" tabindex="-1"></a>  inches <span class="ot">&lt;-</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(x))</span>
<span id="cb808-3"><a href="procesamiento-de-cadenas.html#cb808-3" aria-hidden="true" tabindex="-1"></a>  ind <span class="ot">&lt;-</span> <span class="fu">is.na</span>(inches) <span class="sc">|</span> inches <span class="sc">&lt;</span> smallest <span class="sc">|</span> inches <span class="sc">&gt;</span> tallest</span>
<span id="cb808-4"><a href="procesamiento-de-cadenas.html#cb808-4" aria-hidden="true" tabindex="-1"></a>  ind</span>
<span id="cb808-5"><a href="procesamiento-de-cadenas.html#cb808-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Aplicamos esta función y encontramos el número de entradas problemáticas:</p>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb809-1"><a href="procesamiento-de-cadenas.html#cb809-1" aria-hidden="true" tabindex="-1"></a>problems <span class="ot">&lt;-</span> reported_heights <span class="sc">%&gt;%</span></span>
<span id="cb809-2"><a href="procesamiento-de-cadenas.html#cb809-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">not_inches</span>(height)) <span class="sc">%&gt;%</span></span>
<span id="cb809-3"><a href="procesamiento-de-cadenas.html#cb809-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(height)</span>
<span id="cb809-4"><a href="procesamiento-de-cadenas.html#cb809-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(problems)</span>
<span id="cb809-5"><a href="procesamiento-de-cadenas.html#cb809-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 292</span></span></code></pre></div>
<p>Ahora podemos ver todos los casos simplemente imprimiéndolos. No hacemos eso aquí porque hay <code>length(problems)</code>, pero después de examinarlos cuidadosamente, vemos que podemos usar tres patrones para definir tres grandes grupos dentro de estas excepciones.</p>
<p>1. Un patrón de la forma <code>x'y</code> o <code>x' y''</code> o <code>x'y"</code> con <code>x</code> e <code>y</code> representando pies y pulgadas, respectivamente. Aquí hay diez ejemplos:</p>
<pre><code>#&gt; 5&#39; 4&quot; 5&#39;7 5&#39;7&quot; 5&#39;3&quot; 5&#39;11 5&#39;9&#39;&#39; 5&#39;10&#39;&#39; 5&#39; 10 5&#39;5&quot; 5&#39;2&quot;</code></pre>
<p>2. Un patrón de la forma <code>x.y</code> o <code>x,y</code> con <code>x</code> pies y <code>y</code> pulgadas. Aquí hay diez ejemplos:</p>
<pre><code>#&gt; 5.3 5.5 6.5 5.8 5.6 5,3 5.9 6,8 5.5 6.2</code></pre>
<p>3. Entradas en centímetros en vez de pulgadas. Aquí hay diez ejemplos:</p>
<pre><code>#&gt; 150 175 177 178 163 175 178 165 165 180</code></pre>
<p>Una vez que veamos que estos grupos grandes siguen patrones específicos, podemos desarrollar un plan de ataque. Recuerden que raras veces hay una sola forma de realizar estas tareas. Aquí elegimos una que nos ayuda a enseñar varias técnicas útiles, aunque seguramente hay una forma más eficiente de realizar la tarea.</p>
<p><strong>Plan de ataque</strong>: convertiremos las entradas que siguen a los dos primeros patrones en una estandarizada. Luego, aprovecharemos la estandarización para extraer los pies y pulgadas y convertirlos a pulgadas. Entonces, definiremos un procedimiento para identificar entradas que están en centímetros y convertirlas a pulgadas. Después de aplicar estos pasos, verificaremos nuevamente para ver qué entradas no se corrigieron y ver si podemos ajustar nuestro enfoque para que sea más completo.</p>
<p>Al final, esperamos tener un <em>script</em> que haga que los métodos de recolección de datos basados en la web sean robustos para los errores más comunes de los usuarios.</p>
<p>Para lograr nuestro objetivo, utilizaremos una técnica que nos permite detectar con precisión patrones y extraer las partes que queremos: expresiones regulares. Pero primero, describimos rápidamente cómo <em>escaparse</em> (“escapar” viene de la tecla <em>esc</em> o <em>escape</em>) de la función de ciertos caracteres para que se puedan incluir en cadenas.</p>
</div>
<div id="cómo-escapar-al-definir-cadenas" class="section level2" number="24.4">
<h2><span class="header-section-number">24.4</span> Cómo <em>escapar</em> al definir cadenas</h2>
<p>Para definir cadenas en R, podemos usar comillas dobles:</p>
<div class="sourceCode" id="cb813"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb813-1"><a href="procesamiento-de-cadenas.html#cb813-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;Hello!&quot;</span></span></code></pre></div>
<p>o comillas simples:</p>
<div class="sourceCode" id="cb814"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb814-1"><a href="procesamiento-de-cadenas.html#cb814-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&#39;Hello!&#39;</span></span></code></pre></div>
<p>Asegúrense de elegir la comilla simple correcta, ya que usar la comilla inversa le dará un error:</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb815-1"><a href="procesamiento-de-cadenas.html#cb815-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">`</span><span class="at">Hello</span><span class="st">`</span></span></code></pre></div>
<pre><code>Error: object &#39;Hello&#39; not found</code></pre>
<p>Ahora, ¿qué sucede si la cadena que queremos definir incluye comillas dobles? Por ejemplo, si queremos escribir 10 pulgadas así: <code>10"</code>?
En este caso no pueden usar:</p>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb817-1"><a href="procesamiento-de-cadenas.html#cb817-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;10&quot;&quot;</span></span></code></pre></div>
<p>porque esto es solo la cadena <code>10</code> seguido por una comilla doble. Si escriben esto en R, obtendrán un error porque tiene comillas doble sin cerrar. Para evitar esto, podemos usar las comillas simples:</p>
<div class="sourceCode" id="cb818"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb818-1"><a href="procesamiento-de-cadenas.html#cb818-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&#39;10&quot;&#39;</span></span></code></pre></div>
<p>Si imprimimos <code>s</code>, vemos que escapamos las comillas dobles con la barra diagonal inversa <code>\</code>.</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="procesamiento-de-cadenas.html#cb819-1" aria-hidden="true" tabindex="-1"></a>s</span>
<span id="cb819-2"><a href="procesamiento-de-cadenas.html#cb819-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;10\&quot;&quot;</span></span></code></pre></div>
<p>De hecho, escapar con la barra diagonal inversa ofrece una forma de definir la cadena y a la vez seguir utilizando las comillas dobles para definir cadenas:</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb820-1"><a href="procesamiento-de-cadenas.html#cb820-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;10</span><span class="sc">\&quot;</span><span class="st">&quot;</span></span></code></pre></div>
<p>En R, la función <code>cat</code> nos permite ver como se ve la cadena:</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb821-1"><a href="procesamiento-de-cadenas.html#cb821-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(s)</span>
<span id="cb821-2"><a href="procesamiento-de-cadenas.html#cb821-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10&quot;</span></span></code></pre></div>
<p>Ahora, ¿qué pasa si queremos que nuestra cadena sea de 5 pies escrita así: <code>5'</code>? En ese caso, podemos usar las comillas dobles:</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="procesamiento-de-cadenas.html#cb822-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;5&#39;&quot;</span></span>
<span id="cb822-2"><a href="procesamiento-de-cadenas.html#cb822-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(s)</span>
<span id="cb822-3"><a href="procesamiento-de-cadenas.html#cb822-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5&#39;</span></span></code></pre></div>
<p>Así que hemos aprendido a escribir 5 pies y 10 pulgadas por separado, pero ¿qué pasa si queremos escribirlos juntos para representar <em>5 pies y 10 pulgadas</em> así: <code>5'10"</code>? En este caso, ni las comillas simples ni las dobles funcionarán. Esto:</p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="procesamiento-de-cadenas.html#cb823-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&#39;5&#39;</span><span class="dv">10</span><span class="st">&quot;&#39;</span></span></code></pre></div>
<p>cierra la cadena después de 5 y esto:</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="procesamiento-de-cadenas.html#cb824-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;5&#39;10&quot;&quot;</span></span></code></pre></div>
<p>cierra la cadena después de 10. Tengan en cuenta que si escribimos uno de los fragmentos de código anteriores en R, se atascará esperando que cierren la comilla abierta y tendrán que salir de la ejecución con la tecla <em>esc</em>.</p>
<p>En esta situación, necesitamos escapar de la función de las comillas con la barra diagonal inversa <code>\</code>. Pueden escapar cualquiera de los dos de la siguiente manera:</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb825-1"><a href="procesamiento-de-cadenas.html#cb825-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&#39;5</span><span class="sc">\&#39;</span><span class="st">10&quot;&#39;</span></span>
<span id="cb825-2"><a href="procesamiento-de-cadenas.html#cb825-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(s)</span>
<span id="cb825-3"><a href="procesamiento-de-cadenas.html#cb825-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5&#39;10&quot;</span></span></code></pre></div>
<p>o así:</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="procesamiento-de-cadenas.html#cb826-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;5&#39;10</span><span class="sc">\&quot;</span><span class="st">&quot;</span></span>
<span id="cb826-2"><a href="procesamiento-de-cadenas.html#cb826-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(s)</span>
<span id="cb826-3"><a href="procesamiento-de-cadenas.html#cb826-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5&#39;10&quot;</span></span></code></pre></div>
<p>Los caracteres de escape son algo que a menudo tenemos que usar al procesar cadenas.</p>
</div>
<div id="expresiones-regulares" class="section level2" number="24.5">
<h2><span class="header-section-number">24.5</span> Expresiones regulares</h2>
<p>Las expresiones regulares (<em>regex</em>) son una forma de describir patrones específicos de caracteres de texto. Se pueden usar para determinar si una cadena dada corresponde con el patrón. Se ha definido un conjunto de reglas para hacer esto de manera eficiente y precisa y aquí mostramos algunos ejemplos. Podemos aprender más sobre estas reglas leyendo tutoriales detallados<a href="#fn96" class="footnote-ref" id="fnref96"><sup>96</sup></a>.<a href="#fn97" class="footnote-ref" id="fnref97"><sup>97</sup></a> La hoja de referencia de RStudio también es muy útil<a href="#fn98" class="footnote-ref" id="fnref98"><sup>98</sup></a>.</p>
<p>Los patrones suministrados a las funciones <strong>stringr</strong> pueden ser una expresión regular en lugar de una cadena estándar. Aprenderemos cómo funciona esto a través de una serie de ejemplos.</p>
<p>A lo largo de esta sección, verán que creamos cadenas para probar nuestra expresión regular. Para hacer esto, definimos patrones que sabemos deben corresponder y también patrones que sabemos no deben corresponder. Los llamaremos <code>yes</code> y <code>no</code>, respectivamente. Esto nos permite verificar los dos tipos de errores: no corresponder o corresponder incorrectamente.</p>
<div id="las-cadenas-son-expresiones-regulares" class="section level3" number="24.5.1">
<h3><span class="header-section-number">24.5.1</span> Las cadenas son expresiones regulares</h3>
<p>Técnicamente, cualquier cadena es una expresión regular, quizás el ejemplo más simple es un solo carácter. Entonces la coma <code>,</code> usada en el siguiente ejemplo de código, es un ejemplo sencillo de una búsqueda con expresiones regulares.</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb827-1"><a href="procesamiento-de-cadenas.html#cb827-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb827-2"><a href="procesamiento-de-cadenas.html#cb827-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(murders_raw<span class="sc">$</span>total, pattern)</span></code></pre></div>
<p>Suprimimos el <em>output</em> que es un vector lógico que nos dice qué entradas tienen comas.</p>
<p>Arriba, notamos que una entrada incluía un <code>cm</code>. Este es también un ejemplo simple de una expresión regular. Podemos mostrar todas las entradas que usaron <code>cm</code> así:</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="procesamiento-de-cadenas.html#cb828-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(reported_heights<span class="sc">$</span>height, <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb828-2"><a href="procesamiento-de-cadenas.html#cb828-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;165cm&quot;  &quot;170 cm&quot;</span></span></code></pre></div>
</div>
<div id="caracteres-especiales" class="section level3" number="24.5.2">
<h3><span class="header-section-number">24.5.2</span> Caracteres especiales</h3>
<p>Ahora consideremos un ejemplo un poco más complicado. ¿Cuál de las siguientes cadenas contiene el patrón <code>cm</code> o <code>inches</code>?</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="procesamiento-de-cadenas.html#cb829-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;180 cm&quot;</span>, <span class="st">&quot;70 inches&quot;</span>)</span>
<span id="cb829-2"><a href="procesamiento-de-cadenas.html#cb829-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;180&quot;</span>, <span class="st">&quot;70&#39;&#39;&quot;</span>)</span>
<span id="cb829-3"><a href="procesamiento-de-cadenas.html#cb829-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span></code></pre></div>
<div class="sourceCode" id="cb830"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb830-1"><a href="procesamiento-de-cadenas.html#cb830-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(s, <span class="st">&quot;cm&quot;</span>) <span class="sc">|</span> <span class="fu">str_detect</span>(s, <span class="st">&quot;inches&quot;</span>)</span>
<span id="cb830-2"><a href="procesamiento-de-cadenas.html#cb830-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE FALSE FALSE</span></span></code></pre></div>
<p>Sin embargo, no necesitamos hacer esto. La característica principal que distingue el lenguaje de las expresiones regulares de cadenas es que podemos usar caracteres especiales. Estos son caracteres con un significado. Comenzamos presentando <code>|</code> que significa <em>o</em>. Entonces, si queremos saber si <code>cm</code> o <code>inches</code> aparece en las cadenas, podemos usar la expresión regular <code>cm|inches</code>:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb831-1"><a href="procesamiento-de-cadenas.html#cb831-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(s, <span class="st">&quot;cm|inches&quot;</span>)</span>
<span id="cb831-2"><a href="procesamiento-de-cadenas.html#cb831-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE FALSE FALSE</span></span></code></pre></div>
<p>y obtener la respuesta correcta.</p>
<p>Otro carácter especial que será útil para identificar valores de pies y pulgadas es <code>\d</code> que significa cualquier dígito: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9. La barra inversa se utiliza para distinguirlo del carácter <code>d</code>. En R, tenemos que escapar de la barra inversa <code>\</code> así que tenemos que usar <code>\\d</code> para representar dígitos. Aquí hay un ejemplo:</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb832-1"><a href="procesamiento-de-cadenas.html#cb832-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>, <span class="st">&quot;5&#39;10&quot;</span>, <span class="st">&quot;5 feet&quot;</span>, <span class="st">&quot;4&#39;11&quot;</span>)</span>
<span id="cb832-2"><a href="procesamiento-de-cadenas.html#cb832-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;.&quot;</span>, <span class="st">&quot;Five&quot;</span>, <span class="st">&quot;six&quot;</span>)</span>
<span id="cb832-3"><a href="procesamiento-de-cadenas.html#cb832-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb832-4"><a href="procesamiento-de-cadenas.html#cb832-4" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span></span>
<span id="cb832-5"><a href="procesamiento-de-cadenas.html#cb832-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(s, pattern)</span>
<span id="cb832-6"><a href="procesamiento-de-cadenas.html#cb832-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Aprovechamos esta oportunidad para presentar la función <code>str_view</code>, que es útil para la solución de problemas ya que nos muestra la primera ocurrencia que corresponde exactamente para cada cadena:</p>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb833-1"><a href="procesamiento-de-cadenas.html#cb833-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(s, pattern)</span></code></pre></div>
<p><img src="wrangling/img/str_view-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>y <code>str_view_all</code> nos muestra todos los patrones que corresponden. Entonces, <code>3'2</code> tiene dos equivalencias y <code>5'10</code> tiene tres.</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="procesamiento-de-cadenas.html#cb834-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(s, pattern)</span></code></pre></div>
<p><img src="wrangling/img/str_view-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Hay muchos otros caracteres especiales. Aprenderemos algunos mas a continuación, pero pueden ver la mayoría o todos en la hoja de referencia mencionada anteriormente<a href="#fn99" class="footnote-ref" id="fnref99"><sup>99</sup></a>.</p>
</div>
<div id="clases-de-caracteres" class="section level3" number="24.5.3">
<h3><span class="header-section-number">24.5.3</span> Clases de caracteres</h3>
<p>Las clases de caracteres se utilizan para definir una serie de caracteres que pueden corresponder. Definimos clases de caracteres entre corchetes <code>[ ]</code>. Entonces, por ejemplo, si queremos que el patrón corresponda solo si tenemos un <code>5</code> o un <code>6</code>, usamos la expresión regular <code>[56]</code>:</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb835-1"><a href="procesamiento-de-cadenas.html#cb835-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(s, <span class="st">&quot;[56]&quot;</span>)</span></code></pre></div>
<p><img src="wrangling/img/str_view-3.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Supongan que queremos unir valores entre 4 y 7. Una forma común de definir clases de caracteres es con rangos. Así por ejemplo, <code>[0-9]</code> es equivalente a <code>\\d</code>. El patrón que queremos entonces es <code>[4-7]</code>.</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="procesamiento-de-cadenas.html#cb836-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)</span>
<span id="cb836-2"><a href="procesamiento-de-cadenas.html#cb836-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb836-3"><a href="procesamiento-de-cadenas.html#cb836-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb836-4"><a href="procesamiento-de-cadenas.html#cb836-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(s, <span class="st">&quot;[4-7]&quot;</span>)</span>
<span id="cb836-5"><a href="procesamiento-de-cadenas.html#cb836-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Sin embargo, es importante saber que en <em>regex</em> todo es un carácter; no hay números. Por eso <code>4</code> es el carácter <code>4</code> y no el número cuatro. Noten, por ejemplo, que <code>[1-20]</code> <strong>no</strong> significa 1 a 20, significa los caracteres 1 a 2 o el carácter 0. Entonces <code>[1-20]</code> simplemente significa la clase de caracteres compuesta por 0, 1 y 2.</p>
<p>Tengan en cuenta que los caracteres tienen un orden y los dígitos siguen el orden numérico. Entonces <code>0</code> viene antes de <code>1</code> que viene antes de <code>2</code> y así. Por la misma razón, podemos definir letras minúsculas como <code>[a-z]</code>, letras mayúsculas como <code>[A-Z]</code> y <code>[a-zA-z]</code> como ambas.</p>
</div>
<div id="anclas" class="section level3" number="24.5.4">
<h3><span class="header-section-number">24.5.4</span> Anclas</h3>
<p>¿Y si queremos una correspondencia cuando tenemos exactamente 1 dígito? Esto será útil en nuestro estudio de caso, ya que los pies nunca tienen más de 1 dígito, por lo que esta restricción nos ayudará. Una forma de hacer esto con <em>regex</em> es usando <em>anclas</em> (<em>anchors</em> en inglés), que nos permiten definir patrones que deben comenzar o terminar en un lugar específico. Las dos anclas más comunes son
<code>^</code> y <code>$</code> que representan el comienzo y el final de una cadena, respectivamente. Entonces el patrón <code>^\\d$</code> se lee como “inicio de la cadena seguido por un dígito seguido por el final de la cadena.”</p>
<p>Este patrón ahora solo detecta las cadenas con exactamente un dígito:</p>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb837-1"><a href="procesamiento-de-cadenas.html#cb837-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">d$&quot;</span></span>
<span id="cb837-2"><a href="procesamiento-de-cadenas.html#cb837-2" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;9&quot;</span>)</span>
<span id="cb837-3"><a href="procesamiento-de-cadenas.html#cb837-3" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;12&quot;</span>, <span class="st">&quot;123&quot;</span>, <span class="st">&quot; 1&quot;</span>, <span class="st">&quot;a4&quot;</span>, <span class="st">&quot;b&quot;</span>)</span>
<span id="cb837-4"><a href="procesamiento-de-cadenas.html#cb837-4" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb837-5"><a href="procesamiento-de-cadenas.html#cb837-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(s, pattern)</span></code></pre></div>
<p><img src="wrangling/img/str_view-4.png" width="70%" style="display: block; margin: auto;" /></p>
<p>El <code>1</code> no corresponde porque no comienza con el dígito sino con un espacio, que no es fácil de ver.</p>
</div>
<div id="cuantificadores" class="section level3" number="24.5.5">
<h3><span class="header-section-number">24.5.5</span> Cuantificadores</h3>
<p>Para la parte de pulgadas, podemos tener uno o dos dígitos. Esto se puede especificar en <em>regex</em> con <em>cuantificadores</em> (<em>quantifiers</em> en inglés). Esto se hace siguiendo el patrón con la cantidad de veces que se puede repetir cerrada por llaves. Usemos un ejemplo para ilustrar. El patrón para uno o dos dígitos es:</p>
<div class="sourceCode" id="cb838"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb838-1"><a href="procesamiento-de-cadenas.html#cb838-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">d{1,2}$&quot;</span></span>
<span id="cb838-2"><a href="procesamiento-de-cadenas.html#cb838-2" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;9&quot;</span>, <span class="st">&quot;12&quot;</span>)</span>
<span id="cb838-3"><a href="procesamiento-de-cadenas.html#cb838-3" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;123&quot;</span>, <span class="st">&quot;a4&quot;</span>, <span class="st">&quot;b&quot;</span>)</span>
<span id="cb838-4"><a href="procesamiento-de-cadenas.html#cb838-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(yes, no), pattern)</span></code></pre></div>
<p><img src="wrangling/img/str_view-5.png" width="70%" style="display: block; margin: auto;" /></p>
<p>En este caso, <code>123</code> <strong>no</strong> corresponde, pero <code>12</code> sí. Entonces, para buscar nuestro patrón de pies y pulgadas, podemos agregar los símbolos para pies <code>'</code> y pulgadas <code>"</code> después de los dígitos.</p>
<p>Con lo que hemos aprendido, ahora podemos construir un ejemplo para el patrón <code>x'y\"</code> con <code>x</code> pies y <code>y</code> pulgadas.</p>
<div class="sourceCode" id="cb839"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb839-1"><a href="procesamiento-de-cadenas.html#cb839-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]&#39;</span><span class="sc">\\</span><span class="st">d{1,2}</span><span class="sc">\&quot;</span><span class="st">$&quot;</span></span></code></pre></div>
<p>El patrón ahora se está volviendo complejo, pero pueden mirarlo cuidadosamente y desglosarlo:</p>
<ul>
<li><code>^</code> = inicio de la cadena</li>
<li><code>[4-7]</code> = un dígito, ya sea 4, 5, 6 o 7</li>
<li><code>'</code> = símbolo de pies</li>
<li><code>\\d{1,2}</code> = uno o dos dígitos</li>
<li><code>\"</code> = símbolo de pulgadas</li>
<li><code>$</code> = final de la cadena</li>
</ul>
<p>Probémoslo:</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="procesamiento-de-cadenas.html#cb840-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&#39;7</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;6&#39;2</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;5&#39;12</span><span class="sc">\&quot;</span><span class="st">&quot;</span>)</span>
<span id="cb840-2"><a href="procesamiento-de-cadenas.html#cb840-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;6,2</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;6.2</span><span class="sc">\&quot;</span><span class="st">&quot;</span>,<span class="st">&quot;I am 5&#39;11</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;3&#39;2</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;64&quot;</span>)</span>
<span id="cb840-3"><a href="procesamiento-de-cadenas.html#cb840-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(yes, pattern)</span>
<span id="cb840-4"><a href="procesamiento-de-cadenas.html#cb840-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE TRUE TRUE</span></span>
<span id="cb840-5"><a href="procesamiento-de-cadenas.html#cb840-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(no, pattern)</span>
<span id="cb840-6"><a href="procesamiento-de-cadenas.html#cb840-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Por ahora, estamos permitiendo que las pulgadas sean 12 o más grandes. Agregaremos una restricción más tarde ya que la expresión regular para esto es un poco más compleja de lo que estamos preparados para mostrar.</p>
</div>
<div id="espacio-en-blanco-s" class="section level3" number="24.5.6">
<h3><span class="header-section-number">24.5.6</span> Espacio en blanco <code>\s</code></h3>
<p>Otro problema que tenemos son los espacios. Por ejemplo, nuestro patrón no corresponde con <code>5' 4"</code> porque hay un espacio entre <code>'</code> y <code>4</code>, que nuestro patrón no permite. Los espacios son caracteres y R no los ignora:</p>
<div class="sourceCode" id="cb841"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb841-1"><a href="procesamiento-de-cadenas.html#cb841-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="st">&quot;Hi&quot;</span>, <span class="st">&quot;Hi &quot;</span>)</span>
<span id="cb841-2"><a href="procesamiento-de-cadenas.html#cb841-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>En <em>regex</em>, <code>\s</code> representa el espacio en blanco. Para encontrar patrones como <code>5' 4</code>, podemos cambiar nuestro patrón a:</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="procesamiento-de-cadenas.html#cb842-1" aria-hidden="true" tabindex="-1"></a>pattern_2 <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]&#39;</span><span class="sc">\\</span><span class="st">s</span><span class="sc">\\</span><span class="st">d{1,2}</span><span class="sc">\&quot;</span><span class="st">$&quot;</span></span>
<span id="cb842-2"><a href="procesamiento-de-cadenas.html#cb842-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(problems, pattern_2)</span>
<span id="cb842-3"><a href="procesamiento-de-cadenas.html#cb842-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5&#39; 4\&quot;&quot;  &quot;5&#39; 11\&quot;&quot; &quot;5&#39; 7\&quot;&quot;</span></span></code></pre></div>
<p>Sin embargo, esto no encontrará equivalencia con los patrones sin espacio. Entonces, ¿necesitamos más de un patrón <em>regex</em>? Resulta que también podemos usar un cuantificador para esto.</p>
</div>
<div id="cuantificadores-1" class="section level3" number="24.5.7">
<h3><span class="header-section-number">24.5.7</span> Cuantificadores: <code>*</code>, <code>?</code>, <code>+</code></h3>
<p>Queremos que el patrón permita espacios pero que no los requiera. Incluso si hay varios espacios, como en este ejemplo <code>5' 4</code>, todavía queremos que corresponda. Hay un cuantificador para exactamente este propósito. En <em>regex</em>, el carácter <code>*</code> significa cero o más instancias del carácter anterior. Aquí hay un ejemplo:</p>
<div class="sourceCode" id="cb843"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb843-1"><a href="procesamiento-de-cadenas.html#cb843-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AB&quot;</span>, <span class="st">&quot;A1B&quot;</span>, <span class="st">&quot;A11B&quot;</span>, <span class="st">&quot;A111B&quot;</span>, <span class="st">&quot;A1111B&quot;</span>)</span>
<span id="cb843-2"><a href="procesamiento-de-cadenas.html#cb843-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A2B&quot;</span>, <span class="st">&quot;A21B&quot;</span>)</span>
<span id="cb843-3"><a href="procesamiento-de-cadenas.html#cb843-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(yes, <span class="st">&quot;A1*B&quot;</span>)</span>
<span id="cb843-4"><a href="procesamiento-de-cadenas.html#cb843-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE TRUE TRUE TRUE TRUE</span></span>
<span id="cb843-5"><a href="procesamiento-de-cadenas.html#cb843-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(no, <span class="st">&quot;A1*B&quot;</span>)</span>
<span id="cb843-6"><a href="procesamiento-de-cadenas.html#cb843-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE</span></span></code></pre></div>
<p>El patrón anterior encuentra correspondencia con la primera cadena, que tiene cero 1s, y todas las cadenas con un o más 1. Entonces podemos mejorar nuestro patrón agregando el <code>*</code> después del carácter espacial <code>\s</code>.</p>
<p>Hay otros dos cuantificadores similares. Para ninguno o una vez, podemos usar <code>?</code>, y para uno o más, podemos usar <code>+</code>. Pueden ver cómo difieren con este ejemplo:</p>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="procesamiento-de-cadenas.html#cb844-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">string =</span> <span class="fu">c</span>(<span class="st">&quot;AB&quot;</span>, <span class="st">&quot;A1B&quot;</span>, <span class="st">&quot;A11B&quot;</span>, <span class="st">&quot;A111B&quot;</span>, <span class="st">&quot;A1111B&quot;</span>),</span>
<span id="cb844-2"><a href="procesamiento-de-cadenas.html#cb844-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">none_or_more =</span> <span class="fu">str_detect</span>(yes, <span class="st">&quot;A1*B&quot;</span>),</span>
<span id="cb844-3"><a href="procesamiento-de-cadenas.html#cb844-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">nore_or_once =</span> <span class="fu">str_detect</span>(yes, <span class="st">&quot;A1?B&quot;</span>),</span>
<span id="cb844-4"><a href="procesamiento-de-cadenas.html#cb844-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">once_or_more =</span> <span class="fu">str_detect</span>(yes, <span class="st">&quot;A1+B&quot;</span>))</span>
<span id="cb844-5"><a href="procesamiento-de-cadenas.html#cb844-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   string none_or_more nore_or_once once_or_more</span></span>
<span id="cb844-6"><a href="procesamiento-de-cadenas.html#cb844-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     AB         TRUE         TRUE        FALSE</span></span>
<span id="cb844-7"><a href="procesamiento-de-cadenas.html#cb844-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    A1B         TRUE         TRUE         TRUE</span></span>
<span id="cb844-8"><a href="procesamiento-de-cadenas.html#cb844-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   A11B         TRUE        FALSE         TRUE</span></span>
<span id="cb844-9"><a href="procesamiento-de-cadenas.html#cb844-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  A111B         TRUE        FALSE         TRUE</span></span>
<span id="cb844-10"><a href="procesamiento-de-cadenas.html#cb844-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 A1111B         TRUE        FALSE         TRUE</span></span></code></pre></div>
<p>Usaremos los tres en nuestro ejemplo de alturas reportadas, pero los veremos en una sección posterior.</p>
</div>
<div id="todo-excepto" class="section level3" number="24.5.8">
<h3><span class="header-section-number">24.5.8</span> Todo excepto</h3>
<p>Para especificar patrones que <strong>no</strong> queremos detectar, podemos usar el símbolo <code>^</code> pero solo <strong>dentro</strong> de corchetes. Recuerden que fuera del corchete <code>^</code> significa el inicio de la cadena. Entonces, por ejemplo, si queremos detectar dígitos precedidos por algo que no sea una letra, podemos hacer lo siguiente:</p>
<div class="sourceCode" id="cb845"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb845-1"><a href="procesamiento-de-cadenas.html#cb845-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;[^a-zA-Z]</span><span class="sc">\\</span><span class="st">d&quot;</span></span>
<span id="cb845-2"><a href="procesamiento-de-cadenas.html#cb845-2" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;.3&quot;</span>, <span class="st">&quot;+2&quot;</span>, <span class="st">&quot;-0&quot;</span>,<span class="st">&quot;*4&quot;</span>)</span>
<span id="cb845-3"><a href="procesamiento-de-cadenas.html#cb845-3" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A3&quot;</span>, <span class="st">&quot;B2&quot;</span>, <span class="st">&quot;C0&quot;</span>, <span class="st">&quot;E4&quot;</span>)</span>
<span id="cb845-4"><a href="procesamiento-de-cadenas.html#cb845-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(yes, pattern)</span>
<span id="cb845-5"><a href="procesamiento-de-cadenas.html#cb845-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE TRUE TRUE TRUE</span></span>
<span id="cb845-6"><a href="procesamiento-de-cadenas.html#cb845-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(no, pattern)</span>
<span id="cb845-7"><a href="procesamiento-de-cadenas.html#cb845-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Otra forma de generar un patrón que busca <em>todo excepto</em> es usar la mayúscula del carácter especial. Por ejemplo <code>\\D</code> significa cualquier cosa que no sea un dígito, <code>\\S</code> significa cualquier cosa excepto un espacio y así sucesivamente.</p>
</div>
<div id="groups" class="section level3" number="24.5.9">
<h3><span class="header-section-number">24.5.9</span> Grupos</h3>
<p>Los <em>grupos</em> son un elemento muy útil de la expresiones regulares que permiten la extracción de valores. Los grupos se definen usando paréntesis. No afectan las equivalencias de patrones. En cambio, permiten que las herramientas identifiquen partes específicas del patrón para que podamos extraerlas.</p>
<p>Queremos cambiar las alturas escritas como <code>5.6</code> a <code>5'6</code>.</p>
<p>Para evitar cambiar patrones como <code>70.2</code>, requeriremos que el primer dígito esté entre 4 y 7 <code>[4-7]</code> y que el segundo sea ninguno o uno o más dígitos <code>\\d*</code>. Comencemos definiendo un patrón sencillo que corresponda con lo siguiente:</p>
<div class="sourceCode" id="cb846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb846-1"><a href="procesamiento-de-cadenas.html#cb846-1" aria-hidden="true" tabindex="-1"></a>pattern_without_groups <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7],</span><span class="sc">\\</span><span class="st">d*$&quot;</span></span></code></pre></div>
<p>Queremos extraer los dígitos para poder formar la nueva versión usando un punto. Estos son nuestros dos grupos, por lo que los encapsulamos con paréntesis:</p>
<div class="sourceCode" id="cb847"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb847-1"><a href="procesamiento-de-cadenas.html#cb847-1" aria-hidden="true" tabindex="-1"></a>pattern_with_groups <span class="ot">&lt;-</span> <span class="st">&quot;^([4-7]),(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span></span></code></pre></div>
<p>Encapsulamos la parte del patrón que corresponde con las partes que queremos conservar para su uso posterior. Agregar grupos no afecta la detección, ya que solo indica que queremos guardar lo que capturan los grupos. Tengan en cuenta que ambos patrones devuelven el mismo resultado cuando se usa <code>str_detect</code>:</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb848-1"><a href="procesamiento-de-cadenas.html#cb848-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5,9&quot;</span>, <span class="st">&quot;5,11&quot;</span>, <span class="st">&quot;6,&quot;</span>, <span class="st">&quot;6,1&quot;</span>)</span>
<span id="cb848-2"><a href="procesamiento-de-cadenas.html#cb848-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&#39;9&quot;</span>, <span class="st">&quot;,&quot;</span>, <span class="st">&quot;2,8&quot;</span>, <span class="st">&quot;6.1.1&quot;</span>)</span>
<span id="cb848-3"><a href="procesamiento-de-cadenas.html#cb848-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb848-4"><a href="procesamiento-de-cadenas.html#cb848-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(s, pattern_without_groups)</span>
<span id="cb848-5"><a href="procesamiento-de-cadenas.html#cb848-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</span></span>
<span id="cb848-6"><a href="procesamiento-de-cadenas.html#cb848-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(s, pattern_with_groups)</span>
<span id="cb848-7"><a href="procesamiento-de-cadenas.html#cb848-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</span></span></code></pre></div>
<p>Una vez que hayamos definido los grupos, podemos usar la función <code>str_match</code> para extraer los valores que definen estos grupos:</p>
<div class="sourceCode" id="cb849"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb849-1"><a href="procesamiento-de-cadenas.html#cb849-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_match</span>(s, pattern_with_groups)</span>
<span id="cb849-2"><a href="procesamiento-de-cadenas.html#cb849-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1]   [,2] [,3]</span></span>
<span id="cb849-3"><a href="procesamiento-de-cadenas.html#cb849-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;5,9&quot;  &quot;5&quot;  &quot;9&quot; </span></span>
<span id="cb849-4"><a href="procesamiento-de-cadenas.html#cb849-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;5,11&quot; &quot;5&quot;  &quot;11&quot;</span></span>
<span id="cb849-5"><a href="procesamiento-de-cadenas.html#cb849-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,] &quot;6,&quot;   &quot;6&quot;  &quot;&quot;  </span></span>
<span id="cb849-6"><a href="procesamiento-de-cadenas.html#cb849-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,] &quot;6,1&quot;  &quot;6&quot;  &quot;1&quot; </span></span>
<span id="cb849-7"><a href="procesamiento-de-cadenas.html#cb849-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,] NA     NA   NA  </span></span>
<span id="cb849-8"><a href="procesamiento-de-cadenas.html#cb849-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,] NA     NA   NA  </span></span>
<span id="cb849-9"><a href="procesamiento-de-cadenas.html#cb849-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [7,] NA     NA   NA  </span></span>
<span id="cb849-10"><a href="procesamiento-de-cadenas.html#cb849-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [8,] NA     NA   NA</span></span></code></pre></div>
<p>Observen que las segunda y tercera columnas contienen pies y pulgadas, respectivamente. La primera columna es la parte de la cadena que corresponde con el patrón. Si no se encuentra una equivalencia, vemos un <code>NA</code>.</p>
<p>Ahora podemos entender la diferencia entre las funciones <code>str_extract</code> y <code>str_match</code>. <code>str_extract</code> extrae solo cadenas que corresponden con un patrón, no los valores definidos por grupos:</p>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb850-1"><a href="procesamiento-de-cadenas.html#cb850-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(s, pattern_with_groups)</span>
<span id="cb850-2"><a href="procesamiento-de-cadenas.html#cb850-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5,9&quot;  &quot;5,11&quot; &quot;6,&quot;   &quot;6,1&quot;  NA     NA     NA     NA</span></span></code></pre></div>
</div>
</div>
<div id="buscar-y-reemplazar-con-expresiones-regulares" class="section level2" number="24.6">
<h2><span class="header-section-number">24.6</span> Buscar y reemplazar con expresiones regulares</h2>
<p>Anteriormente definimos el objeto <code>problems</code> que contiene las cadenas que no parecen estar en pulgadas. Podemos ver que pocas de nuestras cadenas problemáticas corresponden con el patrón:</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb851-1"><a href="procesamiento-de-cadenas.html#cb851-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]&#39;</span><span class="sc">\\</span><span class="st">d{1,2}</span><span class="sc">\&quot;</span><span class="st">$&quot;</span></span>
<span id="cb851-2"><a href="procesamiento-de-cadenas.html#cb851-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(problems, pattern))</span>
<span id="cb851-3"><a href="procesamiento-de-cadenas.html#cb851-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 14</span></span></code></pre></div>
<p>Para ver por qué esto es así, mostramos algunos ejemplos que ilustran por qué no tenemos más equivalencias:</p>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="procesamiento-de-cadenas.html#cb852-1" aria-hidden="true" tabindex="-1"></a>problems[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">15</span>)] <span class="sc">%&gt;%</span> <span class="fu">str_view</span>(pattern)</span></code></pre></div>
<p><img src="wrangling/img/str_view-6.png" width="70%" style="display: block; margin: auto;" />
Un problema inicial que vemos de inmediato es que algunos estudiantes escribieron las palabras “feet” e “inches.” Podemos ver las entradas que hicieron esto con la función <code>str_subset</code>:</p>
<div class="sourceCode" id="cb853"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb853-1"><a href="procesamiento-de-cadenas.html#cb853-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(problems, <span class="st">&quot;inches&quot;</span>)</span>
<span id="cb853-2"><a href="procesamiento-de-cadenas.html#cb853-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5 feet and 8.11 inches&quot; &quot;Five foot eight inches&quot;</span></span>
<span id="cb853-3"><a href="procesamiento-de-cadenas.html#cb853-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] &quot;5 feet 7inches&quot;         &quot;5ft 9 inches&quot;          </span></span>
<span id="cb853-4"><a href="procesamiento-de-cadenas.html#cb853-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;5 ft 9 inches&quot;          &quot;5 feet 6 inches&quot;</span></span></code></pre></div>
<p>También vemos que algunas entradas usan dos comillas simples <code>''</code> en lugar de una comilla doble <code>"</code>.</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb854-1"><a href="procesamiento-de-cadenas.html#cb854-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(problems, <span class="st">&quot;&#39;&#39;&quot;</span>)</span>
<span id="cb854-2"><a href="procesamiento-de-cadenas.html#cb854-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;5&#39;9&#39;&#39;&quot;   &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;3&#39;&#39;&quot;   &quot;5&#39;7&#39;&#39;&quot;   &quot;5&#39;6&#39;&#39;&quot;  </span></span>
<span id="cb854-3"><a href="procesamiento-de-cadenas.html#cb854-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;5&#39;7.5&#39;&#39;&quot; &quot;5&#39;7.5&#39;&#39;&quot; &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;11&#39;&#39;&quot;  &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;5&#39;&#39;&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb855-1"><a href="procesamiento-de-cadenas.html#cb855-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]&#39;</span><span class="sc">\\</span><span class="st">d{1,2}$&quot;</span></span></code></pre></div>
<p>Si hacemos este reemplazo antes de buscar equivalencias, obtendremos muchas más equivalencias:</p>
<div class="sourceCode" id="cb856"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb856-1"><a href="procesamiento-de-cadenas.html#cb856-1" aria-hidden="true" tabindex="-1"></a>problems <span class="sc">%&gt;%</span></span>
<span id="cb856-2"><a href="procesamiento-de-cadenas.html#cb856-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;feet|ft|foot&quot;</span>, <span class="st">&quot;&#39;&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># replace feet, ft, foot with &#39;</span></span>
<span id="cb856-3"><a href="procesamiento-de-cadenas.html#cb856-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;inches|in|&#39;&#39;|</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all inches symbols</span></span>
<span id="cb856-4"><a href="procesamiento-de-cadenas.html#cb856-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(pattern) <span class="sc">%&gt;%</span></span>
<span id="cb856-5"><a href="procesamiento-de-cadenas.html#cb856-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span>
<span id="cb856-6"><a href="procesamiento-de-cadenas.html#cb856-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 48</span></span></code></pre></div>
<p>Sin embargo, todavía nos faltan muchos casos.</p>
<p>Noten que en el código anterior, aprovechamos la consistencia de <strong>stringr</strong> y usamos el <em>pipe</em>.</p>
<p>Por ahora, mejoramos nuestro patrón agregando <code>\\s*</code> delante y después del símbolo de los pies <code>'</code> para permitir espacio entre el símbolo de los pies y los números. Ahora encontraremos más equivalencias:</p>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb857-1"><a href="procesamiento-de-cadenas.html#cb857-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]</span><span class="sc">\\</span><span class="st">s*&#39;</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">d{1,2}$&quot;</span></span>
<span id="cb857-2"><a href="procesamiento-de-cadenas.html#cb857-2" aria-hidden="true" tabindex="-1"></a>problems <span class="sc">%&gt;%</span></span>
<span id="cb857-3"><a href="procesamiento-de-cadenas.html#cb857-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;feet|ft|foot&quot;</span>, <span class="st">&quot;&#39;&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># replace feet, ft, foot with &#39;</span></span>
<span id="cb857-4"><a href="procesamiento-de-cadenas.html#cb857-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;inches|in|&#39;&#39;|</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove all inches symbols</span></span>
<span id="cb857-5"><a href="procesamiento-de-cadenas.html#cb857-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(pattern) <span class="sc">%&gt;%</span></span>
<span id="cb857-6"><a href="procesamiento-de-cadenas.html#cb857-6" aria-hidden="true" tabindex="-1"></a>  sum</span>
<span id="cb857-7"><a href="procesamiento-de-cadenas.html#cb857-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 53</span></span></code></pre></div>
<p>Podríamos estar tentados a evitar esto eliminando todos los espacios con <code>str_replace_all</code>. Sin embargo, al hacer una operación de este tipo, debemos asegurarnos de evitar efectos indeseados. En nuestros ejemplos de alturas autoreportadas, esto será un problema porque algunas entradas tienen la forma <code>x y</code> con espacio separando los pies de las pulgadas. Si eliminamos todos los espacios, cambiaríamos incorrectamente <code>x y</code> a <code>xy</code> lo que implica que un <code>6 1</code> se convertiría en <code>61</code> pulgadas en vez de <code>73</code> pulgadas.</p>
<p>El segundo grupo grande de entradas problemáticas tienen las formas <code>x.y</code>, <code>x,y</code> o <code>x y</code>. Queremos cambiar todo esto a nuestro formato común <code>x'y</code>. Pero no podemos simplemente buscar y reemplazar porque cambiaríamos valores como <code>70.5</code> a <code>70'5</code>. Por lo tanto, nuestra estrategia será buscar un patrón muy específico que nos asegure que se devuelvan pies y pulgadas y luego, para aquellos que correspondan, se reemplazcan adecuadamente.</p>
<div id="buscar-y-reemplazar-usando-grupos" class="section level3" number="24.6.1">
<h3><span class="header-section-number">24.6.1</span> Buscar y reemplazar usando grupos</h3>
<p>Otro aspecto útil de los grupos es que uno puede hacer referencia a los valores extraídos en una expresión regular cuando busca y reemplaza.</p>
<p>El carácter especial <em>regex</em> para el grupo en el lugar <code>i</code> es <code>\\i</code>. Entonces <code>\\1</code> es el valor extraído del primer grupo, <code>\\2</code> el valor del segundo y así sucesivamente. Como un ejemplo sencillo, noten que el siguiente código reemplazará una coma con un punto, pero solo si está entre dos dígitos:</p>
<div class="sourceCode" id="cb858"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb858-1"><a href="procesamiento-de-cadenas.html#cb858-1" aria-hidden="true" tabindex="-1"></a>pattern_with_groups <span class="ot">&lt;-</span> <span class="st">&quot;^([4-7]),(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span></span>
<span id="cb858-2"><a href="procesamiento-de-cadenas.html#cb858-2" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5,9&quot;</span>, <span class="st">&quot;5,11&quot;</span>, <span class="st">&quot;6,&quot;</span>, <span class="st">&quot;6,1&quot;</span>)</span>
<span id="cb858-3"><a href="procesamiento-de-cadenas.html#cb858-3" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&#39;9&quot;</span>, <span class="st">&quot;,&quot;</span>, <span class="st">&quot;2,8&quot;</span>, <span class="st">&quot;6.1.1&quot;</span>)</span>
<span id="cb858-4"><a href="procesamiento-de-cadenas.html#cb858-4" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb858-5"><a href="procesamiento-de-cadenas.html#cb858-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(s, pattern_with_groups, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="sc">\\</span><span class="st">2&quot;</span>)</span>
<span id="cb858-6"><a href="procesamiento-de-cadenas.html#cb858-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5&#39;9&quot;   &quot;5&#39;11&quot;  &quot;6&#39;&quot;    &quot;6&#39;1&quot;   &quot;5&#39;9&quot;   &quot;,&quot;     &quot;2,8&quot;   &quot;6.1.1&quot;</span></span></code></pre></div>
<p>Podemos usar esto para convertir casos en nuestras alturas reportadas.</p>
<p>Ahora estamos listos para definir un patrón que nos ayudará a convertir todos los <code>x.y</code>, <code>x,y</code> y <code>x y</code> a nuestro formato preferido. Necesitamos adaptar <code>pattern_with_groups</code> para que sea un poco más flexible y capture todos los casos.</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb859-1"><a href="procesamiento-de-cadenas.html#cb859-1" aria-hidden="true" tabindex="-1"></a>pattern_with_groups <span class="ot">&lt;-</span><span class="st">&quot;^([4-7])</span><span class="sc">\\</span><span class="st">s*[,</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+]</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span></span></code></pre></div>
<p>Examinemos este patrón <em>regex</em>:</p>
<ul>
<li><code>^</code> = inicio de la cadena</li>
<li><code>[4-7]</code> = un dígito, ya sea 4, 5, 6 o 7</li>
<li><code>\\s*</code> = ninguno o más espacios en blanco</li>
<li><code>[,\\.\\s+]</code> = el símbolo de pies es <code>,</code>, <code>.</code> o al menos un espacio</li>
<li><code>\\s*</code> = ninguno o más espacios en blanco</li>
<li><code>\\d*</code> = ninguno o más dígitos</li>
<li><code>$</code> = final de la cadena</li>
</ul>
<p>Podemos ver que parece estar funcionando:</p>
<div class="sourceCode" id="cb860"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb860-1"><a href="procesamiento-de-cadenas.html#cb860-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(problems, pattern_with_groups) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb860-2"><a href="procesamiento-de-cadenas.html#cb860-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5.3&quot;  &quot;5.25&quot; &quot;5.5&quot;  &quot;6.5&quot;  &quot;5.8&quot;  &quot;5.6&quot;</span></span></code></pre></div>
<p>Ahora usamos esto para buscar y reemplazar:</p>
<div class="sourceCode" id="cb861"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb861-1"><a href="procesamiento-de-cadenas.html#cb861-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(problems, pattern_with_groups) <span class="sc">%&gt;%</span></span>
<span id="cb861-2"><a href="procesamiento-de-cadenas.html#cb861-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(pattern_with_groups, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="sc">\\</span><span class="st">2&quot;</span>) <span class="sc">%&gt;%</span> head</span>
<span id="cb861-3"><a href="procesamiento-de-cadenas.html#cb861-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5&#39;3&quot;  &quot;5&#39;25&quot; &quot;5&#39;5&quot;  &quot;6&#39;5&quot;  &quot;5&#39;8&quot;  &quot;5&#39;6&quot;</span></span></code></pre></div>
<p>Lidiaremos con el desafío de “pulgadas más grandes que doce” más tarde.</p>
</div>
</div>
<div id="probar-y-mejorar" class="section level2" number="24.7">
<h2><span class="header-section-number">24.7</span> Probar y mejorar</h2>
<p>Desarrollar expresiones regulares correctas en el primer intento a menudo es difícil. Probar y mejorar es un enfoque común para encontrar el patrón de expresiones regulares que satisface todas las condiciones deseadas. En las secciones anteriores, hemos desarrollado una potente técnica de procesamiento de cadenas que puede ayudarnos a detectar muchas de las entradas problemáticas. Aquí probaremos nuestro enfoque, buscaremos más problemas y modificaremos nuestro enfoque para posibles mejoras. Escribamos una función que identifique todas las entradas que no se pueden convertir en números, recordando que algunas están en centímetros (nos encargaremos de arreglar esas más adelante):</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="procesamiento-de-cadenas.html#cb862-1" aria-hidden="true" tabindex="-1"></a>not_inches_or_cm <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">smallest =</span> <span class="dv">50</span>, <span class="at">tallest =</span> <span class="dv">84</span>){</span>
<span id="cb862-2"><a href="procesamiento-de-cadenas.html#cb862-2" aria-hidden="true" tabindex="-1"></a>  inches <span class="ot">&lt;-</span> <span class="fu">suppressWarnings</span>(<span class="fu">as.numeric</span>(x))</span>
<span id="cb862-3"><a href="procesamiento-de-cadenas.html#cb862-3" aria-hidden="true" tabindex="-1"></a>  ind <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">is.na</span>(inches) <span class="sc">&amp;</span></span>
<span id="cb862-4"><a href="procesamiento-de-cadenas.html#cb862-4" aria-hidden="true" tabindex="-1"></a>    ((inches <span class="sc">&gt;=</span> smallest <span class="sc">&amp;</span> inches <span class="sc">&lt;=</span> tallest) <span class="sc">|</span></span>
<span id="cb862-5"><a href="procesamiento-de-cadenas.html#cb862-5" aria-hidden="true" tabindex="-1"></a>       (inches<span class="sc">/</span><span class="fl">2.54</span> <span class="sc">&gt;=</span> smallest <span class="sc">&amp;</span> inches<span class="sc">/</span><span class="fl">2.54</span> <span class="sc">&lt;=</span> tallest))</span>
<span id="cb862-6"><a href="procesamiento-de-cadenas.html#cb862-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">!</span>ind</span>
<span id="cb862-7"><a href="procesamiento-de-cadenas.html#cb862-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb862-8"><a href="procesamiento-de-cadenas.html#cb862-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-9"><a href="procesamiento-de-cadenas.html#cb862-9" aria-hidden="true" tabindex="-1"></a>problems <span class="ot">&lt;-</span> reported_heights <span class="sc">%&gt;%</span></span>
<span id="cb862-10"><a href="procesamiento-de-cadenas.html#cb862-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">not_inches_or_cm</span>(height)) <span class="sc">%&gt;%</span></span>
<span id="cb862-11"><a href="procesamiento-de-cadenas.html#cb862-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(height)</span>
<span id="cb862-12"><a href="procesamiento-de-cadenas.html#cb862-12" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(problems)</span>
<span id="cb862-13"><a href="procesamiento-de-cadenas.html#cb862-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 200</span></span></code></pre></div>
<p>Veamos qué proporción de estas se ajusta a nuestro patrón después de los pasos de procesamiento que desarrollamos anteriormente:</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="procesamiento-de-cadenas.html#cb863-1" aria-hidden="true" tabindex="-1"></a>converted <span class="ot">&lt;-</span> problems <span class="sc">%&gt;%</span></span>
<span id="cb863-2"><a href="procesamiento-de-cadenas.html#cb863-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;feet|foot|ft&quot;</span>, <span class="st">&quot;&#39;&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># convert feet symbols to &#39;</span></span>
<span id="cb863-3"><a href="procesamiento-de-cadenas.html#cb863-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;inches|in|&#39;&#39;|</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove inches symbols</span></span>
<span id="cb863-4"><a href="procesamiento-de-cadenas.html#cb863-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;^([4-7])</span><span class="sc">\\</span><span class="st">s*[,</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+]</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="sc">\\</span><span class="st">2&quot;</span>)<span class="co"># change format</span></span>
<span id="cb863-5"><a href="procesamiento-de-cadenas.html#cb863-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-6"><a href="procesamiento-de-cadenas.html#cb863-6" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]</span><span class="sc">\\</span><span class="st">s*&#39;</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">d{1,2}$&quot;</span></span>
<span id="cb863-7"><a href="procesamiento-de-cadenas.html#cb863-7" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(converted, pattern)</span>
<span id="cb863-8"><a href="procesamiento-de-cadenas.html#cb863-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(index)</span>
<span id="cb863-9"><a href="procesamiento-de-cadenas.html#cb863-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.615</span></span></code></pre></div>
<p>Observen cómo aprovechamos el <em>pipe</em>, una de las ventajas de usar <strong>stringr</strong>. Este último fragmento de código muestra que encontramos equivalencias en más de la mitad de las cadenas. Examinemos los casos restantes:</p>
<div class="sourceCode" id="cb864"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb864-1"><a href="procesamiento-de-cadenas.html#cb864-1" aria-hidden="true" tabindex="-1"></a>converted[<span class="sc">!</span>index]</span>
<span id="cb864-2"><a href="procesamiento-de-cadenas.html#cb864-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;6&quot;             &quot;165cm&quot;         &quot;511&quot;           &quot;6&quot;            </span></span>
<span id="cb864-3"><a href="procesamiento-de-cadenas.html#cb864-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;2&quot;             &quot;&gt;9000&quot;         &quot;5 &#39; and 8.11 &quot; &quot;11111&quot;        </span></span>
<span id="cb864-4"><a href="procesamiento-de-cadenas.html#cb864-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;6&quot;             &quot;103.2&quot;         &quot;19&quot;            &quot;5&quot;            </span></span>
<span id="cb864-5"><a href="procesamiento-de-cadenas.html#cb864-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;300&quot;           &quot;6&#39;&quot;            &quot;6&quot;             &quot;Five &#39; eight &quot;</span></span>
<span id="cb864-6"><a href="procesamiento-de-cadenas.html#cb864-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] &quot;7&quot;             &quot;214&quot;           &quot;6&quot;             &quot;0.7&quot;          </span></span>
<span id="cb864-7"><a href="procesamiento-de-cadenas.html#cb864-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] &quot;6&quot;             &quot;2&#39;33&quot;          &quot;612&quot;           &quot;1,70&quot;         </span></span>
<span id="cb864-8"><a href="procesamiento-de-cadenas.html#cb864-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] &quot;87&quot;            &quot;5&#39;7.5&quot;         &quot;5&#39;7.5&quot;         &quot;111&quot;          </span></span>
<span id="cb864-9"><a href="procesamiento-de-cadenas.html#cb864-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [29] &quot;5&#39; 7.78&quot;       &quot;12&quot;            &quot;6&quot;             &quot;yyy&quot;          </span></span>
<span id="cb864-10"><a href="procesamiento-de-cadenas.html#cb864-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [33] &quot;89&quot;            &quot;34&quot;            &quot;25&quot;            &quot;6&quot;            </span></span>
<span id="cb864-11"><a href="procesamiento-de-cadenas.html#cb864-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [37] &quot;6&quot;             &quot;22&quot;            &quot;684&quot;           &quot;6&quot;            </span></span>
<span id="cb864-12"><a href="procesamiento-de-cadenas.html#cb864-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [41] &quot;1&quot;             &quot;1&quot;             &quot;6*12&quot;          &quot;87&quot;           </span></span>
<span id="cb864-13"><a href="procesamiento-de-cadenas.html#cb864-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [45] &quot;6&quot;             &quot;1.6&quot;           &quot;120&quot;           &quot;120&quot;          </span></span>
<span id="cb864-14"><a href="procesamiento-de-cadenas.html#cb864-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [49] &quot;23&quot;            &quot;1.7&quot;           &quot;6&quot;             &quot;5&quot;            </span></span>
<span id="cb864-15"><a href="procesamiento-de-cadenas.html#cb864-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [53] &quot;69&quot;            &quot;5&#39; 9 &quot;         &quot;5 &#39; 9 &quot;        &quot;6&quot;            </span></span>
<span id="cb864-16"><a href="procesamiento-de-cadenas.html#cb864-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [57] &quot;6&quot;             &quot;86&quot;            &quot;708,661&quot;       &quot;5 &#39; 6 &quot;       </span></span>
<span id="cb864-17"><a href="procesamiento-de-cadenas.html#cb864-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [61] &quot;6&quot;             &quot;649,606&quot;       &quot;10000&quot;         &quot;1&quot;            </span></span>
<span id="cb864-18"><a href="procesamiento-de-cadenas.html#cb864-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [65] &quot;728,346&quot;       &quot;0&quot;             &quot;6&quot;             &quot;6&quot;            </span></span>
<span id="cb864-19"><a href="procesamiento-de-cadenas.html#cb864-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [69] &quot;6&quot;             &quot;100&quot;           &quot;88&quot;            &quot;6&quot;            </span></span>
<span id="cb864-20"><a href="procesamiento-de-cadenas.html#cb864-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [73] &quot;170 cm&quot;        &quot;7,283,465&quot;     &quot;5&quot;             &quot;5&quot;            </span></span>
<span id="cb864-21"><a href="procesamiento-de-cadenas.html#cb864-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [77] &quot;34&quot;</span></span></code></pre></div>
<p>Surgen cuatro patrones claros:</p>
<ol style="list-style-type: decimal">
<li>Muchos estudiantes que miden exactamente 5 o 6 pies no ingresaron ninguna pulgada, por ejemplo <code>6'</code>, y nuestro patrón requiere que se incluyan pulgadas.</li>
<li>Algunos estudiantes que miden exactamente 5 o 6 pies ingresaron solo ese número.</li>
<li>Algunas de las pulgadas se ingresaron con puntos decimales. Por ejemplo <code>5'7.5''</code>. Nuestro patrón solo busca dos dígitos.</li>
<li>Algunas entradas tienen espacios al final, por ejemplo <code>5 ' 9</code> .</li>
</ol>
<p>Aunque no es tan común, también vemos los siguientes problemas:</p>
<ol start="5" style="list-style-type: decimal">
<li>Algunas entradas están en metros y algunas usan formatos europeos: <code>1.6</code>, <code>1,70</code>.</li>
<li>Dos estudiantes añadieron <code>cm</code>.</li>
<li>Un estudiante deletreó los números: <code>Five foot eight inches</code>.</li>
</ol>
<p>No está claro que valga la pena escribir código para manejar estos últimos tres casos, ya que son bastante raros. Sin embargo, algunos de ellos nos brindan la oportunidad de aprender algunas técnicas más de expresiones regulares, por lo que crearemos una solución.</p>
<p>Para el caso 1, si agregamos un <code>'0</code> después del primer dígito, por ejemplo, convertir todo <code>6</code> a <code>6'0</code>, entonces nuestro patrón previamente definido correspondará. Esto se puede hacer usando grupos:</p>
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb865-1"><a href="procesamiento-de-cadenas.html#cb865-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>, <span class="st">&quot;5&quot;</span>)</span>
<span id="cb865-2"><a href="procesamiento-de-cadenas.html#cb865-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&#39;&quot;</span>, <span class="st">&quot;5&#39;&#39;&quot;</span>, <span class="st">&quot;5&#39;4&quot;</span>)</span>
<span id="cb865-3"><a href="procesamiento-de-cadenas.html#cb865-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb865-4"><a href="procesamiento-de-cadenas.html#cb865-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(s, <span class="st">&quot;^([4-7])$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;0&quot;</span>)</span>
<span id="cb865-5"><a href="procesamiento-de-cadenas.html#cb865-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5&#39;0&quot; &quot;6&#39;0&quot; &quot;5&#39;0&quot; &quot;5&#39;&quot;  &quot;5&#39;&#39;&quot; &quot;5&#39;4&quot;</span></span></code></pre></div>
<p>El patrón dice que tiene que comenzar (<code>^</code>) con un dígito entre 4 y 7 y terminar ahí (<code>$</code>). El paréntesis define el grupo que pasamos como <code>\\1</code> para generar la cadena <em>regex</em> que usamos para el reemplazo.</p>
<p>Podemos adaptar este código ligeramente para manejar también el caso 2, que cubre la entrada <code>5'</code>. Noten que <code>5'</code> se deja intacto. Esto es porque el extra <code>'</code> hace que el patrón no corresponda ya que tenemos que terminar con un 5 o 6. Queremos permitir que el 5 o 6 sea seguido por un signo de 0 o 1 pie. Entonces podemos simplemente agregar <code>'{0,1}</code> después de la <code>'</code> para hacer esto. Sin embargo, podemos usar el carácter especial, <code>?</code>, que significa ninguna o una vez. Como vimos anteriormente, esto es diferente a <code>*</code>, que significa ninguna o más. Ahora vemos que el cuarto caso también se convierte:</p>
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="procesamiento-de-cadenas.html#cb866-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(s, <span class="st">&quot;^([56])&#39;?$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;0&quot;</span>)</span>
<span id="cb866-2"><a href="procesamiento-de-cadenas.html#cb866-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5&#39;0&quot; &quot;6&#39;0&quot; &quot;5&#39;0&quot; &quot;5&#39;0&quot; &quot;5&#39;&#39;&quot; &quot;5&#39;4&quot;</span></span></code></pre></div>
<p>Aquí solo permitimos 5 y 6, pero no 4 y 7. Esto se debe a que medir 5 y 6 pies de altura es bastante común, por lo que suponemos que aquellos que escribieron 5 o 6 realmente querían decir <code>60</code> o <code>72</code> pulgadas. Sin embargo, medir 4 y 7 pies de altura es tan raro que, aunque aceptamos <code>84</code> como una entrada válida, suponemos que <code>7</code> fue ingresado por error.</p>
<p>Podemos usar cuantificadores para tratar el caso 3. Estas entradas no corresponden porque las pulgadas incluyen decimales y nuestro patrón no lo permite. Necesitamos permitir que el segundo grupo incluya decimales, no solo dígitos. Esto significa que debemos permitir cero o un punto <code>.</code>, entonces cero o más dígitos. Por eso, usaremos ambos <code>?</code> y <code>*</code>. También recuerden que, para este caso particular, el punto debe escaparse ya que es un carácter especial (significa cualquier carácter excepto el salto de línea). Aquí hay un ejemplo sencillo de cómo podemos usar <code>*</code>.</p>
<p>Entonces podemos adaptar nuestro patrón, que actualmente es <code>^[4-7]\\s*'\\s*\\d{1,2}$</code> para permitir un decimal al final:</p>
<div class="sourceCode" id="cb867"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb867-1"><a href="procesamiento-de-cadenas.html#cb867-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]</span><span class="sc">\\</span><span class="st">s*&#39;</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.?</span><span class="sc">\\</span><span class="st">d*)$&quot;</span></span></code></pre></div>
<p>Podemos tratar el caso 4, metros usando comas, de manera similar a cómo convertimos el <code>x.y</code> a <code>x'y</code>. Una diferencia es que requerimos que el primer dígito sea 1 o 2:</p>
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="procesamiento-de-cadenas.html#cb868-1" aria-hidden="true" tabindex="-1"></a>yes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1,7&quot;</span>, <span class="st">&quot;1, 8&quot;</span>, <span class="st">&quot;2, &quot;</span> )</span>
<span id="cb868-2"><a href="procesamiento-de-cadenas.html#cb868-2" aria-hidden="true" tabindex="-1"></a>no <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5,8&quot;</span>, <span class="st">&quot;5,3,2&quot;</span>, <span class="st">&quot;1.7&quot;</span>)</span>
<span id="cb868-3"><a href="procesamiento-de-cadenas.html#cb868-3" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(yes, no)</span>
<span id="cb868-4"><a href="procesamiento-de-cadenas.html#cb868-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(s, <span class="st">&quot;^([12])</span><span class="sc">\\</span><span class="st">s*,</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">2&quot;</span>)</span>
<span id="cb868-5"><a href="procesamiento-de-cadenas.html#cb868-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;1.7&quot;   &quot;1.8&quot;   &quot;2.&quot;    &quot;5,8&quot;   &quot;5,3,2&quot; &quot;1.7&quot;</span></span></code></pre></div>
<p>Luego verificaremos si las entradas son metros utilizando sus valores numéricos. Regresaremos al estudio de caso después de presentar dos funciones ampliamente utilizadas en el procesamiento de cadenas que serán útiles al desarrollar nuestra solución final para las alturas autoreportadas.</p>
</div>
<div id="podar" class="section level2" number="24.8">
<h2><span class="header-section-number">24.8</span> Podar</h2>
<p>En general, los espacios al principio o al final de la cadena no son informativos.
Estos pueden ser particularmente engañosos porque a veces pueden ser difíciles de ver:</p>
<div class="sourceCode" id="cb869"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb869-1"><a href="procesamiento-de-cadenas.html#cb869-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="st">&quot;Hi &quot;</span></span>
<span id="cb869-2"><a href="procesamiento-de-cadenas.html#cb869-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(s)</span>
<span id="cb869-3"><a href="procesamiento-de-cadenas.html#cb869-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hi</span></span>
<span id="cb869-4"><a href="procesamiento-de-cadenas.html#cb869-4" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(s, <span class="st">&quot;Hi&quot;</span>)</span>
<span id="cb869-5"><a href="procesamiento-de-cadenas.html#cb869-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Este es un problema lo suficientemente general como para que haya una función dedicada a eliminarlos: <code>str_trim</code>. El nombre viene de <em>trim</em> o podar en inglés.</p>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="procesamiento-de-cadenas.html#cb870-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">&quot;5 &#39; 9 &quot;</span>)</span>
<span id="cb870-2"><a href="procesamiento-de-cadenas.html#cb870-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;5 &#39; 9&quot;</span></span></code></pre></div>
</div>
<div id="cómo-cambiar-de-mayúsculas-o-minúsculas" class="section level2" number="24.9">
<h2><span class="header-section-number">24.9</span> Cómo cambiar de mayúsculas o minúsculas</h2>
<p>Tengan en cuenta que <em>regex</em> distingue entre mayúsculas y minúsculas. A menudo queremos encontrar una equivalencia de palabra independientemente de si es mayúscula o minúscula. Un acercamiento para hacer esto es primero cambiar todo a minúsculas y luego continuar ignorando mayúsculas y minúsculas. Como ejemplo, noten que una de las entradas escribe números como palabras <code>Five foot eight inches</code>. Aunque no es eficiente, podríamos agregar 13 llamadas adicionales a <code>str_replace</code> para convertir <code>zero</code> a <code>0</code>, <code>one</code> a <code>1</code>, y así. Para no tener que escribir dos operaciones separadas para <code>Zero</code> y <code>zero</code>, <code>One</code> y <code>one</code>, etc., podemos usar la función <code>str_to_lower</code> para convertir todas las letras a minúsculas:</p>
<div class="sourceCode" id="cb871"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb871-1"><a href="procesamiento-de-cadenas.html#cb871-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Five feet eight inches&quot;</span>)</span>
<span id="cb871-2"><a href="procesamiento-de-cadenas.html#cb871-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(s)</span>
<span id="cb871-3"><a href="procesamiento-de-cadenas.html#cb871-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;five feet eight inches&quot;</span></span></code></pre></div>
<p>Otras funciones relacionadas son <code>str_to_upper</code> y <code>str_to_title</code>. Ahora estamos listos para definir un procedimiento que convierta todos los casos problemáticos a pulgadas.</p>
</div>
<div id="estudio-de-caso-2-alturas-autoreportadas-continuación" class="section level2" number="24.10">
<h2><span class="header-section-number">24.10</span> Estudio de caso 2: alturas autoreportadas (continuación)</h2>
<p>Ahora ponemos todo lo que hemos aprendido en una función que toma un vector de cadena e intenta convertir todas las cadenas posibles a un formato. Escribimos una función que reúne lo que hemos hecho anteriormente:</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="procesamiento-de-cadenas.html#cb872-1" aria-hidden="true" tabindex="-1"></a>convert_format <span class="ot">&lt;-</span> <span class="cf">function</span>(s){</span>
<span id="cb872-2"><a href="procesamiento-de-cadenas.html#cb872-2" aria-hidden="true" tabindex="-1"></a>  s <span class="sc">%&gt;%</span></span>
<span id="cb872-3"><a href="procesamiento-de-cadenas.html#cb872-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace</span>(<span class="st">&quot;feet|foot|ft&quot;</span>, <span class="st">&quot;&#39;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb872-4"><a href="procesamiento-de-cadenas.html#cb872-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">&quot;inches|in|&#39;&#39;|</span><span class="sc">\&quot;</span><span class="st">|cm|and&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb872-5"><a href="procesamiento-de-cadenas.html#cb872-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace</span>(<span class="st">&quot;^([4-7])</span><span class="sc">\\</span><span class="st">s*[,</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">s+]</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="sc">\\</span><span class="st">2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb872-6"><a href="procesamiento-de-cadenas.html#cb872-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace</span>(<span class="st">&quot;^([56])&#39;?$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&#39;0&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb872-7"><a href="procesamiento-de-cadenas.html#cb872-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace</span>(<span class="st">&quot;^([12])</span><span class="sc">\\</span><span class="st">s*,</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d*)$&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb872-8"><a href="procesamiento-de-cadenas.html#cb872-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb872-9"><a href="procesamiento-de-cadenas.html#cb872-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>También podemos escribir una función que convierta palabras en números:</p>
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb873-1"><a href="procesamiento-de-cadenas.html#cb873-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(english)</span>
<span id="cb873-2"><a href="procesamiento-de-cadenas.html#cb873-2" aria-hidden="true" tabindex="-1"></a>words_to_numbers <span class="ot">&lt;-</span> <span class="cf">function</span>(s){</span>
<span id="cb873-3"><a href="procesamiento-de-cadenas.html#cb873-3" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(s)</span>
<span id="cb873-4"><a href="procesamiento-de-cadenas.html#cb873-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">11</span>)</span>
<span id="cb873-5"><a href="procesamiento-de-cadenas.html#cb873-5" aria-hidden="true" tabindex="-1"></a>    s <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(s, <span class="fu">words</span>(i), <span class="fu">as.character</span>(i))</span>
<span id="cb873-6"><a href="procesamiento-de-cadenas.html#cb873-6" aria-hidden="true" tabindex="-1"></a>  s</span>
<span id="cb873-7"><a href="procesamiento-de-cadenas.html#cb873-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Tengan en cuenta que podemos realizar la operación anterior de manera más eficiente con la función <code>recode</code>, que estudiaremos en la Sección <a href="procesamiento-de-cadenas.html#recode">24.13</a>.
Ahora podemos ver qué entradas problemáticas permanecen:</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="procesamiento-de-cadenas.html#cb874-1" aria-hidden="true" tabindex="-1"></a>converted <span class="ot">&lt;-</span> problems <span class="sc">%&gt;%</span> <span class="fu">words_to_numbers</span>() <span class="sc">%&gt;%</span> <span class="fu">convert_format</span>()</span>
<span id="cb874-2"><a href="procesamiento-de-cadenas.html#cb874-2" aria-hidden="true" tabindex="-1"></a>remaining_problems <span class="ot">&lt;-</span> converted[<span class="fu">not_inches_or_cm</span>(converted)]</span>
<span id="cb874-3"><a href="procesamiento-de-cadenas.html#cb874-3" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^[4-7]</span><span class="sc">\\</span><span class="st">s*&#39;</span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.?</span><span class="sc">\\</span><span class="st">d*$&quot;</span></span>
<span id="cb874-4"><a href="procesamiento-de-cadenas.html#cb874-4" aria-hidden="true" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(remaining_problems, pattern)</span>
<span id="cb874-5"><a href="procesamiento-de-cadenas.html#cb874-5" aria-hidden="true" tabindex="-1"></a>remaining_problems[<span class="sc">!</span>index]</span>
<span id="cb874-6"><a href="procesamiento-de-cadenas.html#cb874-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;511&quot;       &quot;2&quot;         &quot;&gt;9000&quot;     &quot;11111&quot;     &quot;103.2&quot;    </span></span>
<span id="cb874-7"><a href="procesamiento-de-cadenas.html#cb874-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;19&quot;        &quot;300&quot;       &quot;7&quot;         &quot;214&quot;       &quot;0.7&quot;      </span></span>
<span id="cb874-8"><a href="procesamiento-de-cadenas.html#cb874-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;2&#39;33&quot;      &quot;612&quot;       &quot;1.70&quot;      &quot;87&quot;        &quot;111&quot;      </span></span>
<span id="cb874-9"><a href="procesamiento-de-cadenas.html#cb874-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &quot;12&quot;        &quot;yyy&quot;       &quot;89&quot;        &quot;34&quot;        &quot;25&quot;       </span></span>
<span id="cb874-10"><a href="procesamiento-de-cadenas.html#cb874-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] &quot;22&quot;        &quot;684&quot;       &quot;1&quot;         &quot;1&quot;         &quot;6*12&quot;     </span></span>
<span id="cb874-11"><a href="procesamiento-de-cadenas.html#cb874-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [26] &quot;87&quot;        &quot;1.6&quot;       &quot;120&quot;       &quot;120&quot;       &quot;23&quot;       </span></span>
<span id="cb874-12"><a href="procesamiento-de-cadenas.html#cb874-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [31] &quot;1.7&quot;       &quot;86&quot;        &quot;708,661&quot;   &quot;649,606&quot;   &quot;10000&quot;    </span></span>
<span id="cb874-13"><a href="procesamiento-de-cadenas.html#cb874-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [36] &quot;1&quot;         &quot;728,346&quot;   &quot;0&quot;         &quot;100&quot;       &quot;88&quot;       </span></span>
<span id="cb874-14"><a href="procesamiento-de-cadenas.html#cb874-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [41] &quot;7,283,465&quot; &quot;34&quot;</span></span></code></pre></div>
<p>Además de los casos ingresados como metros, que solucionaremos a continuación, todos parecen ser casos imposibles de resolver.</p>
<div id="la-función-extract" class="section level3" number="24.10.1">
<h3><span class="header-section-number">24.10.1</span> La función <code>extract</code></h3>
<p>La función <code>extract</code> de <strong>tidyverse</strong> es util para el procesamiento de cadenas que usaremos en nuestra solución final y, por ende, la presentamos aquí. En una sección anterior, construimos una expresión regular que nos permite identificar qué elementos de un vector de caracteres corresponden con el patrón de pies y pulgadas. Sin embargo, queremos hacer más. Queremos extraer y guardar los pies y los valores numéricos para poder convertirlos en pulgadas cuando sea apropiado.</p>
<p>Consideremos este ejemplo sencillo:</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb875-1"><a href="procesamiento-de-cadenas.html#cb875-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&#39;10&quot;</span>, <span class="st">&quot;6&#39;1&quot;</span>)</span>
<span id="cb875-2"><a href="procesamiento-de-cadenas.html#cb875-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> s)</span></code></pre></div>
<p>En la Sección <a href="cómo-cambiar-el-formato-de-datos.html#separate">21.3</a>, aprendimos sobre la función <code>separate</code>, que se puede utilizar para lograr nuestro objetivo actual:</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="procesamiento-de-cadenas.html#cb876-1" aria-hidden="true" tabindex="-1"></a>tab <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">&quot;feet&quot;</span>, <span class="st">&quot;inches&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;&#39;&quot;</span>)</span>
<span id="cb876-2"><a href="procesamiento-de-cadenas.html#cb876-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   feet inches</span></span>
<span id="cb876-3"><a href="procesamiento-de-cadenas.html#cb876-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    5     10</span></span>
<span id="cb876-4"><a href="procesamiento-de-cadenas.html#cb876-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    6      1</span></span></code></pre></div>
<p>La función <code>extract</code> del paquete <strong>tidyr</strong> nos permite usar grupos <em>regex</em> para extraer los valores deseados. Aquí está el equivalente al código anterior que usa <code>separate</code>, pero ahora usando <code>extract</code>:</p>
<div class="sourceCode" id="cb877"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb877-1"><a href="procesamiento-de-cadenas.html#cb877-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb877-2"><a href="procesamiento-de-cadenas.html#cb877-2" aria-hidden="true" tabindex="-1"></a>tab <span class="sc">%&gt;%</span> <span class="fu">extract</span>(x, <span class="fu">c</span>(<span class="st">&quot;feet&quot;</span>, <span class="st">&quot;inches&quot;</span>), <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d)&#39;(</span><span class="sc">\\</span><span class="st">d{1,2})&quot;</span>)</span>
<span id="cb877-3"><a href="procesamiento-de-cadenas.html#cb877-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   feet inches</span></span>
<span id="cb877-4"><a href="procesamiento-de-cadenas.html#cb877-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    5     10</span></span>
<span id="cb877-5"><a href="procesamiento-de-cadenas.html#cb877-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    6      1</span></span></code></pre></div>
<p>Entonces, ¿por qué necesitamos la nueva función <code>extract</code>? Hemos visto cómo pequeños cambios pueden conducir a no tener equivalencias exactas. Los grupos en <em>regex</em> nos dan más flexibilidad. Por ejemplo, si definimos:</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="procesamiento-de-cadenas.html#cb878-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5&#39;10&quot;</span>, <span class="st">&quot;6&#39;1</span><span class="sc">\&quot;</span><span class="st">&quot;</span>,<span class="st">&quot;5&#39;8inches&quot;</span>)</span>
<span id="cb878-2"><a href="procesamiento-de-cadenas.html#cb878-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> s)</span></code></pre></div>
<p>y solo queremos los números, <code>separate</code> no lo logra:</p>
<div class="sourceCode" id="cb879"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb879-1"><a href="procesamiento-de-cadenas.html#cb879-1" aria-hidden="true" tabindex="-1"></a>tab <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">&quot;feet&quot;</span>,<span class="st">&quot;inches&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;&#39;&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;right&quot;</span>)</span>
<span id="cb879-2"><a href="procesamiento-de-cadenas.html#cb879-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   feet  inches</span></span>
<span id="cb879-3"><a href="procesamiento-de-cadenas.html#cb879-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    5      10</span></span>
<span id="cb879-4"><a href="procesamiento-de-cadenas.html#cb879-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    6      1&quot;</span></span>
<span id="cb879-5"><a href="procesamiento-de-cadenas.html#cb879-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    5 8inches</span></span></code></pre></div>
<p>Sin embargo, podemos usar <code>extract</code>. La <em>regex</em> aquí es un poco más complicada ya que tenemos que permitir <code>'</code> con espacios y <code>feet</code>. Tampoco queremos el <code>"</code> incluido en el valor, por lo que no lo incluimos en el grupo:</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="procesamiento-de-cadenas.html#cb880-1" aria-hidden="true" tabindex="-1"></a>tab <span class="sc">%&gt;%</span> <span class="fu">extract</span>(x, <span class="fu">c</span>(<span class="st">&quot;feet&quot;</span>, <span class="st">&quot;inches&quot;</span>), <span class="at">regex =</span> <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">d)&#39;(</span><span class="sc">\\</span><span class="st">d{1,2})&quot;</span>)</span>
<span id="cb880-2"><a href="procesamiento-de-cadenas.html#cb880-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   feet inches</span></span>
<span id="cb880-3"><a href="procesamiento-de-cadenas.html#cb880-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    5     10</span></span>
<span id="cb880-4"><a href="procesamiento-de-cadenas.html#cb880-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    6      1</span></span>
<span id="cb880-5"><a href="procesamiento-de-cadenas.html#cb880-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    5      8</span></span></code></pre></div>
</div>
<div id="juntando-todas-la-piezas" class="section level3" number="24.10.2">
<h3><span class="header-section-number">24.10.2</span> Juntando todas la piezas</h3>
<p>Ahora estamos listos para juntar todas las piezas y discutir nuestros datos de alturas reportados para tratar de recuperar todas las alturas posibles. El código es complejo, pero lo dividiremos en partes.</p>
<p>Comenzamos limpiando la columna <code>height</code> para que las alturas estén más cerca de un formato de pulgadas y pies. Agregamos una columna con las alturas originales para luego poder comparar.</p>
<p>Ahora estamos listos para <em>wrangle</em> nuestro set de datos de alturas reportadas:</p>
<div class="sourceCode" id="cb881"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb881-1"><a href="procesamiento-de-cadenas.html#cb881-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;^([4-7])</span><span class="sc">\\</span><span class="st">s*&#39;</span><span class="sc">\\</span><span class="st">s*(</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.?</span><span class="sc">\\</span><span class="st">d*)$&quot;</span></span>
<span id="cb881-2"><a href="procesamiento-de-cadenas.html#cb881-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb881-3"><a href="procesamiento-de-cadenas.html#cb881-3" aria-hidden="true" tabindex="-1"></a>smallest <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb881-4"><a href="procesamiento-de-cadenas.html#cb881-4" aria-hidden="true" tabindex="-1"></a>tallest <span class="ot">&lt;-</span> <span class="dv">84</span></span>
<span id="cb881-5"><a href="procesamiento-de-cadenas.html#cb881-5" aria-hidden="true" tabindex="-1"></a>new_heights <span class="ot">&lt;-</span> reported_heights <span class="sc">%&gt;%</span></span>
<span id="cb881-6"><a href="procesamiento-de-cadenas.html#cb881-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">original =</span> height,</span>
<span id="cb881-7"><a href="procesamiento-de-cadenas.html#cb881-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="fu">words_to_numbers</span>(height) <span class="sc">%&gt;%</span> <span class="fu">convert_format</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb881-8"><a href="procesamiento-de-cadenas.html#cb881-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract</span>(height, <span class="fu">c</span>(<span class="st">&quot;feet&quot;</span>, <span class="st">&quot;inches&quot;</span>), <span class="at">regex =</span> pattern, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb881-9"><a href="procesamiento-de-cadenas.html#cb881-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">&quot;height&quot;</span>, <span class="st">&quot;feet&quot;</span>, <span class="st">&quot;inches&quot;</span>), as.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb881-10"><a href="procesamiento-de-cadenas.html#cb881-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">guess =</span> <span class="dv">12</span> <span class="sc">*</span> feet <span class="sc">+</span> inches) <span class="sc">%&gt;%</span></span>
<span id="cb881-11"><a href="procesamiento-de-cadenas.html#cb881-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height =</span> <span class="fu">case_when</span>(</span>
<span id="cb881-12"><a href="procesamiento-de-cadenas.html#cb881-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(height) <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="cn">NA</span>),</span>
<span id="cb881-13"><a href="procesamiento-de-cadenas.html#cb881-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(height, smallest, tallest) <span class="sc">~</span> height, <span class="co">#inches</span></span>
<span id="cb881-14"><a href="procesamiento-de-cadenas.html#cb881-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(height<span class="sc">/</span><span class="fl">2.54</span>, smallest, tallest) <span class="sc">~</span> height<span class="sc">/</span><span class="fl">2.54</span>, <span class="co">#cm</span></span>
<span id="cb881-15"><a href="procesamiento-de-cadenas.html#cb881-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(height<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fl">2.54</span>, smallest, tallest) <span class="sc">~</span> height<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="co">#meters</span></span>
<span id="cb881-16"><a href="procesamiento-de-cadenas.html#cb881-16" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="cn">NA</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb881-17"><a href="procesamiento-de-cadenas.html#cb881-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(height) <span class="sc">&amp;</span></span>
<span id="cb881-18"><a href="procesamiento-de-cadenas.html#cb881-18" aria-hidden="true" tabindex="-1"></a>                           inches <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">&amp;</span> <span class="fu">between</span>(guess, smallest, tallest),</span>
<span id="cb881-19"><a href="procesamiento-de-cadenas.html#cb881-19" aria-hidden="true" tabindex="-1"></a>                         guess, height)) <span class="sc">%&gt;%</span></span>
<span id="cb881-20"><a href="procesamiento-de-cadenas.html#cb881-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>guess)</span></code></pre></div>
<p>Podemos verificar todas las entradas que convertimos al escribir:</p>
<div class="sourceCode" id="cb882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb882-1"><a href="procesamiento-de-cadenas.html#cb882-1" aria-hidden="true" tabindex="-1"></a>new_heights <span class="sc">%&gt;%</span></span>
<span id="cb882-2"><a href="procesamiento-de-cadenas.html#cb882-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">not_inches</span>(original)) <span class="sc">%&gt;%</span></span>
<span id="cb882-3"><a href="procesamiento-de-cadenas.html#cb882-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(original, height) <span class="sc">%&gt;%</span></span>
<span id="cb882-4"><a href="procesamiento-de-cadenas.html#cb882-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(height) <span class="sc">%&gt;%</span></span>
<span id="cb882-5"><a href="procesamiento-de-cadenas.html#cb882-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Una observación final es que si miramos a los estudiantes más bajos de nuestro curso:</p>
<div class="sourceCode" id="cb883"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb883-1"><a href="procesamiento-de-cadenas.html#cb883-1" aria-hidden="true" tabindex="-1"></a>new_heights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(height) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n=</span><span class="dv">7</span>)</span>
<span id="cb883-2"><a href="procesamiento-de-cadenas.html#cb883-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            time_stamp    sex height feet inches original</span></span>
<span id="cb883-3"><a href="procesamiento-de-cadenas.html#cb883-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2017-07-04 01:30:25   Male   50.0   NA     NA       50</span></span>
<span id="cb883-4"><a href="procesamiento-de-cadenas.html#cb883-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2017-09-07 10:40:35   Male   50.0   NA     NA       50</span></span>
<span id="cb883-5"><a href="procesamiento-de-cadenas.html#cb883-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2014-09-02 15:18:30 Female   51.0   NA     NA       51</span></span>
<span id="cb883-6"><a href="procesamiento-de-cadenas.html#cb883-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 2016-06-05 14:07:20 Female   52.0   NA     NA       52</span></span>
<span id="cb883-7"><a href="procesamiento-de-cadenas.html#cb883-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 2016-06-05 14:07:38 Female   52.0   NA     NA       52</span></span>
<span id="cb883-8"><a href="procesamiento-de-cadenas.html#cb883-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 2014-09-23 03:39:56 Female   53.0   NA     NA       53</span></span>
<span id="cb883-9"><a href="procesamiento-de-cadenas.html#cb883-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 2015-01-07 08:57:29   Male   53.8   NA     NA    53.77</span></span></code></pre></div>
<p>Vemos alturas de <code>51</code>, <code>52</code> y <code>53</code>. Estas alturas tan bajas son raras y es probable que los estudiantes realmente querían escribir <code>5'1</code>, <code>5'2</code> y <code>5'3</code>. Debido a que no estamos completamente seguros, los dejaremos como se reportaron. El objeto <code>new_heights</code> contiene nuestra solución final para este caso de estudio.</p>
</div>
</div>
<div id="división-de-cadenas" class="section level2" number="24.11">
<h2><span class="header-section-number">24.11</span> División de cadenas</h2>
<p>Otra operación de <em>wrangling</em> de datos muy común es la división de cadenas. Para ilustrar cómo surge esto, comenzaremos con un ejemplo ilustrativo. Supongan que no tenemos la función <code>read_csv</code> o <code>read.csv</code> disponible. En cambio, tenemos que leer un archivo csv usando la función de base R <code>readLines</code> así:</p>
<div class="sourceCode" id="cb884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb884-1"><a href="procesamiento-de-cadenas.html#cb884-1" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata/murders.csv&quot;</span>, <span class="at">package =</span> <span class="st">&quot;dslabs&quot;</span>)</span>
<span id="cb884-2"><a href="procesamiento-de-cadenas.html#cb884-2" aria-hidden="true" tabindex="-1"></a>lines <span class="ot">&lt;-</span> <span class="fu">readLines</span>(filename)</span></code></pre></div>
<p>Esta función lee los datos línea por línea para crear un vector de cadenas. En este caso, una cadena para cada fila en la hoja de cálculo. Las primeras seis líneas son:</p>
<div class="sourceCode" id="cb885"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb885-1"><a href="procesamiento-de-cadenas.html#cb885-1" aria-hidden="true" tabindex="-1"></a>lines <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb885-2"><a href="procesamiento-de-cadenas.html#cb885-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;state,abb,region,population,total&quot;</span></span>
<span id="cb885-3"><a href="procesamiento-de-cadenas.html#cb885-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2] &quot;Alabama,AL,South,4779736,135&quot;     </span></span>
<span id="cb885-4"><a href="procesamiento-de-cadenas.html#cb885-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] &quot;Alaska,AK,West,710231,19&quot;         </span></span>
<span id="cb885-5"><a href="procesamiento-de-cadenas.html#cb885-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;Arizona,AZ,West,6392017,232&quot;      </span></span>
<span id="cb885-6"><a href="procesamiento-de-cadenas.html#cb885-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;Arkansas,AR,South,2915918,93&quot;     </span></span>
<span id="cb885-7"><a href="procesamiento-de-cadenas.html#cb885-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;California,CA,West,37253956,1257&quot;</span></span></code></pre></div>
<p>Queremos extraer los valores que están separados por una coma para cada cadena en el vector. El comando <code>str_split</code> hace exactamente esto:</p>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb886-1"><a href="procesamiento-de-cadenas.html#cb886-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">str_split</span>(lines, <span class="st">&quot;,&quot;</span>)</span>
<span id="cb886-2"><a href="procesamiento-de-cadenas.html#cb886-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">2</span>)</span>
<span id="cb886-3"><a href="procesamiento-de-cadenas.html#cb886-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb886-4"><a href="procesamiento-de-cadenas.html#cb886-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;state&quot;      &quot;abb&quot;        &quot;region&quot;     &quot;population&quot; &quot;total&quot;     </span></span>
<span id="cb886-5"><a href="procesamiento-de-cadenas.html#cb886-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb886-6"><a href="procesamiento-de-cadenas.html#cb886-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb886-7"><a href="procesamiento-de-cadenas.html#cb886-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Alabama&quot; &quot;AL&quot;      &quot;South&quot;   &quot;4779736&quot; &quot;135&quot;</span></span></code></pre></div>
<p>Tengan en cuenta que la primera entrada representa el nombre de las columnas, por lo que podemos separarlas:</p>
<div class="sourceCode" id="cb887"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb887-1"><a href="procesamiento-de-cadenas.html#cb887-1" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> x[[<span class="dv">1</span>]]</span>
<span id="cb887-2"><a href="procesamiento-de-cadenas.html#cb887-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<p>Para convertir nuestra lista en un <em>data frame</em>, podemos usar un atajo ofrecido por la función <code>map</code> en el paquete <strong>purrr</strong>. La función <code>map</code> aplica la misma función a cada elemento en una lista. Entonces, si queremos extraer la primera entrada de cada elemento en <code>x</code>, podemos escribir:</p>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb888-1"><a href="procesamiento-de-cadenas.html#cb888-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb888-2"><a href="procesamiento-de-cadenas.html#cb888-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(x, <span class="cf">function</span>(y) y[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">2</span>)</span>
<span id="cb888-3"><a href="procesamiento-de-cadenas.html#cb888-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb888-4"><a href="procesamiento-de-cadenas.html#cb888-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Alabama&quot;</span></span>
<span id="cb888-5"><a href="procesamiento-de-cadenas.html#cb888-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb888-6"><a href="procesamiento-de-cadenas.html#cb888-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb888-7"><a href="procesamiento-de-cadenas.html#cb888-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Alaska&quot;</span></span></code></pre></div>
<p>Sin embargo, debido a que esta es una tarea tan común, <strong>purrr</strong> provee un atajo. Si el segundo argumento recibe un número entero en lugar de una función, supondrá que queremos esa entrada. Entonces, el código anterior se puede escribir de manera más eficiente así:</p>
<div class="sourceCode" id="cb889"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb889-1"><a href="procesamiento-de-cadenas.html#cb889-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(x, <span class="dv">1</span>)</span></code></pre></div>
<p>Para forzar <code>map</code> a devolver un vector de caracteres en lugar de una lista, podemos usar <code>map_chr</code>. Asimismo, <code>map_int</code> devuelve enteros. Entonces, para crear nuestro <em>data frame</em>, podemos usar:</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb890-1"><a href="procesamiento-de-cadenas.html#cb890-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="fu">map_chr</span>(x, <span class="dv">1</span>),</span>
<span id="cb890-2"><a href="procesamiento-de-cadenas.html#cb890-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">map_chr</span>(x, <span class="dv">2</span>),</span>
<span id="cb890-3"><a href="procesamiento-de-cadenas.html#cb890-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">map_chr</span>(x, <span class="dv">3</span>),</span>
<span id="cb890-4"><a href="procesamiento-de-cadenas.html#cb890-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">map_chr</span>(x, <span class="dv">4</span>),</span>
<span id="cb890-5"><a href="procesamiento-de-cadenas.html#cb890-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">map_chr</span>(x, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb890-6"><a href="procesamiento-de-cadenas.html#cb890-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(parse_guess) <span class="sc">%&gt;%</span></span>
<span id="cb890-7"><a href="procesamiento-de-cadenas.html#cb890-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(col_names)</span>
<span id="cb890-8"><a href="procesamiento-de-cadenas.html#cb890-8" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> head</span>
<span id="cb890-9"><a href="procesamiento-de-cadenas.html#cb890-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 x 5</span></span>
<span id="cb890-10"><a href="procesamiento-de-cadenas.html#cb890-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state      abb   region population total</span></span>
<span id="cb890-11"><a href="procesamiento-de-cadenas.html#cb890-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb890-12"><a href="procesamiento-de-cadenas.html#cb890-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Alabama    AL    South     4779736   135</span></span>
<span id="cb890-13"><a href="procesamiento-de-cadenas.html#cb890-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Alaska     AK    West       710231    19</span></span>
<span id="cb890-14"><a href="procesamiento-de-cadenas.html#cb890-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Arizona    AZ    West      6392017   232</span></span>
<span id="cb890-15"><a href="procesamiento-de-cadenas.html#cb890-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Arkansas   AR    South     2915918    93</span></span>
<span id="cb890-16"><a href="procesamiento-de-cadenas.html#cb890-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 California CA    West     37253956  1257</span></span>
<span id="cb890-17"><a href="procesamiento-de-cadenas.html#cb890-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 1 more row</span></span></code></pre></div>
<p>Si exploran el paquete <strong>purrr</strong>, aprenderán que es posible realizar lo anterior con el siguiente código, que es más eficiente:</p>
<div class="sourceCode" id="cb891"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb891-1"><a href="procesamiento-de-cadenas.html#cb891-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span></span>
<span id="cb891-2"><a href="procesamiento-de-cadenas.html#cb891-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transpose</span>() <span class="sc">%&gt;%</span></span>
<span id="cb891-3"><a href="procesamiento-de-cadenas.html#cb891-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>( <span class="sc">~</span> <span class="fu">parse_guess</span>(<span class="fu">unlist</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb891-4"><a href="procesamiento-de-cadenas.html#cb891-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(col_names) <span class="sc">%&gt;%</span></span>
<span id="cb891-5"><a href="procesamiento-de-cadenas.html#cb891-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div>
<p>Resulta que podemos evitar todo el trabajo que mostramos arriba después de la llamada a <code>str_split</code>. Específicamente, si sabemos que los datos que estamos extrayendo se pueden representar como una tabla, podemos usar el argumento <code>simplify=TRUE</code> y <code>str_split</code> devuelve una matriz en lugar de una lista:</p>
<div class="sourceCode" id="cb892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb892-1"><a href="procesamiento-de-cadenas.html#cb892-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">str_split</span>(lines, <span class="st">&quot;,&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb892-2"><a href="procesamiento-de-cadenas.html#cb892-2" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> x[<span class="dv">1</span>,]</span>
<span id="cb892-3"><a href="procesamiento-de-cadenas.html#cb892-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb892-4"><a href="procesamiento-de-cadenas.html#cb892-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(x) <span class="ot">&lt;-</span> col_names</span>
<span id="cb892-5"><a href="procesamiento-de-cadenas.html#cb892-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb892-6"><a href="procesamiento-de-cadenas.html#cb892-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(parse_guess) <span class="sc">%&gt;%</span></span>
<span id="cb892-7"><a href="procesamiento-de-cadenas.html#cb892-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb892-8"><a href="procesamiento-de-cadenas.html#cb892-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 x 5</span></span>
<span id="cb892-9"><a href="procesamiento-de-cadenas.html#cb892-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state      abb   region population total</span></span>
<span id="cb892-10"><a href="procesamiento-de-cadenas.html#cb892-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb892-11"><a href="procesamiento-de-cadenas.html#cb892-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Alabama    AL    South     4779736   135</span></span>
<span id="cb892-12"><a href="procesamiento-de-cadenas.html#cb892-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Alaska     AK    West       710231    19</span></span>
<span id="cb892-13"><a href="procesamiento-de-cadenas.html#cb892-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Arizona    AZ    West      6392017   232</span></span>
<span id="cb892-14"><a href="procesamiento-de-cadenas.html#cb892-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Arkansas   AR    South     2915918    93</span></span>
<span id="cb892-15"><a href="procesamiento-de-cadenas.html#cb892-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 California CA    West     37253956  1257</span></span></code></pre></div>
</div>
<div id="estudio-de-caso-3-extracción-de-tablas-de-un-pdf" class="section level2" number="24.12">
<h2><span class="header-section-number">24.12</span> Estudio de caso 3: extracción de tablas de un PDF</h2>
<p>Uno de los sets de datos de <strong>dslabs</strong> muestra las tasas de financiación científica por género en los Países Bajos:</p>
<div class="sourceCode" id="cb893"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb893-1"><a href="procesamiento-de-cadenas.html#cb893-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb893-2"><a href="procesamiento-de-cadenas.html#cb893-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;research_funding_rates&quot;</span>)</span>
<span id="cb893-3"><a href="procesamiento-de-cadenas.html#cb893-3" aria-hidden="true" tabindex="-1"></a>research_funding_rates <span class="sc">%&gt;%</span></span>
<span id="cb893-4"><a href="procesamiento-de-cadenas.html#cb893-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;discipline&quot;</span>, <span class="st">&quot;success_rates_men&quot;</span>, <span class="st">&quot;success_rates_women&quot;</span>)</span>
<span id="cb893-5"><a href="procesamiento-de-cadenas.html#cb893-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            discipline success_rates_men success_rates_women</span></span>
<span id="cb893-6"><a href="procesamiento-de-cadenas.html#cb893-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   Chemical sciences              26.5                25.6</span></span>
<span id="cb893-7"><a href="procesamiento-de-cadenas.html#cb893-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   Physical sciences              19.3                23.1</span></span>
<span id="cb893-8"><a href="procesamiento-de-cadenas.html#cb893-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3             Physics              26.9                22.2</span></span>
<span id="cb893-9"><a href="procesamiento-de-cadenas.html#cb893-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          Humanities              14.3                19.3</span></span>
<span id="cb893-10"><a href="procesamiento-de-cadenas.html#cb893-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  Technical sciences              15.9                21.0</span></span>
<span id="cb893-11"><a href="procesamiento-de-cadenas.html#cb893-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   Interdisciplinary              11.4                21.8</span></span>
<span id="cb893-12"><a href="procesamiento-de-cadenas.html#cb893-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 Earth/life sciences              24.4                14.3</span></span>
<span id="cb893-13"><a href="procesamiento-de-cadenas.html#cb893-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8     Social sciences              15.3                11.5</span></span>
<span id="cb893-14"><a href="procesamiento-de-cadenas.html#cb893-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    Medical sciences              18.8                11.2</span></span></code></pre></div>
<p>Los datos provienen de un artículo publicado en <em>Proceedings of the National Academy of Science</em> (PNAS)<a href="#fn100" class="footnote-ref" id="fnref100"><sup>100</sup></a>, una revista científica ampliamente leída. Sin embargo, los datos no se proveen en una hoja de cálculo, sino en una tabla en un documento PDF. Aquí hay una captura de pantalla de la tabla:</p>
<p><img src="wrangling/img/pnas-table-s1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>(Fuente: Romy van der Lee y Naomi Ellemers, PNAS 2015 112 (40) 12349-12353<a href="#fn101" class="footnote-ref" id="fnref101"><sup>101</sup></a>.)</p>
<p>Podríamos extraer los números a mano, pero esto podría conducir a errores humanos. En cambio, podemos intentar cambiar los datos con R. Comenzamos descargando el documento PDF y luego importándolo a R:</p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="procesamiento-de-cadenas.html#cb894-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;pdftools&quot;</span>)</span>
<span id="cb894-2"><a href="procesamiento-de-cadenas.html#cb894-2" aria-hidden="true" tabindex="-1"></a>temp_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb894-3"><a href="procesamiento-de-cadenas.html#cb894-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;https://www.pnas.org/content/suppl/2015/09/16/&quot;</span>,</span>
<span id="cb894-4"><a href="procesamiento-de-cadenas.html#cb894-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;1510159112.DCSupplemental/pnas.201510159SI.pdf&quot;</span>)</span>
<span id="cb894-5"><a href="procesamiento-de-cadenas.html#cb894-5" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, temp_file)</span>
<span id="cb894-6"><a href="procesamiento-de-cadenas.html#cb894-6" aria-hidden="true" tabindex="-1"></a>txt <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(temp_file)</span>
<span id="cb894-7"><a href="procesamiento-de-cadenas.html#cb894-7" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(temp_file)</span></code></pre></div>
<p>Si examinamos el objeto <code>txt</code>, notamos que es un vector de caracteres con una entrada para cada página. Entonces mantenemos la página que queremos:</p>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb895-1"><a href="procesamiento-de-cadenas.html#cb895-1" aria-hidden="true" tabindex="-1"></a>raw_data_research_funding_rates <span class="ot">&lt;-</span> txt[<span class="dv">2</span>]</span></code></pre></div>
<p>Los pasos anteriores se pueden omitir porque también incluimos estos datos sin procesar en el paquete <strong>dslabs</strong>:</p>
<div class="sourceCode" id="cb896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb896-1"><a href="procesamiento-de-cadenas.html#cb896-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;raw_data_research_funding_rates&quot;</span>)</span></code></pre></div>
<p>Al examinar el objeto <code>raw_data_research_funding_rates</code>, vemos que es una cadena larga y cada línea de la página, incluyendo las filas de la tabla, están separadas por el símbolo de nueva línea: <code>\n</code>. Por lo tanto, podemos crear una lista con las líneas del texto como elementos así:</p>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb897-1"><a href="procesamiento-de-cadenas.html#cb897-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">str_split</span>(raw_data_research_funding_rates, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>Debido a que comenzamos con solo un elemento en la cadena, terminamos con una lista con solo una entrada:</p>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="procesamiento-de-cadenas.html#cb898-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> tab[[<span class="dv">1</span>]]</span></code></pre></div>
<p>Al examinar <code>tab</code>, vemos que la información para los nombres de columna son la tercera y cuarta entrada:</p>
<div class="sourceCode" id="cb899"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb899-1"><a href="procesamiento-de-cadenas.html#cb899-1" aria-hidden="true" tabindex="-1"></a>the_names_1 <span class="ot">&lt;-</span> tab[<span class="dv">3</span>]</span>
<span id="cb899-2"><a href="procesamiento-de-cadenas.html#cb899-2" aria-hidden="true" tabindex="-1"></a>the_names_2 <span class="ot">&lt;-</span> tab[<span class="dv">4</span>]</span></code></pre></div>
<p>La primera de estas filas se ve así:</p>
<pre><code>#&gt;                                                       Applications, n
#&gt;                   Awards, n                      Success rates, %</code></pre>
<p>Queremos crear un vector con un nombre para cada columna. Podemos hacerlo usando algunas de las funciones que acabamos de aprender. Empecemos con <code>the_names_1</code>, que mostramos arriba. Queremos eliminar el espacio inicial y todo lo que sigue a la coma. Utilizamos <em>regex</em> para este último. Entonces podemos obtener los elementos dividiendo cadenas separadas por espacio. Queremos dividir solo cuando hay 2 o más espacios para no dividir <code>Success rates</code>. Para esto usamos la expresión regular <code>\\s{2,}</code>:</p>
<div class="sourceCode" id="cb901"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb901-1"><a href="procesamiento-de-cadenas.html#cb901-1" aria-hidden="true" tabindex="-1"></a>the_names_1 <span class="ot">&lt;-</span> the_names_1 <span class="sc">%&gt;%</span></span>
<span id="cb901-2"><a href="procesamiento-de-cadenas.html#cb901-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb901-3"><a href="procesamiento-de-cadenas.html#cb901-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;,</span><span class="sc">\\</span><span class="st">s.&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb901-4"><a href="procesamiento-de-cadenas.html#cb901-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">s{2,}&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb901-5"><a href="procesamiento-de-cadenas.html#cb901-5" aria-hidden="true" tabindex="-1"></a>the_names_1</span>
<span id="cb901-6"><a href="procesamiento-de-cadenas.html#cb901-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1]           [,2]     [,3]           </span></span>
<span id="cb901-7"><a href="procesamiento-de-cadenas.html#cb901-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;Applications&quot; &quot;Awards&quot; &quot;Success rates&quot;</span></span></code></pre></div>
<p>Ahora examinaremos <code>the_names_2</code>:</p>
<pre><code>#&gt;                         Discipline              Total     Men      Women
#&gt; n         Total    Men       Women          Total    Men      Women</code></pre>
<p>Aquí queremos podar el espacio inicial y buscar usar espacios para dividir las cadenas como lo hicimos para la primera línea:</p>
<div class="sourceCode" id="cb903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb903-1"><a href="procesamiento-de-cadenas.html#cb903-1" aria-hidden="true" tabindex="-1"></a>the_names_2 <span class="ot">&lt;-</span> the_names_2 <span class="sc">%&gt;%</span></span>
<span id="cb903-2"><a href="procesamiento-de-cadenas.html#cb903-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb903-3"><a href="procesamiento-de-cadenas.html#cb903-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">s+&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb903-4"><a href="procesamiento-de-cadenas.html#cb903-4" aria-hidden="true" tabindex="-1"></a>the_names_2</span>
<span id="cb903-5"><a href="procesamiento-de-cadenas.html#cb903-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1]         [,2]    [,3]  [,4]    [,5]    [,6]  [,7]    [,8]   </span></span>
<span id="cb903-6"><a href="procesamiento-de-cadenas.html#cb903-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;Discipline&quot; &quot;Total&quot; &quot;Men&quot; &quot;Women&quot; &quot;Total&quot; &quot;Men&quot; &quot;Women&quot; &quot;Total&quot;</span></span>
<span id="cb903-7"><a href="procesamiento-de-cadenas.html#cb903-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,9]  [,10]  </span></span>
<span id="cb903-8"><a href="procesamiento-de-cadenas.html#cb903-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;Men&quot; &quot;Women&quot;</span></span></code></pre></div>
<p>Entonces podemos unirlos para generar un nombre para cada columna:</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="procesamiento-de-cadenas.html#cb904-1" aria-hidden="true" tabindex="-1"></a>tmp_names <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="fu">rep</span>(the_names_1, <span class="at">each =</span> <span class="dv">3</span>), the_names_2[<span class="sc">-</span><span class="dv">1</span>], <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb904-2"><a href="procesamiento-de-cadenas.html#cb904-2" aria-hidden="true" tabindex="-1"></a>the_names <span class="ot">&lt;-</span> <span class="fu">c</span>(the_names_2[<span class="dv">1</span>], tmp_names) <span class="sc">%&gt;%</span></span>
<span id="cb904-3"><a href="procesamiento-de-cadenas.html#cb904-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_to_lower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb904-4"><a href="procesamiento-de-cadenas.html#cb904-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">s&quot;</span>, <span class="st">&quot;_&quot;</span>)</span>
<span id="cb904-5"><a href="procesamiento-de-cadenas.html#cb904-5" aria-hidden="true" tabindex="-1"></a>the_names</span>
<span id="cb904-6"><a href="procesamiento-de-cadenas.html#cb904-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;discipline&quot;          &quot;applications_total&quot;  &quot;applications_men&quot;   </span></span>
<span id="cb904-7"><a href="procesamiento-de-cadenas.html#cb904-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;applications_women&quot;  &quot;awards_total&quot;        &quot;awards_men&quot;         </span></span>
<span id="cb904-8"><a href="procesamiento-de-cadenas.html#cb904-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;awards_women&quot;        &quot;success_rates_total&quot; &quot;success_rates_men&quot;  </span></span>
<span id="cb904-9"><a href="procesamiento-de-cadenas.html#cb904-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;success_rates_women&quot;</span></span></code></pre></div>
<p>Ahora estamos listos para obtener los datos reales. Al examinar el objeto <code>tab</code>, notamos que la información está en las líneas 6 a 14. Podemos usar <code>str_split</code> de nuevo para lograr nuestro objetivo:</p>
<div class="sourceCode" id="cb905"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb905-1"><a href="procesamiento-de-cadenas.html#cb905-1" aria-hidden="true" tabindex="-1"></a>new_research_funding_rates <span class="ot">&lt;-</span> tab[<span class="dv">6</span><span class="sc">:</span><span class="dv">14</span>] <span class="sc">%&gt;%</span></span>
<span id="cb905-2"><a href="procesamiento-de-cadenas.html#cb905-2" aria-hidden="true" tabindex="-1"></a>  str_trim <span class="sc">%&gt;%</span></span>
<span id="cb905-3"><a href="procesamiento-de-cadenas.html#cb905-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">s{2,}&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb905-4"><a href="procesamiento-de-cadenas.html#cb905-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb905-5"><a href="procesamiento-de-cadenas.html#cb905-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(the_names) <span class="sc">%&gt;%</span></span>
<span id="cb905-6"><a href="procesamiento-de-cadenas.html#cb905-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="sc">-</span><span class="dv">1</span>, parse_number)</span>
<span id="cb905-7"><a href="procesamiento-de-cadenas.html#cb905-7" aria-hidden="true" tabindex="-1"></a>new_research_funding_rates <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb905-8"><a href="procesamiento-de-cadenas.html#cb905-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 9 x 10</span></span>
<span id="cb905-9"><a href="procesamiento-de-cadenas.html#cb905-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   discipline       applications_total applications_men applications_wom…</span></span>
<span id="cb905-10"><a href="procesamiento-de-cadenas.html#cb905-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                         &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb905-11"><a href="procesamiento-de-cadenas.html#cb905-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Chemical scienc…                122               83                39</span></span>
<span id="cb905-12"><a href="procesamiento-de-cadenas.html#cb905-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Physical scienc…                174              135                39</span></span>
<span id="cb905-13"><a href="procesamiento-de-cadenas.html#cb905-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Physics                          76               67                 9</span></span>
<span id="cb905-14"><a href="procesamiento-de-cadenas.html#cb905-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Humanities                      396              230               166</span></span>
<span id="cb905-15"><a href="procesamiento-de-cadenas.html#cb905-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Technical scien…                251              189                62</span></span>
<span id="cb905-16"><a href="procesamiento-de-cadenas.html#cb905-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 4 more rows, and 6 more variables: awards_total &lt;dbl&gt;,</span></span>
<span id="cb905-17"><a href="procesamiento-de-cadenas.html#cb905-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   awards_men &lt;dbl&gt;, awards_women &lt;dbl&gt;, success_rates_total &lt;dbl&gt;,</span></span>
<span id="cb905-18"><a href="procesamiento-de-cadenas.html#cb905-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   success_rates_men &lt;dbl&gt;, success_rates_women &lt;dbl&gt;</span></span></code></pre></div>
<p>Podemos ver que los objetos son idénticos:</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="procesamiento-de-cadenas.html#cb906-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(research_funding_rates, new_research_funding_rates)</span>
<span id="cb906-2"><a href="procesamiento-de-cadenas.html#cb906-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div id="recode" class="section level2" number="24.13">
<h2><span class="header-section-number">24.13</span> Recodificación</h2>
<p>Otra operación común que involucra cadenas es recodificar los nombres de variables categóricas. Supongan que tienen nombres largos para sus niveles y los mostrarán en gráficos. Es posible que quieran utilizar versiones más cortas de estos nombres. Por ejemplo, en los vectores de caracteres con nombres de países, es posible que quieran cambiar “Estados Unidos de América” a “Estados Unidos,” “Reino Unido” a “RU” y así sucesivamente. Podemos hacer esto con <code>case_when</code>, aunque <strong>tidyverse</strong> ofrece una opción específicamente diseñada para esta tarea: la función <code>recode</code>.</p>
<p>Aquí hay un ejemplo que muestra cómo cambiar el nombre de los países con nombres largos:</p>
<div class="sourceCode" id="cb907"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb907-1"><a href="procesamiento-de-cadenas.html#cb907-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb907-2"><a href="procesamiento-de-cadenas.html#cb907-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;gapminder&quot;</span>)</span></code></pre></div>
<p>Imaginen que queremos mostrar series temporales de esperanza de vida por país para el Caribe:</p>
<div class="sourceCode" id="cb908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb908-1"><a href="procesamiento-de-cadenas.html#cb908-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb908-2"><a href="procesamiento-de-cadenas.html#cb908-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;Caribbean&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb908-3"><a href="procesamiento-de-cadenas.html#cb908-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, life_expectancy, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb908-4"><a href="procesamiento-de-cadenas.html#cb908-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="libro_files/figure-html/caribbean-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>El gráfico es lo que queremos, pero gran parte del espacio se desperdicia para acomodar algunos de los nombres largos de los países.
<!--

```r
gapminder %>%
filter(region == "Caribbean") %>%
filter(str_length(country) >= 12) %>%
distinct(country)
#>                          country
#> 1            Antigua and Barbuda
#> 2             Dominican Republic
#> 3 St. Vincent and the Grenadines
#> 4            Trinidad and Tobago
```
-->
Tenemos cuatro países con nombres de más de 12 caracteres. Estos nombres aparecen una vez por cada año en el set de datos Gapminder. Una vez que elegimos los apodos, debemos cambiarlos todos de manera consistente. La función <code>recode</code> se puede utilizar para hacer esto:</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb909-1"><a href="procesamiento-de-cadenas.html#cb909-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(region<span class="sc">==</span><span class="st">&quot;Caribbean&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb909-2"><a href="procesamiento-de-cadenas.html#cb909-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">recode</span>(country,</span>
<span id="cb909-3"><a href="procesamiento-de-cadenas.html#cb909-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">`</span><span class="at">Antigua and Barbuda</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Barbuda&quot;</span>,</span>
<span id="cb909-4"><a href="procesamiento-de-cadenas.html#cb909-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">`</span><span class="at">Dominican Republic</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;DR&quot;</span>,</span>
<span id="cb909-5"><a href="procesamiento-de-cadenas.html#cb909-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">`</span><span class="at">St. Vincent and the Grenadines</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;St. Vincent&quot;</span>,</span>
<span id="cb909-6"><a href="procesamiento-de-cadenas.html#cb909-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">`</span><span class="at">Trinidad and Tobago</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Trinidad&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb909-7"><a href="procesamiento-de-cadenas.html#cb909-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, life_expectancy, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb909-8"><a href="procesamiento-de-cadenas.html#cb909-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="libro_files/figure-html/caribbean-with-nicknames-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Hay otras funciones similares en otros paquetes de R, como <code>recode_factor</code> y <code>fct_recoder</code> en el paquete <strong>forcats</strong>.</p>
</div>
<div id="ejercicios-41" class="section level2" number="24.14">
<h2><span class="header-section-number">24.14</span> Ejercicios</h2>
<p>1. Complete todas las lecciones y ejercicios en el tutorial interactivo en línea <a href="https://regexone.com/">https://regexone.com/</a>.</p>
<p>2. En el directorio <code>extdata</code> del paquete <strong>dslabs</strong>, encontrará un archivo PDF que contiene datos de mortalidad diaria para Puerto Rico del 1 de enero de 2015 al 31 de mayo de 2018. Puede encontrar el archivo así:</p>
<div class="sourceCode" id="cb910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb910-1"><a href="procesamiento-de-cadenas.html#cb910-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;RD-Mortality-Report_2015-18-180531.pdf&quot;</span>,</span>
<span id="cb910-2"><a href="procesamiento-de-cadenas.html#cb910-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">package=</span><span class="st">&quot;dslabs&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb911-1"><a href="procesamiento-de-cadenas.html#cb911-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system2</span>(<span class="st">&quot;open&quot;</span>, <span class="at">args =</span> fn)</span></code></pre></div>
<p>y en Windows, puede escribir:</p>
<div class="sourceCode" id="cb912"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb912-1"><a href="procesamiento-de-cadenas.html#cb912-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system</span>(<span class="st">&quot;cmd.exe&quot;</span>, <span class="at">input =</span> <span class="fu">paste</span>(<span class="st">&quot;start&quot;</span>, fn))</span></code></pre></div>
<p>¿Cuál de las siguientes opciones describe mejor este archivo?</p>
<ol style="list-style-type: lower-alpha">
<li>Es una tabla. Extraer los datos será fácil.</li>
<li>Es un informe escrito en prosa. Extraer los datos será imposible.</li>
<li>Es un informe que combina gráficos y tablas. Extraer los datos parece posible.</li>
<li>Muestra gráficos de los datos. Extraer los datos será difícil.</li>
</ol>
<p>3. Vamos a crear un set de datos ordenado con cada fila representando una observación. Las variables en este set de datos serán año, mes, día y muertes.
Comience instalando y cargando el paquete <strong>pdftools</strong>:</p>
<div class="sourceCode" id="cb913"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb913-1"><a href="procesamiento-de-cadenas.html#cb913-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;pdftools&quot;</span>)</span>
<span id="cb913-2"><a href="procesamiento-de-cadenas.html#cb913-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span></code></pre></div>
<p>Ahora lean <code>fn</code> utilizando la función <code>pdf_text</code> y almacene los resultados en un objeto llamado <code>txt</code>. ¿Cuál de las siguientes opciones describe mejor lo que ve en <code>txt</code>?</p>
<ol style="list-style-type: lower-alpha">
<li>Una tabla con los datos de mortalidad.</li>
<li>Una cadena de caracteres de longitud 12. Cada entrada representa el texto en cada página. Los datos de mortalidad están ahí en alguna parte.</li>
<li>Una cadena de caracteres con una entrada que contiene toda la información en el archivo PDF.</li>
<li>Un documento HTML.</li>
</ol>
<p>4. Extraiga la novena página del archivo PDF del objeto <code>txt</code>. Luego, use <code>str_split</code> del paquete <strong>stringr</strong> para que cada línea esté en una entrada diferente. Llame a este vector de cadena <code>s</code>. Entonces mire el resultado y elija el que mejor describa lo que ve.</p>
<ol style="list-style-type: lower-alpha">
<li>Es una cadena vacía.</li>
<li>Puedo ver la figura que se muestra en la página 1.</li>
<li>Es una tabla <em>tidy</em>.</li>
<li>¡Puedo ver la tabla! Pero hay muchas otras cosas de las que debemos deshacernos.</li>
</ol>
<p>5. ¿Qué tipo de objeto es <code>s</code> y cuántas entradas tiene?</p>
<p>6. Vemos que el <em>output</em> es una lista con un componente. Redefina <code>s</code> para que sea la primera entrada de la lista. ¿Qué tipo de objeto es <code>s</code> y cuántas entradas tiene?</p>
<p>7. Al inspeccionar la cadena que obtuvimos anteriormente, vemos un problema común: espacios en blanco antes y después de los otros caracteres. Podar es un primer paso común en el procesamiento de cadenas. Estos espacios adicionales eventualmente complicarán dividir las cadenas, por lo que comenzamos por eliminarlos. Aprendimos sobre el comando <code>str_trim</code> que elimina espacios al principio o al final de las cadenas. Use esta función para podar <code>s</code>.</p>
<p>8. Queremos extraer los números de las cadenas almacenadas en <code>s</code>. Sin embargo, hay muchos caracteres no numéricos que se interpondrán en el camino. Podemos eliminarlos, pero antes de hacerlo queremos preservar la cadena con el encabezado de la columna, que incluye la abreviatura del mes.
Utilice la función <code>str_which</code> para encontrar las filas con un encabezado. Guarde estos resultados en <code>header_index</code>. Sugerencia: encuentre la primera cadena que corresponda con el patrón <code>2015</code> utilizando la función <code>str_which</code>.</p>
<p>9. Ahora vamos a definir dos objetos: <code>month</code> almacenará el mes y <code>header</code> almacenará los nombres de columna. Identifique qué fila contiene el encabezado de la tabla. Guarde el contenido de la fila en un objeto llamado <code>header</code>. Luego, use <code>str_split</code> para ayudar a definir los dos objetos que necesitamos. Sugerencias: el separador aquí es uno o más espacios. Además, considere usar el argumento <code>simplify</code>.</p>
<p>10. Observe que hacia el final de la página verá una fila <em>totals</em> seguida de filas con otras estadísticas de resumen. Cree un objeto llamado <code>tail_index</code> con el índice de la entrada <em>totals</em>.</p>
<p>11. Debido a que nuestra página PDF incluye gráficos con números, algunas de nuestras filas tienen solo un número (desde el eje-y del gráfico). Utilice la función <code>str_count</code> para crear un objeto <code>n</code> con el número de números en cada fila. Sugerencia: escriba una expresión regular para un número como este <code>\\d+</code>.</p>
<p>12. Ahora estamos listos para eliminar entradas de filas que sabemos que no necesitamos. La entrada <code>header_index</code> y todo lo que viene antes se debe eliminar. Entradas para las cuales <code>n</code> es 1 también deben eliminarse. Finalmente, se debe eliminar la entrada <code>tail_index</code> y todo lo que viene después.</p>
<p>13. Ahora estamos listos para eliminar todas las entradas no numéricas. Haga esto usando <em>regex</em> y la función <code>str_remove_all</code>. Sugerencia: recuerde que en <em>regex</em>, usar la versión en mayúscula de un carácter especial generalmente significa lo contrario. Entonces <code>\\D</code> significa “no un dígito.” Recuerde que también quiere mantener espacios.</p>
<p>14. Para convertir las cadenas en una tabla, use la función <code>str_split_fixed</code>. Convierta <code>s</code> en una matriz de datos con solo la fecha y los datos con los números de muertes. Sugerencias: recuerde que el patrón que separa los valores es “uno o más espacios.” Utilice el argumento <code>n</code> de la función <code>str_split_fixed</code> para asegurarse de que la matriz de datos tenga las columnas necesarias para contener la información que queremos conservar y una columna más para capturar todo lo que no queremos. Finalmente, conserve sólo las columnas que necesita.</p>
<p>15. Ahora ya casi ha terminado. Agregue nombres de columna a la matriz, incluyendo uno llamado <code>day</code>. Además, agregue una columna con el mes. Llame al objeto resultante <code>dat</code>. Finalmente, asegúrese de que el día es un número entero, no un carácter. Sugerencia: use solo las primeras cinco columnas.</p>
<p>16. Ahora termine convirtiendo <code>tab</code> a formato <em>tidy</em> con la función <code>pivot_longer</code>.</p>
<p>17. Haga un diagrama de muertes versus día con color para indicar el año. Excluya 2018 ya que no tenemos datos para todo el año.</p>
<p>18. Ahora que hemos <em>wrangled</em> estos datos paso a paso, póngalos todos juntos en un programa de R, usando el <em>pipe</em> lo mas posible. Sugerencia: primero defina los índices, luego escriba una línea de código que realice todo el procesamiento de la cadena.</p>
<p>19. Avanzado: volvamos al ejemplo de la nómina MLB de la sección “Extracción de la web.” Use lo que aprendió en los capítulos de extracción de la web y procesamiento de cadenas para extraer la nómina de los Yankees de Nueva York, las Medias Rojas de Boston y los Atléticos de Oakland y grafíquelos como una función del tiempo.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="96">
<li id="fn96"><p><a href="https://www.regular-expressions.info/tutorial.html" class="uri">https://www.regular-expressions.info/tutorial.html</a><a href="procesamiento-de-cadenas.html#fnref96" class="footnote-back">↩︎</a></p></li>
<li id="fn97"><p><a href="http://r4ds.had.co.nz/strings.html#matching-patrones-con-expresiones-regulares" class="uri">http://r4ds.had.co.nz/strings.html#matching-patrones-con-expresiones-regulares</a><a href="procesamiento-de-cadenas.html#fnref97" class="footnote-back">↩︎</a></p></li>
<li id="fn98"><p><a href="https://github.com/rstudio/cheatsheets/raw/master/translations/spanish/strings_Spanish.pdf" class="uri">https://github.com/rstudio/cheatsheets/raw/master/translations/spanish/strings_Spanish.pdf</a><a href="procesamiento-de-cadenas.html#fnref98" class="footnote-back">↩︎</a></p></li>
<li id="fn99"><p><a href="https://github.com/rstudio/cheatsheets/raw/master/translations/spanish/strings_Spanish.pdf" class="uri">https://github.com/rstudio/cheatsheets/raw/master/translations/spanish/strings_Spanish.pdf</a><a href="procesamiento-de-cadenas.html#fnref99" class="footnote-back">↩︎</a></p></li>
<li id="fn100"><p><a href="http://www.pnas.org/content/112/40/12349.abstract" class="uri">http://www.pnas.org/content/112/40/12349.abstract</a><a href="procesamiento-de-cadenas.html#fnref100" class="footnote-back">↩︎</a></p></li>
<li id="fn101"><p><a href="http://www.pnas.org/content/112/40/12349" class="uri">http://www.pnas.org/content/112/40/12349</a><a href="procesamiento-de-cadenas.html#fnref101" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="extracción-de-la-web.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cómo-leer-y-procesar-fechas-y-horas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rafalab/dslibro/edit/master/wrangling/string-processing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["libro.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
